<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flutter.js Analyze Command Documentation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .section-title {
      @apply text-2xl md:text-3xl font-bold text-gray-800 mb-4 border-b-2 border-blue-500 pb-2;
    }
    .subsection-title {
      @apply text-xl md:text-2xl font-semibold text-gray-700 mt-6 mb-3;
    }
    .code-block {
      @apply bg-gray-800 text-white p-4 rounded-lg overflow-x-auto text-sm;
    }
    .table-container {
      @apply overflow-x-auto;
    }
    .table {
      @apply min-w-full bg-white border border-gray-300 rounded-lg;
    }
    .table th, .table td {
      @apply border-b border-gray-200 px-4 py-2 text-left;
    }
    .table th {
      @apply bg-gray-100 font-semibold;
    }
  </style>
</head>
<body class="bg-gray-100">
  <div class="container mx-auto px-4 py-8 max-w-5xl">
    <header class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900">Flutter.js Analyze Command</h1>
      <p class="text-lg text-gray-600 mt-2">A comprehensive tool for analyzing Flutter-to-Web transpilation</p>
    </header>

    <section class="bg-white p-6 rounded-lg shadow-lg mb-8">
      <h2 class="section-title">What flutter-js analyze Should Do</h2>
      <p class="mb-4">The <code>flutter-js analyze</code> command provides insights into the Flutter-to-Web transpilation process, focusing on bundle analysis, widget usage, reactivity, and optimization suggestions.</p>
      
      <h3 class="subsection-title">1. Bundle Analysis</h3>
      <p class="mb-4">Analyzes the output of the transpilation process:</p>
      <pre class="code-block"><code>
// Analyze the built files
- Read build/app.min.js size
- Parse build/styles.min.css
- Calculate compression ratios
- Identify largest components
- Show what's in the bundle
      </code></pre>

      <h3 class="subsection-title">2. Widget Usage Analysis</h3>
      <p class="mb-4">Parses Flutter source code to understand widget usage:</p>
      <pre class="code-block"><code>
// Scan your Flutter code
- Count widget instances (Container: 8×, Text: 12×)
- Identify which widgets will be transpiled
- Show Material vs Cupertino usage
- List unsupported widgets (CustomPaint, etc.)
      </code></pre>

      <h3 class="subsection-title">3. Reactivity Analysis</h3>
      <p class="mb-4">Analyzes reactive dependencies in the application:</p>
      <pre class="code-block"><code>
// Analyze reactivity
- Count StatefulWidget vs StatelessWidget
- Identify Provider/Riverpod usage
- Map state dependencies
- Estimate runtime size needed
      </code></pre>

      <h3 class="subsection-title">4. Optimization Suggestions</h3>
      <p class="mb-4">Provides actionable suggestions based on analysis:</p>
      <pre class="code-block"><code>
// Optimization suggestions
- "3 identical Text widgets could share CSS classes"
- "Route X could be lazy-loaded"
- "Theme not used, can remove 4KB"
- "Replace CustomPaint with SVG for 12KB savings"
      </code></pre>
    </section>

    <section class="bg-white p-6 rounded-lg shadow-lg mb-8">
      <h2 class="section-title">Practical Implementation Strategy</h2>
      <h3 class="subsection-title">Phase 1: Basic Bundle Analysis (Week 15-16)</h3>
      <p class="mb-4">Implement basic bundle analysis to read the build directory and report file sizes and compression ratios.</p>
      <pre class="code-block"><code>
flutter-js analyze
// Reads build/ directory
// Shows file sizes, compression ratios
// Simple but useful immediately
      </code></pre>

      <h3 class="subsection-title">Phase 2: Widget Detection (Week 17-18)</h3>
      <p class="mb-4">Add widget detection using the Phase 1 parser to count widget types and identify unsupported widgets.</p>
      <pre class="code-block"><code>
// Use your parser from Phase 1
// Count widget types in source code
// Identify unsupported widgets
// This helps users know what will/won't work
      </code></pre>

      <h3 class="subsection-title">Phase 3: Integration with dead_code_analyzer (Week 19+)</h3>
      <p class="mb-4">Integrate the <code>dead_code_analyzer</code> package to identify unused code and suggest optimizations.</p>
      <pre class="code-block"><code>
flutter-js analyze --dead-code
// Runs YOUR dead_code_analyzer package
// Shows unused Flutter widgets
// Suggests removing unused imports
      </code></pre>
    </section>

    <section class="bg-white p-6 rounded-lg shadow-lg mb-8">
      <h2 class="section-title">Updated flutter-js analyze Command</h2>
      <h3 class="subsection-title">Usage Examples</h3>
      <pre class="code-block"><code>
# Full analysis (default)
flutter-js analyze

# Only bundle analysis (requires build/)
flutter-js analyze --no-widgets --no-reactivity

# Only widget usage (no build required)
flutter-js analyze --no-bundle --no-reactivity

# Run your dead_code_analyzer
flutter-js analyze --dead-code

# Everything in verbose mode
flutter-js analyze -v

# Only dead code analysis
flutter-js analyze --no-bundle --no-widgets --no-reactivity --dead-code

# Custom source path
flutter-js analyze --source=lib/features
      </code></pre>

      <h3 class="subsection-title">Analysis Types</h3>
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>Analysis Type</th>
              <th>Description</th>
              <th>Requirements</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Bundle Analysis (--bundle)</td>
              <td>Reads build/ directory, shows file sizes and compression, breaks down bundle contents</td>
              <td>build/ directory exists</td>
            </tr>
            <tr>
              <td>Widget Usage Analysis (--widgets)</td>
              <td>Scans lib/ for widget counts, supported/unsupported widgets, Material vs Cupertino usage</td>
              <td>Flutter source code in lib/</td>
            </tr>
            <tr>
              <td>Reactivity Analysis (--reactivity)</td>
              <td>Analyzes setState, Provider/Riverpod usage, state dependencies, and runtime size</td>
              <td>Flutter source code</td>
            </tr>
            <tr>
              <td>Dead Code Analysis (--dead-code)</td>
              <td>Runs dead_code_analyzer to show unused imports, variables, functions, and savings</td>
              <td>dead_code_analyzer package installed</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="bg-white p-6 rounded-lg shadow-lg mb-8">
      <h2 class="section-title">Integration with dead_code_analyzer</h2>
      <p class="mb-4">Integrate the <code>dead_code_analyzer</code> package to detect unused code and provide optimization suggestions.</p>
      <pre class="code-block"><code>
Future<void> _runDeadCodeAnalyzer(String sourcePath) async {
  print('═══ Dead Code Analysis ═══');
  print('Running dead_code_analyzer package...\n');

  try {
    // Option 1: Run as subprocess
    final result = await Process.run(
      'dart',
      ['run', 'dead_code_analyzer', sourcePath],
    );
    print(result.stdout);
    
    // Option 2: Import directly (if it's a library)
    // import 'package:dead_code_analyzer/dead_code_analyzer.dart';
    // final analyzer = DeadCodeAnalyzer(sourcePath);
    // final results = await analyzer.analyze();
    // print(results.format());
    
  } catch (e) {
    print('⚠️  dead_code_analyzer not found. Install it with:');
    print('   dart pub add dead_code_analyzer\n');
  }
}
      </code></pre>
    </section>

    <section class="bg-white p-6 rounded-lg shadow-lg mb-8">
      <h2 class="section-title">Recommended Implementation Order</h2>
      <ul class="list-disc pl-6 mb-4">
        <li><strong>Week 15-16:</strong> Implement basic bundle analysis (read build/ directory)</li>
        <li><strong>Week 17:</strong> Add widget detection using Phase 1 parser</li>
        <li><strong>Week 18:</strong> Add reactivity analysis</li>
        <li><strong>Week 19+:</strong> Integrate dead_code_analyzer package</li>
      </ul>
    </section>

    <footer class="text-center text-gray-600 mt-12">
      <p>Flutter.js Analyze Command Documentation | Generated on October 04, 2025</p>
    </footer>
  </div>
</body>
</html>