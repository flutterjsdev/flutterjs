import{VNode as r}from"./vnode.js";import{StyleConverter as c}from"./style_converter.js";class h{static build(t,s={}){if(!t)return null;if(t&&typeof t=="object"&&t.tag||typeof t=="string")return t;if(typeof t=="number")return String(t);switch(this.getWidgetType(t)){case"Text":return this.buildText(t,s);case"RichText":return this.buildRichText(t,s);case"Container":return this.buildContainer(t,s);case"Column":return this.buildColumn(t,s);case"Row":return this.buildRow(t,s);case"Stack":return this.buildStack(t,s);case"Center":return this.buildCenter(t,s);case"Align":return this.buildAlign(t,s);case"Padding":return this.buildPadding(t,s);case"SizedBox":return this.buildSizedBox(t,s);case"Expanded":return this.buildExpanded(t,s);case"Flexible":return this.buildFlexible(t,s);case"Scaffold":return this.buildScaffold(t,s);case"AppBar":return this.buildAppBar(t,s);case"FloatingActionButton":return this.buildFloatingActionButton(t,s);case"Drawer":return this.buildDrawer(t,s);case"ElevatedButton":case"TextButton":case"OutlinedButton":case"IconButton":return this.buildButton(t,s);case"TextField":return this.buildTextField(t,s);case"Checkbox":return this.buildCheckbox(t,s);case"Radio":return this.buildRadio(t,s);case"Switch":return this.buildSwitch(t,s);case"ListView":return this.buildListView(t,s);case"GridView":return this.buildGridView(t,s);case"ListTile":return this.buildListTile(t,s);case"Card":return this.buildCard(t,s);case"Divider":return this.buildDivider(t,s);case"Icon":return this.buildIcon(t,s);case"Image":return this.buildImage(t,s);case"CircleAvatar":return this.buildCircleAvatar(t,s);case"MaterialApp":return this.buildMaterialApp(t,s);case"Navigator":return this.buildNavigator(t,s);default:return this.buildGeneric(t,s)}}static getWidgetType(t){return t?t.constructor&&t.constructor.name?t.constructor.name:t.runtimeType?t.runtimeType:t.widget&&t.widget.constructor?t.widget.constructor.name:"Unknown":"Unknown"}static buildChildren(t,s){return t?(Array.isArray(t)||(t=[t]),t.map(n=>this.build(n,s)).filter(n=>n!=null)):[]}static extractCommonProps(t){const s={};return t.key&&(s.key=t.key),t._debugLabel&&(s["data-debug-label"]=t._debugLabel),s}static buildText(t,s){const n=t.style||{},e=t.data||"";return new r({tag:"span",props:{className:"fjs-text",...this.extractCommonProps(t)},style:c.textStyleToCss(n),children:[String(e)],metadata:{widgetType:"Text",flutterProps:{data:e,style:n}}})}static buildRichText(t,s){return new r({tag:"span",props:{className:"fjs-rich-text"},children:[t.text||""],metadata:{widgetType:"RichText"}})}static buildContainer(t,s){const n=t.child?this.build(t.child,s):null,e=t.decoration||{},i=t.padding,o=t.margin,a=t.color,l=t.width,d=t.height,u=t.alignment,p={...c.decorationToCss(e),...c.paddingToCss(i),...c.marginToCss(o),...c.alignmentToCss(u)};return a&&(p.backgroundColor=c.colorToCss(a)),l!==void 0&&(p.width=typeof l=="number"?`${l}px`:l),d!==void 0&&(p.height=typeof d=="number"?`${d}px`:d),new r({tag:"div",props:{className:"fjs-container",...this.extractCommonProps(t)},style:p,children:n?[n]:[],metadata:{widgetType:"Container",flutterProps:{decoration:e,padding:i,margin:o,color:a,width:l,height:d}}})}static buildColumn(t,s){const n=this.buildChildren(t.children,s),e=t.mainAxisAlignment||"start",i=t.crossAxisAlignment||"center",o=t.mainAxisSize||"max",a={display:"flex",flexDirection:"column",justifyContent:c.mainAxisAlignmentToCss(e),alignItems:c.crossAxisAlignmentToCss(i,"column")};return o==="min"&&(a.height="auto"),new r({tag:"div",props:{className:"fjs-column",...this.extractCommonProps(t)},style:a,children:n,metadata:{widgetType:"Column",flutterProps:{mainAxisAlignment:e,crossAxisAlignment:i,mainAxisSize:o}}})}static buildRow(t,s){const n=this.buildChildren(t.children,s),e=t.mainAxisAlignment||"start",i=t.crossAxisAlignment||"center",o=t.mainAxisSize||"max",a={display:"flex",flexDirection:"row",justifyContent:c.mainAxisAlignmentToCss(e),alignItems:c.crossAxisAlignmentToCss(i,"row")};return o==="min"&&(a.width="auto"),new r({tag:"div",props:{className:"fjs-row",...this.extractCommonProps(t)},style:a,children:n,metadata:{widgetType:"Row",flutterProps:{mainAxisAlignment:e,crossAxisAlignment:i,mainAxisSize:o}}})}static buildStack(t,s){const n=this.buildChildren(t.children,s),e=t.alignment||"topLeft";return new r({tag:"div",props:{className:"fjs-stack",...this.extractCommonProps(t)},style:{position:"relative",...c.alignmentToCss(e)},children:n.map(i=>new r({tag:"div",style:{position:"absolute"},children:[i]})),metadata:{widgetType:"Stack"}})}static buildCenter(t,s){const n=t.child?this.build(t.child,s):null;return new r({tag:"div",props:{className:"fjs-center",...this.extractCommonProps(t)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:n?[n]:[],metadata:{widgetType:"Center"}})}static buildAlign(t,s){const n=t.child?this.build(t.child,s):null,e=t.alignment||"center";return new r({tag:"div",props:{className:"fjs-align",...this.extractCommonProps(t)},style:{display:"flex",...c.alignmentToCss(e)},children:n?[n]:[],metadata:{widgetType:"Align",flutterProps:{alignment:e}}})}static buildPadding(t,s){const n=t.child?this.build(t.child,s):null,e=t.padding;return new r({tag:"div",props:{className:"fjs-padding",...this.extractCommonProps(t)},style:c.paddingToCss(e),children:n?[n]:[],metadata:{widgetType:"Padding",flutterProps:{padding:e}}})}static buildSizedBox(t,s){const n=t.child?this.build(t.child,s):null,e=t.width,i=t.height,o={};return e!==void 0&&(o.width=typeof e=="number"?`${e}px`:e),i!==void 0&&(o.height=typeof i=="number"?`${i}px`:i),new r({tag:"div",props:{className:"fjs-sized-box",...this.extractCommonProps(t)},style:o,children:n?[n]:[],metadata:{widgetType:"SizedBox",flutterProps:{width:e,height:i}}})}static buildExpanded(t,s){const n=t.child?this.build(t.child,s):null,e=t.flex||1;return new r({tag:"div",props:{className:"fjs-expanded",...this.extractCommonProps(t)},style:{flex:String(e)},children:n?[n]:[],metadata:{widgetType:"Expanded",flutterProps:{flex:e}}})}static buildFlexible(t,s){const n=t.child?this.build(t.child,s):null,e=t.flex||1,i=t.fit||"loose",o={flex:i==="tight"?String(e):"0 1 auto"};return new r({tag:"div",props:{className:"fjs-flexible",...this.extractCommonProps(t)},style:o,children:n?[n]:[],metadata:{widgetType:"Flexible",flutterProps:{flex:e,fit:i}}})}static buildScaffold(t,s){const n=t.appBar?this.build(t.appBar,s):null,e=t.body?this.build(t.body,s):null,i=t.floatingActionButton?this.build(t.floatingActionButton,s):null,o=t.drawer?this.build(t.drawer,s):null,a=t.backgroundColor,l=[];n&&l.push(n),e&&l.push(new r({tag:"main",props:{className:"fjs-scaffold-body"},style:{flex:"1"},children:[e]})),i&&l.push(i),o&&l.push(o);const d={minHeight:"100vh",display:"flex",flexDirection:"column"};return a&&(d.backgroundColor=c.colorToCss(a)),new r({tag:"div",props:{className:"fjs-scaffold",...this.extractCommonProps(t)},style:d,children:l,metadata:{widgetType:"Scaffold"}})}static buildAppBar(t,s){const n=t.title?this.build(t.title,s):null,e=t.leading?this.build(t.leading,s):null,i=t.actions?this.buildChildren(t.actions,s):[],o=t.backgroundColor,a={display:"flex",alignItems:"center",padding:"16px",minHeight:"56px",gap:"16px"};o?a.backgroundColor=c.colorToCss(o):(a.backgroundColor="var(--md-sys-color-primary, #6750a4)",a.color="var(--md-sys-color-on-primary, #ffffff)");const l=[];return e&&l.push(e),n&&l.push(new r({tag:"div",props:{className:"fjs-app-bar-title"},style:{flex:"1"},children:[n]})),i.length>0&&l.push(new r({tag:"div",props:{className:"fjs-app-bar-actions"},style:{display:"flex",gap:"8px"},children:i})),new r({tag:"header",props:{className:"fjs-app-bar",...this.extractCommonProps(t)},style:a,children:l,metadata:{widgetType:"AppBar"}})}static buildFloatingActionButton(t,s){const n=t.child?this.build(t.child,s):null,e=t.onPressed,i=t.backgroundColor,o={position:"fixed",bottom:"16px",right:"16px",width:"56px",height:"56px",borderRadius:"50%",border:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:e?"pointer":"default",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"};i?o.backgroundColor=c.colorToCss(i):(o.backgroundColor="var(--md-sys-color-primary, #6750a4)",o.color="var(--md-sys-color-on-primary, #ffffff)");const a={};return e&&typeof e=="function"&&(a.click=e),new r({tag:"button",props:{className:"fjs-fab",disabled:!e,...this.extractCommonProps(t)},style:o,children:n?[n]:[],events:a,metadata:{widgetType:"FloatingActionButton"}})}static buildDrawer(t,s){const n=t.child?this.build(t.child,s):null;return new r({tag:"aside",props:{className:"fjs-drawer",...this.extractCommonProps(t)},style:{position:"fixed",left:"0",top:"0",bottom:"0",width:"280px",backgroundColor:"#ffffff",boxShadow:"2px 0 8px rgba(0,0,0,0.1)",transform:"translateX(-100%)",transition:"transform 0.3s"},children:n?[n]:[],metadata:{widgetType:"Drawer"}})}static buildButton(t,s){const n=t.child?this.build(t.child,s):null,e=t.onPressed,i=this.getWidgetType(t),o={padding:"12px 24px",border:"none",borderRadius:"4px",cursor:e?"pointer":"default",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"};i==="ElevatedButton"?(o.backgroundColor="var(--md-sys-color-primary, #6750a4)",o.color="var(--md-sys-color-on-primary, #ffffff)",o.boxShadow="0 2px 4px rgba(0,0,0,0.2)"):i==="TextButton"?(o.backgroundColor="transparent",o.color="var(--md-sys-color-primary, #6750a4)"):i==="OutlinedButton"?(o.backgroundColor="transparent",o.color="var(--md-sys-color-primary, #6750a4)",o.border="1px solid var(--md-sys-color-outline, #79747e)"):i==="IconButton"&&(o.padding="8px",o.borderRadius="50%",o.backgroundColor="transparent",o.width="40px",o.height="40px",o.display="flex",o.justifyContent="center",o.alignItems="center");const a={};return e&&typeof e=="function"&&(a.click=e),new r({tag:"button",props:{className:`fjs-${i.toLowerCase().replace(/button$/,"-button")}`,disabled:!e,...this.extractCommonProps(t)},style:o,children:n?[n]:[],events:a,metadata:{widgetType:i}})}static buildTextField(t,s){const n=t.controller,e=t.decoration||{},i=t.onChanged,o=t.onSubmitted,a=t.obscureText||!1,l={padding:"12px 16px",border:"1px solid var(--md-sys-color-outline, #ccc)",borderRadius:"4px",fontSize:"16px",width:"100%",boxSizing:"border-box"},d={className:"fjs-text-field",type:a?"password":"text",placeholder:e.hintText||"",...this.extractCommonProps(t)};n&&n.text!==void 0&&(d.value=n.text);const u={};return i&&typeof i=="function"&&(u.input=p=>i(p.target.value)),o&&typeof o=="function"&&(u.keypress=p=>{p.key==="Enter"&&o(p.target.value)}),new r({tag:"input",props:d,style:l,events:u,metadata:{widgetType:"TextField",flutterProps:{decoration:e,obscureText:a}}})}static buildCheckbox(t,s){const n=t.value||!1,e=t.onChanged,i={};return e&&typeof e=="function"&&(i.change=o=>e(o.target.checked)),new r({tag:"input",props:{type:"checkbox",checked:n,className:"fjs-checkbox",...this.extractCommonProps(t)},style:{width:"20px",height:"20px",cursor:e?"pointer":"default"},events:i,metadata:{widgetType:"Checkbox",flutterProps:{value:n}}})}static buildRadio(t,s){const n=t.value,e=t.groupValue,i=t.onChanged,o=n===e,a={};return i&&typeof i=="function"&&(a.change=()=>i(n)),new r({tag:"input",props:{type:"radio",checked:o,className:"fjs-radio",...this.extractCommonProps(t)},style:{width:"20px",height:"20px",cursor:i?"pointer":"default"},events:a,metadata:{widgetType:"Radio",flutterProps:{value:n,groupValue:e}}})}static buildSwitch(t,s){const n=t.value||!1,e=t.onChanged,i={};return e&&typeof e=="function"&&(i.change=o=>e(o.target.checked)),new r({tag:"label",props:{className:"fjs-switch"},style:{display:"inline-block",width:"52px",height:"32px",position:"relative"},children:[new r({tag:"input",props:{type:"checkbox",checked:n,style:"display: none;"},events:i}),new r({tag:"span",props:{className:"fjs-switch-slider"},style:{position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:n?"#6750a4":"#ccc",borderRadius:"32px",transition:"0.4s"}})],metadata:{widgetType:"Switch"}})}static buildListView(t,s){const n=this.buildChildren(t.children,s);return new r({tag:"div",props:{className:"fjs-list-view",...this.extractCommonProps(t)},style:{overflowY:"auto",display:"flex",flexDirection:"column"},children:n,metadata:{widgetType:"ListView"}})}static buildGridView(t,s){const n=this.buildChildren(t.children,s),e=t.crossAxisCount||2;return new r({tag:"div",props:{className:"fjs-grid-view",...this.extractCommonProps(t)},style:{display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,gap:"16px"},children:n,metadata:{widgetType:"GridView",flutterProps:{crossAxisCount:e}}})}static buildListTile(t,s){const n=t.leading?this.build(t.leading,s):null,e=t.title?this.build(t.title,s):null,i=t.subtitle?this.build(t.subtitle,s):null,o=t.trailing?this.build(t.trailing,s):null,a=t.onTap,l=[];n&&l.push(new r({tag:"div",props:{className:"fjs-list-tile-leading"},children:[n]}));const d=[];e&&d.push(e),i&&d.push(i),d.length>0&&l.push(new r({tag:"div",props:{className:"fjs-list-tile-content"},style:{flex:"1"},children:d})),o&&l.push(new r({tag:"div",props:{className:"fjs-list-tile-trailing"},children:[o]}));const u={};return a&&typeof a=="function"&&(u.click=a),new r({tag:"div",props:{className:"fjs-list-tile",...this.extractCommonProps(t)},style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",cursor:a?"pointer":"default"},children:l,events:u,metadata:{widgetType:"ListTile"}})}static buildCard(t,s){const n=t.child?this.build(t.child,s):null,e=t.elevation||1,i=t.color,o={borderRadius:"12px",overflow:"hidden",boxShadow:`0 ${e*2}px ${e*4}px rgba(0,0,0,0.${Math.min(e*2,3)})`};return i?o.backgroundColor=c.colorToCss(i):o.backgroundColor="#ffffff",new r({tag:"div",props:{className:"fjs-card",...this.extractCommonProps(t)},style:o,children:n?[n]:[],metadata:{widgetType:"Card",flutterProps:{elevation:e}}})}static buildDivider(t,s){const n=t.height||1,e=t.thickness||1,i=t.color,o={height:`${n}px`,borderTop:`${e}px solid ${i?c.colorToCss(i):"#e0e0e0"}`,margin:"8px 0"};return new r({tag:"hr",props:{className:"fjs-divider",...this.extractCommonProps(t)},style:o,metadata:{widgetType:"Divider"}})}static buildIcon(t,s){const n=t.icon,e=t.size||24,i=t.color,o={width:`${e}px`,height:`${e}px`,display:"inline-block"};return i&&(o.color=c.colorToCss(i)),new r({tag:"span",props:{className:"fjs-icon","data-icon":n,...this.extractCommonProps(t)},style:o,children:["\u2B24"],metadata:{widgetType:"Icon",flutterProps:{icon:n,size:e}}})}static buildImage(t,s){const n=t.image?.src||t.src||"",e=t.width,i=t.height,o=t.fit||"contain",a={};e&&(a.width=typeof e=="number"?`${e}px`:e),i&&(a.height=typeof i=="number"?`${i}px`:i);const l={fill:"fill",contain:"contain",cover:"cover",fitWidth:"scale-down",fitHeight:"scale-down",none:"none",scaleDown:"scale-down"};return a.objectFit=l[o]||"contain",new r({tag:"img",props:{src:n,alt:t.semanticLabel||"",className:"fjs-image",...this.extractCommonProps(t)},style:a,metadata:{widgetType:"Image",flutterProps:{src:n,fit:o}}})}static buildCircleAvatar(t,s){const n=t.child?this.build(t.child,s):null,e=t.radius||20,i=t.backgroundColor,o={width:`${e*2}px`,height:`${e*2}px`,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"};return i?o.backgroundColor=c.colorToCss(i):o.backgroundColor="var(--md-sys-color-primary-container, #eaddff)",new r({tag:"div",props:{className:"fjs-circle-avatar",...this.extractCommonProps(t)},style:o,children:n?[n]:[],metadata:{widgetType:"CircleAvatar",flutterProps:{radius:e}}})}static buildMaterialApp(t,s){const n=t.home?this.build(t.home,s):null,e=t.title||"";return new r({tag:"div",props:{className:"fjs-material-app","data-title":e,...this.extractCommonProps(t)},style:{minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:n?[n]:[],metadata:{widgetType:"MaterialApp",flutterProps:{title:e}}})}static buildNavigator(t,s){const n=this.buildChildren(t.pages||[],s);return new r({tag:"div",props:{className:"fjs-navigator",...this.extractCommonProps(t)},children:n,metadata:{widgetType:"Navigator"}})}static buildGeneric(t,s){let n=[];if(t.child){const i=this.build(t.child,s);i&&(n=[i])}else t.children&&(n=this.buildChildren(t.children,s));const e=this.getWidgetType(t);return new r({tag:"div",props:{className:`fjs-${e.toLowerCase()}`,"data-widget-type":e,...this.extractCommonProps(t)},children:n,metadata:{widgetType:e,note:"Generic widget - no specific builder implemented"}})}}export{h as VNodeBuilder};
//# sourceMappingURL=vnode_builder.js.map
