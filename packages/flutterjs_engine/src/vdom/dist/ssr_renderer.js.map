{
  "version": 3,
  "sources": ["../src/ssr_renderer.js"],
  "sourcesContent": ["/**\r\n * SSRRenderer - Server-Side Rendering\r\n * \r\n * Converts VNode trees to HTML strings for server-side rendering.\r\n * Handles:\r\n * - HTML string generation\r\n * - Attribute serialization\r\n * - Style serialization\r\n * - Proper escaping\r\n * - Self-closing tags\r\n */\r\n\r\nclass SSRRenderer {\r\n  /**\r\n   * Render VNode to HTML string\r\n   * @param {VNode|string|Array} vnode - VNode tree\r\n   * @param {Object} options - Rendering options\r\n   * @returns {string} HTML string\r\n   */\r\n  static render(vnode, options = {}) {\r\n    return this.renderVNode(vnode, options);\r\n  }\r\n\r\n  /**\r\n   * Render single VNode to HTML string\r\n   * @param {VNode|string|Array} vnode - VNode to render\r\n   * @param {Object} options - Rendering options\r\n   * @returns {string} HTML string\r\n   */\r\n  static renderVNode(vnode, options = {}) {\r\n    // Handle null/undefined\r\n    if (vnode === null || vnode === undefined) {\r\n      return '';\r\n    }\r\n\r\n    // Handle arrays (fragments)\r\n    if (Array.isArray(vnode)) {\r\n      return vnode\r\n        .map(child => this.renderVNode(child, options))\r\n        .join('');\r\n    }\r\n\r\n    // Handle text nodes\r\n    if (typeof vnode === 'string' || typeof vnode === 'number') {\r\n      return this.escapeHTML(String(vnode));\r\n    }\r\n\r\n    // Handle boolean (render nothing)\r\n    if (typeof vnode === 'boolean') {\r\n      return '';\r\n    }\r\n\r\n    // Must be a VNode object\r\n    if (!vnode.tag) {\r\n      return '';\r\n    }\r\n\r\n    // Build opening tag\r\n    const attrs = this.serializeAttributes(vnode);\r\n    const openTag = `<${vnode.tag}${attrs ? ' ' + attrs : ''}>`;\r\n\r\n    // Self-closing tags\r\n    if (this.isVoidTag(vnode.tag)) {\r\n      return openTag;\r\n    }\r\n\r\n    // Render children\r\n    const childrenHTML = (vnode.children || [])\r\n      .map(child => this.renderVNode(child, options))\r\n      .join('');\r\n\r\n    // Build closing tag\r\n    const closeTag = `</${vnode.tag}>`;\r\n\r\n    return `${openTag}${childrenHTML}${closeTag}`;\r\n  }\r\n\r\n  /**\r\n   * Serialize attributes to HTML string\r\n   * @private\r\n   */\r\n  static serializeAttributes(vnode) {\r\n    const attrs = [];\r\n\r\n    // Props (HTML attributes)\r\n    if (vnode.props) {\r\n      Object.entries(vnode.props).forEach(([key, value]) => {\r\n        if (value === null || value === undefined || value === false) {\r\n          return;\r\n        }\r\n\r\n        // Special handling for className\r\n        if (key === 'className') {\r\n          attrs.push(`class=\"${this.escapeAttribute(String(value))}\"`);\r\n          return;\r\n        }\r\n\r\n        // Boolean attributes\r\n        if (value === true) {\r\n          attrs.push(key);\r\n          return;\r\n        }\r\n\r\n        // Regular attributes\r\n        attrs.push(`${key}=\"${this.escapeAttribute(String(value))}\"`);\r\n      });\r\n    }\r\n\r\n    // Inline styles\r\n    if (vnode.style && typeof vnode.style === 'object') {\r\n      const styleStr = this.serializeStyles(vnode.style);\r\n      if (styleStr) {\r\n        attrs.push(`style=\"${this.escapeAttribute(styleStr)}\"`);\r\n      }\r\n    }\r\n\r\n    // Data attributes from metadata\r\n    if (vnode.metadata) {\r\n      if (vnode.metadata.widgetType) {\r\n        attrs.push(`data-widget-type=\"${this.escapeAttribute(vnode.metadata.widgetType)}\"`);\r\n      }\r\n    }\r\n\r\n    // Key attribute\r\n    if (vnode.key !== null && vnode.key !== undefined) {\r\n      attrs.push(`data-key=\"${this.escapeAttribute(String(vnode.key))}\"`);\r\n    }\r\n\r\n    return attrs.join(' ');\r\n  }\r\n\r\n  /**\r\n   * Serialize styles to CSS string\r\n   * @private\r\n   */\r\n  static serializeStyles(styles) {\r\n    const styleEntries = Object.entries(styles)\r\n      .filter(([_, value]) => value !== null && value !== undefined)\r\n      .map(([key, value]) => {\r\n        // Convert camelCase to kebab-case\r\n        const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n        return `${cssKey}: ${value}`;\r\n      });\r\n\r\n    return styleEntries.join('; ');\r\n  }\r\n\r\n  /**\r\n   * Check if tag is self-closing (void element)\r\n   * @private\r\n   */\r\n  static isVoidTag(tag) {\r\n    const voidTags = [\r\n      'area', 'base', 'br', 'col', 'embed', 'hr', 'img',\r\n      'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'\r\n    ];\r\n    return voidTags.includes(tag.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * Escape HTML special characters\r\n   * @private\r\n   */\r\n  static escapeHTML(str) {\r\n    const map = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;'\r\n    };\r\n    return String(str).replace(/[&<>\"']/g, c => map[c]);\r\n  }\r\n\r\n  /**\r\n   * Escape HTML attribute value\r\n   * @private\r\n   */\r\n  static escapeAttribute(str) {\r\n    return this.escapeHTML(str);\r\n  }\r\n\r\n  /**\r\n   * Render complete HTML document\r\n   * @param {VNode} vnode - Root VNode\r\n   * @param {Object} options - Document options\r\n   * @returns {string} Complete HTML document\r\n   */\r\n  static renderDocument(vnode, options = {}) {\r\n    const {\r\n      title = 'FlutterJS App',\r\n      meta = {},\r\n      styles = [],\r\n      scripts = [],\r\n      lang = 'en'\r\n    } = options;\r\n\r\n    const bodyHTML = this.renderVNode(vnode);\r\n\r\n    return `<!DOCTYPE html>\r\n<html lang=\"${this.escapeAttribute(lang)}\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>${this.escapeHTML(title)}</title>\r\n  ${this.renderMetaTags(meta)}\r\n  ${this.renderStyleLinks(styles)}\r\n</head>\r\n<body>\r\n  <div id=\"root\">${bodyHTML}</div>\r\n  ${this.renderScriptTags(scripts)}\r\n</body>\r\n</html>`;\r\n  }\r\n\r\n  /**\r\n   * Render meta tags\r\n   * @private\r\n   */\r\n  static renderMetaTags(meta) {\r\n    const tags = [];\r\n\r\n    Object.entries(meta).forEach(([key, value]) => {\r\n      if (key.startsWith('og:')) {\r\n        tags.push(`<meta property=\"${this.escapeAttribute(key)}\" content=\"${this.escapeAttribute(value)}\">`);\r\n      } else {\r\n        tags.push(`<meta name=\"${this.escapeAttribute(key)}\" content=\"${this.escapeAttribute(value)}\">`);\r\n      }\r\n    });\r\n\r\n    return tags.join('\\n  ');\r\n  }\r\n\r\n  /**\r\n   * Render style links\r\n   * @private\r\n   */\r\n  static renderStyleLinks(styles) {\r\n    return styles\r\n      .map(href => `<link rel=\"stylesheet\" href=\"${this.escapeAttribute(href)}\">`)\r\n      .join('\\n  ');\r\n  }\r\n\r\n  /**\r\n   * Render script tags\r\n   * @private\r\n   */\r\n  static renderScriptTags(scripts) {\r\n    return scripts\r\n      .map(src => `<script src=\"${this.escapeAttribute(src)}\" defer></script>`)\r\n      .join('\\n  ');\r\n  }\r\n}\r\n\r\n\r\nexport {SSRRenderer};"],
  "mappings": "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",
  "names": ["SSRRenderer", "vnode", "options", "child", "attrs", "openTag", "childrenHTML", "closeTag", "key", "value", "styleStr", "styles", "_", "tag", "str", "map", "c", "title", "meta", "scripts", "lang", "bodyHTML", "tags", "href", "src"]
}
