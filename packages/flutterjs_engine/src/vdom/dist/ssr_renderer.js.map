{
  "version": 3,
  "sources": ["../src/ssr_renderer.js"],
  "sourcesContent": ["/**\n * SSRRenderer - Server-Side Rendering\n * \n * Converts VNode trees to HTML strings for server-side rendering.\n * Handles:\n * - HTML string generation\n * - Attribute serialization\n * - Style serialization\n * - Proper escaping\n * - Self-closing tags\n */\n\nclass SSRRenderer {\n  /**\n   * Render VNode to HTML string\n   * @param {VNode|string|Array} vnode - VNode tree\n   * @param {Object} options - Rendering options\n   * @returns {string} HTML string\n   */\n  static render(vnode, options = {}) {\n    return this.renderVNode(vnode, options);\n  }\n\n  /**\n   * Render single VNode to HTML string\n   * @param {VNode|string|Array} vnode - VNode to render\n   * @param {Object} options - Rendering options\n   * @returns {string} HTML string\n   */\n  static renderVNode(vnode, options = {}) {\n    // Handle null/undefined\n    if (vnode === null || vnode === undefined) {\n      return '';\n    }\n\n    // Handle arrays (fragments)\n    if (Array.isArray(vnode)) {\n      return vnode\n        .map(child => this.renderVNode(child, options))\n        .join('');\n    }\n\n    // Handle text nodes\n    if (typeof vnode === 'string' || typeof vnode === 'number') {\n      return this.escapeHTML(String(vnode));\n    }\n\n    // Handle boolean (render nothing)\n    if (typeof vnode === 'boolean') {\n      return '';\n    }\n\n    // Must be a VNode object\n    if (!vnode.tag) {\n      return '';\n    }\n\n    // Build opening tag\n    const attrs = this.serializeAttributes(vnode);\n    const openTag = `<${vnode.tag}${attrs ? ' ' + attrs : ''}>`;\n\n    // Self-closing tags\n    if (this.isVoidTag(vnode.tag)) {\n      return openTag;\n    }\n\n    // Render children\n    const childrenHTML = (vnode.children || [])\n      .map(child => this.renderVNode(child, options))\n      .join('');\n\n    // Build closing tag\n    const closeTag = `</${vnode.tag}>`;\n\n    return `${openTag}${childrenHTML}${closeTag}`;\n  }\n\n  /**\n   * Serialize attributes to HTML string\n   * @private\n   */\n  static serializeAttributes(vnode) {\n    const attrs = [];\n\n    // Props (HTML attributes)\n    if (vnode.props) {\n      Object.entries(vnode.props).forEach(([key, value]) => {\n        if (value === null || value === undefined || value === false) {\n          return;\n        }\n\n        // Special handling for className\n        if (key === 'className') {\n          attrs.push(`class=\"${this.escapeAttribute(String(value))}\"`);\n          return;\n        }\n\n        // Boolean attributes\n        if (value === true) {\n          attrs.push(key);\n          return;\n        }\n\n        // Regular attributes\n        attrs.push(`${key}=\"${this.escapeAttribute(String(value))}\"`);\n      });\n    }\n\n    // Inline styles\n    if (vnode.style && typeof vnode.style === 'object') {\n      const styleStr = this.serializeStyles(vnode.style);\n      if (styleStr) {\n        attrs.push(`style=\"${this.escapeAttribute(styleStr)}\"`);\n      }\n    }\n\n    // Data attributes from metadata\n    if (vnode.metadata) {\n      if (vnode.metadata.widgetType) {\n        attrs.push(`data-widget-type=\"${this.escapeAttribute(vnode.metadata.widgetType)}\"`);\n      }\n    }\n\n    // Key attribute\n    if (vnode.key !== null && vnode.key !== undefined) {\n      attrs.push(`data-key=\"${this.escapeAttribute(String(vnode.key))}\"`);\n    }\n\n    return attrs.join(' ');\n  }\n\n  /**\n   * Serialize styles to CSS string\n   * @private\n   */\n  static serializeStyles(styles) {\n    const styleEntries = Object.entries(styles)\n      .filter(([_, value]) => value !== null && value !== undefined)\n      .map(([key, value]) => {\n        // Convert camelCase to kebab-case\n        const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n        return `${cssKey}: ${value}`;\n      });\n\n    return styleEntries.join('; ');\n  }\n\n  /**\n   * Check if tag is self-closing (void element)\n   * @private\n   */\n  static isVoidTag(tag) {\n    const voidTags = [\n      'area', 'base', 'br', 'col', 'embed', 'hr', 'img',\n      'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'\n    ];\n    return voidTags.includes(tag.toLowerCase());\n  }\n\n  /**\n   * Escape HTML special characters\n   * @private\n   */\n  static escapeHTML(str) {\n    const map = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n    return String(str).replace(/[&<>\"']/g, c => map[c]);\n  }\n\n  /**\n   * Escape HTML attribute value\n   * @private\n   */\n  static escapeAttribute(str) {\n    return this.escapeHTML(str);\n  }\n\n  /**\n   * Render complete HTML document\n   * @param {VNode} vnode - Root VNode\n   * @param {Object} options - Document options\n   * @returns {string} Complete HTML document\n   */\n  static renderDocument(vnode, options = {}) {\n    const {\n      title = 'FlutterJS App',\n      meta = {},\n      styles = [],\n      scripts = [],\n      lang = 'en'\n    } = options;\n\n    const bodyHTML = this.renderVNode(vnode);\n\n    return `<!DOCTYPE html>\n<html lang=\"${this.escapeAttribute(lang)}\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${this.escapeHTML(title)}</title>\n  ${this.renderMetaTags(meta)}\n  ${this.renderStyleLinks(styles)}\n</head>\n<body>\n  <div id=\"root\">${bodyHTML}</div>\n  ${this.renderScriptTags(scripts)}\n</body>\n</html>`;\n  }\n\n  /**\n   * Render meta tags\n   * @private\n   */\n  static renderMetaTags(meta) {\n    const tags = [];\n\n    Object.entries(meta).forEach(([key, value]) => {\n      if (key.startsWith('og:')) {\n        tags.push(`<meta property=\"${this.escapeAttribute(key)}\" content=\"${this.escapeAttribute(value)}\">`);\n      } else {\n        tags.push(`<meta name=\"${this.escapeAttribute(key)}\" content=\"${this.escapeAttribute(value)}\">`);\n      }\n    });\n\n    return tags.join('\\n  ');\n  }\n\n  /**\n   * Render style links\n   * @private\n   */\n  static renderStyleLinks(styles) {\n    return styles\n      .map(href => `<link rel=\"stylesheet\" href=\"${this.escapeAttribute(href)}\">`)\n      .join('\\n  ');\n  }\n\n  /**\n   * Render script tags\n   * @private\n   */\n  static renderScriptTags(scripts) {\n    return scripts\n      .map(src => `<script src=\"${this.escapeAttribute(src)}\" defer></script>`)\n      .join('\\n  ');\n  }\n}\n\n\nexport {SSRRenderer};"],
  "mappings": "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",
  "names": ["SSRRenderer", "vnode", "options", "child", "attrs", "openTag", "childrenHTML", "closeTag", "key", "value", "styleStr", "styles", "_", "tag", "str", "map", "c", "title", "meta", "scripts", "lang", "bodyHTML", "tags", "href", "src"]
}
