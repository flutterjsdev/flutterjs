{
  "version": 3,
  "sources": ["../src/patch_applier.js"],
  "sourcesContent": ["/**\n * PatchApplier - Simplified & Robust Version\n * Applies VNode patches to actual DOM\n * \n * Key principles:\n * - Index '0' always means the direct child\n * - Parent is always found from the root\n * - Simple, straightforward logic\n */\n\nexport class PatchApplier {\n  /**\n   * Apply patches to DOM\n   * @param {HTMLElement} rootElement - Element to apply patches to\n   * @param {Patch[]} patches - Array of patches\n   * @param {Object} options - Options\n   * @returns {Object} Result\n   */\n  static apply(rootElement, patches, options = {}) {\n    if (!rootElement || !Array.isArray(patches) || patches.length === 0) {\n      return { success: true, patchesApplied: 0, totalPatches: 0 };\n    }\n\n    let patchesApplied = 0;\n    const errors = [];\n\n    try {\n      // Order patches: REMOVE first (reverse order), then others\n      const orderedPatches = this.orderPatches(patches);\n\n      orderedPatches.forEach((patch) => {\n        try {\n          this.applyPatch(rootElement, patch);\n          patchesApplied++;\n        } catch (error) {\n          errors.push(`Patch ${patch.type} at ${patch.index}: ${error.message}`);\n        }\n      });\n\n      return {\n        success: errors.length === 0,\n        patchesApplied,\n        totalPatches: patches.length,\n        errors: errors.length > 0 ? errors : undefined\n      };\n    } catch (error) {\n      return {\n        success: false,\n        patchesApplied,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Order patches for safe application\n   * REMOVE first (deepest first), then CREATE, REPLACE, then all UPDATES\n   */\n  static orderPatches(patches) {\n    const byType = { REMOVE: [], CREATE: [], REPLACE: [], UPDATE: [] };\n\n    patches.forEach(patch => {\n      if (patch.type === 'REMOVE') {\n        byType.REMOVE.push(patch);\n      } else if (patch.type === 'CREATE') {\n        byType.CREATE.push(patch);\n      } else if (patch.type === 'REPLACE') {\n        byType.REPLACE.push(patch);\n      } else {\n        byType.UPDATE.push(patch);\n      }\n    });\n\n    // Sort REMOVE by depth (deepest first, by counting dots)\n    byType.REMOVE.sort((a, b) => {\n      const depthA = String(a.index || '0').split('.').length;\n      const depthB = String(b.index || '0').split('.').length;\n      return depthB - depthA;\n    });\n\n    return [...byType.REMOVE, ...byType.CREATE, ...byType.REPLACE, ...byType.UPDATE];\n  }\n\n  /**\n   * Apply single patch\n   */\n  static applyPatch(rootElement, patch) {\n    const { type, index } = patch;\n\n    switch (type) {\n      case 'CREATE':\n        return this._create(rootElement, patch);\n      case 'REMOVE':\n        return this._remove(rootElement, patch);\n      case 'REPLACE':\n        return this._replace(rootElement, patch);\n      case 'UPDATE_PROPS':\n        return this._updateProps(rootElement, patch);\n      case 'UPDATE_STYLE':\n        return this._updateStyle(rootElement, patch);\n      case 'UPDATE_TEXT':\n        return this._updateText(rootElement, patch);\n      case 'UPDATE_EVENTS':\n        return this._updateEvents(rootElement, patch);\n      default:\n        throw new Error(`Unknown patch type: ${type}`);\n    }\n  }\n\n  /**\n   * Find element by index path\n   * CRITICAL: Index '0' means FIRST CHILD of rootElement, NOT the root itself\n   * Index '0' = first child (rootElement.childNodes[0])\n   * Index '1' = second child (rootElement.childNodes[1])\n   * Index '0.1' = first child's second child\n   * Index '1.0.2' = second child's first child's third child\n   */\n  static _findElement(rootElement, index) {\n    // No index or null/undefined = root element\n    if (!index) {\n      return rootElement;\n    }\n\n    // Parse index path\n    let current = rootElement;\n    const parts = String(index).split('.').map(p => parseInt(p, 10));\n\n    // Navigate through the parts\n    for (const partIndex of parts) {\n      if (!current || !current.childNodes || partIndex >= current.childNodes.length) {\n        console.warn(`_findElement: Cannot navigate to index ${index}, at part ${partIndex}, current has ${current?.childNodes?.length || 0} children`);\n        return null;\n      }\n      current = current.childNodes[partIndex];\n    }\n\n    return current;\n  }\n\n  /**\n   * Get child index from full index path\n   * '0' -> 0\n   * '0.1' -> 1\n   * '0.1.2' -> 2\n   */\n  static _getChildIndex(index) {\n    const str = String(index || '0');\n    const parts = str.split('.');\n    return parseInt(parts[parts.length - 1], 10);\n  }\n\n  /**\n   * Get parent index from full index path\n   * '0' -> null or '' (parent is the root element itself)\n   * '0.1' -> '0' (parent of first child's second child)\n   * '0.1.2' -> '0.1'\n   */\n  static _getParentIndex(index) {\n    const str = String(index || '0');\n    const parts = str.split('.');\n\n    if (parts.length === 1) {\n      // Direct children of root - parent is rootElement itself (return null/empty)\n      return null;\n    }\n\n    parts.pop();\n    return parts.join('.');\n  }\n\n  /**\n   * CREATE - Add new element\n   */\n  static _create(rootElement, patch) {\n    const { index, newNode } = patch;\n\n    if (!newNode) {\n      throw new Error('CREATE patch requires newNode');\n    }\n\n    // Get parent element\n    const parentIndex = this._getParentIndex(index);\n    let parent;\n\n    if (parentIndex === null || parentIndex === '') {\n      // Parent is the root element itself\n      parent = rootElement;\n    } else {\n      parent = this._findElement(rootElement, parentIndex);\n    }\n\n    if (!parent) {\n      throw new Error(`Parent element not found at index ${parentIndex}`);\n    }\n\n    // Create the new DOM element\n    const newElement = this._createDOMNode(newNode);\n    if (!newElement) {\n      throw new Error('Failed to create DOM node');\n    }\n\n    // Get insertion position\n    const childIndex = this._getChildIndex(index);\n\n    // Insert at correct position\n    if (childIndex >= parent.childNodes.length) {\n      parent.appendChild(newElement);\n    } else {\n      parent.insertBefore(newElement, parent.childNodes[childIndex]);\n    }\n\n    return newElement;\n  }\n\n  /**\n   * REMOVE - Delete element\n   */\n  static _remove(rootElement, patch) {\n    const { index } = patch;\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      throw new Error(`Element not found at index ${index}`);\n    }\n\n    // Cleanup before removal\n    this._cleanup(element);\n\n    // Remove from DOM\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  /**\n   * REPLACE - Replace element entirely\n   */\n  static _replace(rootElement, patch) {\n    const { index, newNode } = patch;\n\n    if (!newNode) {\n      throw new Error('REPLACE patch requires newNode');\n    }\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      throw new Error(`Element not found at index ${index}`);\n    }\n\n    // Root cannot be replaced\n    if (element === rootElement) {\n      throw new Error('Cannot replace root element (no parent)');\n    }\n\n    // Create new element\n    const newElement = this._createDOMNode(newNode);\n    if (!newElement) {\n      throw new Error('Failed to create replacement DOM node');\n    }\n\n    // Cleanup old element\n    this._cleanup(element);\n\n    // Replace in DOM\n    if (element.parentNode) {\n      element.parentNode.replaceChild(newElement, element);\n      return newElement;\n    } else {\n      throw new Error('Element has no parent node');\n    }\n  }\n\n  /**\n   * UPDATE_PROPS - Update HTML attributes\n   */\n  static _updateProps(rootElement, patch) {\n    const { index, value } = patch;\n\n    if (!value || !value.changes) {\n      return;\n    }\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      console.warn(`_updateProps: Element not found at index ${index}`);\n      return;\n    }\n\n    const { changes } = value;\n\n    // Remove properties\n    if (changes.removed) {\n      Object.keys(changes.removed).forEach(key => {\n        this._removeProp(element, key);\n      });\n    }\n\n    // Update properties\n    if (changes.updated) {\n      Object.entries(changes.updated).forEach(([key, val]) => {\n        this._setProp(element, key, val);\n      });\n    }\n\n    // Add properties\n    if (changes.added) {\n      Object.entries(changes.added).forEach(([key, val]) => {\n        this._setProp(element, key, val);\n      });\n    }\n  }\n\n  /**\n   * UPDATE_STYLE - Update CSS styles\n   */\n  static _updateStyle(rootElement, patch) {\n    const { index, value } = patch;\n\n    if (!value || !value.changes) {\n      return;\n    }\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      console.warn(`_updateStyle: Element not found at index ${index}`);\n      return;\n    }\n\n    const { changes } = value;\n\n    // Remove styles\n    if (changes.removed) {\n      Object.keys(changes.removed).forEach(key => {\n        element.style[key] = '';\n      });\n    }\n\n    // Update styles\n    if (changes.updated) {\n      Object.entries(changes.updated).forEach(([key, val]) => {\n        try {\n          element.style[key] = val;\n        } catch (e) {\n          console.warn(`Failed to set style ${key}`);\n        }\n      });\n    }\n\n    // Add styles\n    if (changes.added) {\n      Object.entries(changes.added).forEach(([key, val]) => {\n        try {\n          element.style[key] = val;\n        } catch (e) {\n          console.warn(`Failed to set style ${key}`);\n        }\n      });\n    }\n  }\n\n  /**\n   * UPDATE_TEXT - Update text content\n   */\n  static _updateText(rootElement, patch) {\n    const { index, value } = patch;\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      console.warn(`_updateText: Element not found at index ${index}`);\n      return;\n    }\n\n    // Handle text nodes\n    if (element.nodeType === 3) { // TEXT_NODE\n      element.nodeValue = String(value !== undefined ? value : '');\n    } else {\n      element.textContent = String(value !== undefined ? value : '');\n    }\n  }\n\n  /**\n   * UPDATE_EVENTS - Update event listeners\n   */\n  static _updateEvents(rootElement, patch) {\n    const { index, value } = patch;\n\n    if (!value || !value.changes) {\n      return;\n    }\n\n    const element = this._findElement(rootElement, index);\n    if (!element) {\n      console.warn(`_updateEvents: Element not found at index ${index}`);\n      return;\n    }\n\n    const { changes } = value;\n\n    // Remove events\n    if (changes.removed) {\n      Object.keys(changes.removed).forEach(eventName => {\n        this._removeEventListener(element, eventName);\n      });\n    }\n\n    // Update events\n    if (changes.updated) {\n      Object.entries(changes.updated).forEach(([eventName, handler]) => {\n        this._removeEventListener(element, eventName);\n        if (handler) {\n          this._addEventListener(element, eventName, handler);\n        }\n      });\n    }\n\n    // Add events\n    if (changes.added) {\n      Object.entries(changes.added).forEach(([eventName, handler]) => {\n        if (handler) {\n          this._addEventListener(element, eventName, handler);\n        }\n      });\n    }\n  }\n\n  /**\n   * Create a DOM node from VNode\n   */\n  static _createDOMNode(vnode) {\n    // Text node\n    if (typeof vnode === 'string') {\n      return document.createTextNode(vnode);\n    }\n\n    if (!vnode || typeof vnode !== 'object') {\n      return document.createTextNode('');\n    }\n\n    // Element node\n    const tag = vnode.tag || 'div';\n    const element = document.createElement(tag);\n\n    // \u2705 CRITICAL: Link VNode to Element\n    vnode._element = element;\n    element._vnode = vnode;\n\n    // Apply properties\n    if (vnode.props && typeof vnode.props === 'object') {\n      Object.entries(vnode.props).forEach(([key, val]) => {\n        this._setProp(element, key, val);\n      });\n    }\n\n    // Apply styles\n    if (vnode.style && typeof vnode.style === 'object') {\n      Object.entries(vnode.style).forEach(([key, val]) => {\n        try {\n          element.style[key] = val;\n        } catch (e) {\n          // Ignore style errors\n        }\n      });\n    }\n\n    // Add children\n    if (vnode.children && Array.isArray(vnode.children)) {\n      vnode.children.forEach(child => {\n        const childNode = this._createDOMNode(child);\n        if (childNode) {\n          element.appendChild(childNode);\n        }\n      });\n    }\n\n    // Attach event handlers\n    if (vnode.events && typeof vnode.events === 'object') {\n      Object.entries(vnode.events).forEach(([eventName, handler]) => {\n        if (typeof handler === 'function') {\n          this._addEventListener(element, eventName, handler);\n        }\n      });\n    }\n\n    return element;\n  }\n\n  /**\n   * Set a property on element\n   */\n  static _setProp(element, key, value) {\n    if (value === null || value === undefined) {\n      this._removeProp(element, key);\n      return;\n    }\n\n    // className\n    if (key === 'className') {\n      element.className = String(value);\n      return;\n    }\n\n    // value (for inputs, textareas)\n    if (key === 'value') {\n      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {\n        element.value = String(value);\n      }\n      return;\n    }\n\n    // checked, disabled, selected (booleans)\n    if (key === 'checked' || key === 'disabled' || key === 'selected') {\n      element[key] = !!value;\n      return;\n    }\n\n    // data-* and aria-* attributes\n    if (key.startsWith('data-') || key.startsWith('aria-')) {\n      element.setAttribute(key, String(value));\n      return;\n    }\n\n    // Try to set as property first\n    try {\n      if (key in element) {\n        element[key] = value;\n      } else {\n        element.setAttribute(key, String(value));\n      }\n    } catch (e) {\n      try {\n        element.setAttribute(key, String(value));\n      } catch (e2) {\n        // Fail silently\n      }\n    }\n  }\n\n  /**\n   * Remove a property from element\n   */\n  static _removeProp(element, key) {\n    if (key === 'className') {\n      element.className = '';\n      return;\n    }\n\n    if (key === 'value') {\n      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {\n        element.value = '';\n      }\n      return;\n    }\n\n    if (key === 'checked' || key === 'disabled' || key === 'selected') {\n      element[key] = false;\n      return;\n    }\n\n    try {\n      element.removeAttribute(key);\n    } catch (e) {\n      // Fail silently\n    }\n  }\n\n  /**\n   * Add event listener to element\n   */\n  static _addEventListener(element, eventName, handler) {\n    if (typeof handler !== 'function') {\n      return;\n    }\n\n    try {\n      // Normalize event name: onClick -> click, onMouseover -> mouseover\n      const normalizedName = eventName\n        .replace(/^on/, '')\n        .toLowerCase();\n\n      // Store reference for later removal\n      if (!element._eventListeners) {\n        element._eventListeners = {};\n      }\n\n      element.addEventListener(normalizedName, handler);\n      element._eventListeners[normalizedName] = handler;\n    } catch (e) {\n      console.warn(`Failed to add event listener ${eventName}`);\n    }\n  }\n\n  /**\n   * Remove event listener from element\n   */\n  static _removeEventListener(element, eventName) {\n    try {\n      const normalizedName = eventName\n        .replace(/^on/, '')\n        .toLowerCase();\n\n      if (element._eventListeners && element._eventListeners[normalizedName]) {\n        element.removeEventListener(normalizedName, element._eventListeners[normalizedName]);\n        delete element._eventListeners[normalizedName];\n      }\n    } catch (e) {\n      console.warn(`Failed to remove event listener ${eventName}`);\n    }\n  }\n\n  /**\n   * Cleanup element before removal\n   */\n  static _cleanup(element) {\n    if (!element) return;\n\n    // Remove all event listeners\n    if (element._eventListeners) {\n      Object.entries(element._eventListeners).forEach(([name, handler]) => {\n        try {\n          element.removeEventListener(name, handler);\n        } catch (e) {\n          // Fail silently\n        }\n      });\n      element._eventListeners = {};\n    }\n\n    // Recursively cleanup children\n    if (element.childNodes) {\n      for (let i = 0; i < element.childNodes.length; i++) {\n        this._cleanup(element.childNodes[i]);\n      }\n    }\n  }\n\n  /**\n   * Validate patches\n   */\n  static validate(patches) {\n    const errors = [];\n    const validTypes = ['CREATE', 'REMOVE', 'REPLACE', 'UPDATE_PROPS', 'UPDATE_STYLE', 'UPDATE_TEXT', 'UPDATE_EVENTS'];\n\n    if (!Array.isArray(patches)) {\n      errors.push('Patches must be an array');\n      return errors;\n    }\n\n    patches.forEach((patch, i) => {\n      if (!patch.type) {\n        errors.push(`Patch ${i}: Missing type`);\n        return;\n      }\n\n      if (!validTypes.includes(patch.type)) {\n        errors.push(`Patch ${i}: Invalid type \"${patch.type}\"`);\n      }\n    });\n\n    return errors;\n  }\n\n  /**\n   * Get statistics about patches\n   */\n  static getStats(patches) {\n    const stats = { total: patches.length, byType: {} };\n\n    patches.forEach(p => {\n      stats.byType[p.type] = (stats.byType[p.type] || 0) + 1;\n    });\n\n    return stats;\n  }\n}"],
  "mappings": "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",
  "names": ["PatchApplier", "rootElement", "patches", "options", "patchesApplied", "errors", "patch", "error", "byType", "a", "b", "depthA", "type", "index", "current", "parts", "p", "partIndex", "newNode", "parentIndex", "parent", "newElement", "childIndex", "element", "value", "changes", "key", "val", "eventName", "handler", "vnode", "tag", "child", "childNode", "normalizedName", "name", "i", "validTypes", "stats"]
}
