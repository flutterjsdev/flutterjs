{
  "version": 3,
  "sources": ["../src/patch_applier.js"],
  "sourcesContent": ["/**\r\n * PatchApplier - Simplified & Robust Version\r\n * Applies VNode patches to actual DOM\r\n * \r\n * Key principles:\r\n * - Index '0' always means the direct child\r\n * - Parent is always found from the root\r\n * - Simple, straightforward logic\r\n */\r\n\r\nexport class PatchApplier {\r\n  /**\r\n   * Apply patches to DOM\r\n   * @param {HTMLElement} rootElement - Element to apply patches to\r\n   * @param {Patch[]} patches - Array of patches\r\n   * @param {Object} options - Options\r\n   * @returns {Object} Result\r\n   */\r\n  static apply(rootElement, patches, options = {}) {\r\n    if (!rootElement || !Array.isArray(patches) || patches.length === 0) {\r\n      return { success: true, patchesApplied: 0, totalPatches: 0 };\r\n    }\r\n\r\n    let patchesApplied = 0;\r\n    const errors = [];\r\n\r\n    try {\r\n      // Order patches: REMOVE first (reverse order), then others\r\n      const orderedPatches = this.orderPatches(patches);\r\n\r\n      orderedPatches.forEach((patch) => {\r\n        try {\r\n          this.applyPatch(rootElement, patch);\r\n          patchesApplied++;\r\n        } catch (error) {\r\n          errors.push(`Patch ${patch.type} at ${patch.index}: ${error.message}`);\r\n        }\r\n      });\r\n\r\n      return {\r\n        success: errors.length === 0,\r\n        patchesApplied,\r\n        totalPatches: patches.length,\r\n        errors: errors.length > 0 ? errors : undefined\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        patchesApplied,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Order patches for safe application\r\n   * REMOVE first (deepest first), then CREATE, REPLACE, then all UPDATES\r\n   */\r\n  static orderPatches(patches) {\r\n    const byType = { REMOVE: [], CREATE: [], REPLACE: [], UPDATE: [] };\r\n\r\n    patches.forEach(patch => {\r\n      if (patch.type === 'REMOVE') {\r\n        byType.REMOVE.push(patch);\r\n      } else if (patch.type === 'CREATE') {\r\n        byType.CREATE.push(patch);\r\n      } else if (patch.type === 'REPLACE') {\r\n        byType.REPLACE.push(patch);\r\n      } else {\r\n        byType.UPDATE.push(patch);\r\n      }\r\n    });\r\n\r\n    // Sort REMOVE by depth (deepest first, by counting dots)\r\n    byType.REMOVE.sort((a, b) => {\r\n      const depthA = String(a.index || '0').split('.').length;\r\n      const depthB = String(b.index || '0').split('.').length;\r\n      return depthB - depthA;\r\n    });\r\n\r\n    return [...byType.REMOVE, ...byType.CREATE, ...byType.REPLACE, ...byType.UPDATE];\r\n  }\r\n\r\n  /**\r\n   * Apply single patch\r\n   */\r\n  static applyPatch(rootElement, patch) {\r\n    const { type, index } = patch;\r\n\r\n    switch (type) {\r\n      case 'CREATE':\r\n        return this._create(rootElement, patch);\r\n      case 'REMOVE':\r\n        return this._remove(rootElement, patch);\r\n      case 'REPLACE':\r\n        return this._replace(rootElement, patch);\r\n      case 'UPDATE_PROPS':\r\n        return this._updateProps(rootElement, patch);\r\n      case 'UPDATE_STYLE':\r\n        return this._updateStyle(rootElement, patch);\r\n      case 'UPDATE_TEXT':\r\n        return this._updateText(rootElement, patch);\r\n      case 'UPDATE_EVENTS':\r\n        return this._updateEvents(rootElement, patch);\r\n      default:\r\n        throw new Error(`Unknown patch type: ${type}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Find element by index path\r\n   * CRITICAL: Index '0' means FIRST CHILD of rootElement, NOT the root itself\r\n   * Index '0' = first child (rootElement.childNodes[0])\r\n   * Index '1' = second child (rootElement.childNodes[1])\r\n   * Index '0.1' = first child's second child\r\n   * Index '1.0.2' = second child's first child's third child\r\n   */\r\n  static _findElement(rootElement, index) {\r\n    // No index or null/undefined = root element\r\n    if (!index) {\r\n      return rootElement;\r\n    }\r\n\r\n    // Parse index path\r\n    let current = rootElement;\r\n    const parts = String(index).split('.').map(p => parseInt(p, 10));\r\n\r\n    // Navigate through the parts\r\n    for (const partIndex of parts) {\r\n      if (!current || !current.childNodes || partIndex >= current.childNodes.length) {\r\n        console.warn(`_findElement: Cannot navigate to index ${index}, at part ${partIndex}, current has ${current?.childNodes?.length || 0} children`);\r\n        return null;\r\n      }\r\n      current = current.childNodes[partIndex];\r\n    }\r\n\r\n    return current;\r\n  }\r\n\r\n  /**\r\n   * Get child index from full index path\r\n   * '0' -> 0\r\n   * '0.1' -> 1\r\n   * '0.1.2' -> 2\r\n   */\r\n  static _getChildIndex(index) {\r\n    const str = String(index || '0');\r\n    const parts = str.split('.');\r\n    return parseInt(parts[parts.length - 1], 10);\r\n  }\r\n\r\n  /**\r\n   * Get parent index from full index path\r\n   * '0' -> null or '' (parent is the root element itself)\r\n   * '0.1' -> '0' (parent of first child's second child)\r\n   * '0.1.2' -> '0.1'\r\n   */\r\n  static _getParentIndex(index) {\r\n    const str = String(index || '0');\r\n    const parts = str.split('.');\r\n\r\n    if (parts.length === 1) {\r\n      // Direct children of root - parent is rootElement itself (return null/empty)\r\n      return null;\r\n    }\r\n\r\n    parts.pop();\r\n    return parts.join('.');\r\n  }\r\n\r\n  /**\r\n   * CREATE - Add new element\r\n   */\r\n  static _create(rootElement, patch) {\r\n    const { index, newNode } = patch;\r\n\r\n    if (!newNode) {\r\n      throw new Error('CREATE patch requires newNode');\r\n    }\r\n\r\n    // Get parent element\r\n    const parentIndex = this._getParentIndex(index);\r\n    let parent;\r\n\r\n    if (parentIndex === null || parentIndex === '') {\r\n      // Parent is the root element itself\r\n      parent = rootElement;\r\n    } else {\r\n      parent = this._findElement(rootElement, parentIndex);\r\n    }\r\n\r\n    if (!parent) {\r\n      throw new Error(`Parent element not found at index ${parentIndex}`);\r\n    }\r\n\r\n    // Create the new DOM element\r\n    const newElement = this._createDOMNode(newNode);\r\n    if (!newElement) {\r\n      throw new Error('Failed to create DOM node');\r\n    }\r\n\r\n    // Get insertion position\r\n    const childIndex = this._getChildIndex(index);\r\n\r\n    // Insert at correct position\r\n    if (childIndex >= parent.childNodes.length) {\r\n      parent.appendChild(newElement);\r\n    } else {\r\n      parent.insertBefore(newElement, parent.childNodes[childIndex]);\r\n    }\r\n\r\n    return newElement;\r\n  }\r\n\r\n  /**\r\n   * REMOVE - Delete element\r\n   */\r\n  static _remove(rootElement, patch) {\r\n    const { index } = patch;\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      throw new Error(`Element not found at index ${index}`);\r\n    }\r\n\r\n    // Cleanup before removal\r\n    this._cleanup(element);\r\n\r\n    // Remove from DOM\r\n    if (element.parentNode) {\r\n      element.parentNode.removeChild(element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * REPLACE - Replace element entirely\r\n   */\r\n  static _replace(rootElement, patch) {\r\n    const { index, newNode } = patch;\r\n\r\n    if (!newNode) {\r\n      throw new Error('REPLACE patch requires newNode');\r\n    }\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      throw new Error(`Element not found at index ${index}`);\r\n    }\r\n\r\n    // Root cannot be replaced\r\n    if (element === rootElement) {\r\n      throw new Error('Cannot replace root element (no parent)');\r\n    }\r\n\r\n    // Create new element\r\n    const newElement = this._createDOMNode(newNode);\r\n    if (!newElement) {\r\n      throw new Error('Failed to create replacement DOM node');\r\n    }\r\n\r\n    // Cleanup old element\r\n    this._cleanup(element);\r\n\r\n    // Replace in DOM\r\n    if (element.parentNode) {\r\n      element.parentNode.replaceChild(newElement, element);\r\n      return newElement;\r\n    } else {\r\n      throw new Error('Element has no parent node');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * UPDATE_PROPS - Update HTML attributes\r\n   */\r\n  static _updateProps(rootElement, patch) {\r\n    const { index, value } = patch;\r\n\r\n    if (!value || !value.changes) {\r\n      return;\r\n    }\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      console.warn(`_updateProps: Element not found at index ${index}`);\r\n      return;\r\n    }\r\n\r\n    const { changes } = value;\r\n\r\n    // Remove properties\r\n    if (changes.removed) {\r\n      Object.keys(changes.removed).forEach(key => {\r\n        this._removeProp(element, key);\r\n      });\r\n    }\r\n\r\n    // Update properties\r\n    if (changes.updated) {\r\n      Object.entries(changes.updated).forEach(([key, val]) => {\r\n        this._setProp(element, key, val);\r\n      });\r\n    }\r\n\r\n    // Add properties\r\n    if (changes.added) {\r\n      Object.entries(changes.added).forEach(([key, val]) => {\r\n        this._setProp(element, key, val);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * UPDATE_STYLE - Update CSS styles\r\n   */\r\n  static _updateStyle(rootElement, patch) {\r\n    const { index, value } = patch;\r\n\r\n    if (!value || !value.changes) {\r\n      return;\r\n    }\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      console.warn(`_updateStyle: Element not found at index ${index}`);\r\n      return;\r\n    }\r\n\r\n    const { changes } = value;\r\n\r\n    // Remove styles\r\n    if (changes.removed) {\r\n      Object.keys(changes.removed).forEach(key => {\r\n        element.style[key] = '';\r\n      });\r\n    }\r\n\r\n    // Update styles\r\n    if (changes.updated) {\r\n      Object.entries(changes.updated).forEach(([key, val]) => {\r\n        try {\r\n          element.style[key] = val;\r\n        } catch (e) {\r\n          console.warn(`Failed to set style ${key}`);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add styles\r\n    if (changes.added) {\r\n      Object.entries(changes.added).forEach(([key, val]) => {\r\n        try {\r\n          element.style[key] = val;\r\n        } catch (e) {\r\n          console.warn(`Failed to set style ${key}`);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * UPDATE_TEXT - Update text content\r\n   */\r\n  static _updateText(rootElement, patch) {\r\n    const { index, value } = patch;\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      console.warn(`_updateText: Element not found at index ${index}`);\r\n      return;\r\n    }\r\n\r\n    // Handle text nodes\r\n    if (element.nodeType === 3) { // TEXT_NODE\r\n      element.nodeValue = String(value !== undefined ? value : '');\r\n    } else {\r\n      element.textContent = String(value !== undefined ? value : '');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * UPDATE_EVENTS - Update event listeners\r\n   */\r\n  static _updateEvents(rootElement, patch) {\r\n    const { index, value } = patch;\r\n\r\n    if (!value || !value.changes) {\r\n      return;\r\n    }\r\n\r\n    const element = this._findElement(rootElement, index);\r\n    if (!element) {\r\n      console.warn(`_updateEvents: Element not found at index ${index}`);\r\n      return;\r\n    }\r\n\r\n    const { changes } = value;\r\n\r\n    // Remove events\r\n    if (changes.removed) {\r\n      Object.keys(changes.removed).forEach(eventName => {\r\n        this._removeEventListener(element, eventName);\r\n      });\r\n    }\r\n\r\n    // Update events\r\n    if (changes.updated) {\r\n      Object.entries(changes.updated).forEach(([eventName, handler]) => {\r\n        this._removeEventListener(element, eventName);\r\n        if (handler) {\r\n          this._addEventListener(element, eventName, handler);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add events\r\n    if (changes.added) {\r\n      Object.entries(changes.added).forEach(([eventName, handler]) => {\r\n        if (handler) {\r\n          this._addEventListener(element, eventName, handler);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a DOM node from VNode\r\n   */\r\n  static _createDOMNode(vnode) {\r\n    // Text node\r\n    if (typeof vnode === 'string') {\r\n      return document.createTextNode(vnode);\r\n    }\r\n\r\n    if (!vnode || typeof vnode !== 'object') {\r\n      return document.createTextNode('');\r\n    }\r\n\r\n    // Element node\r\n    const tag = vnode.tag || 'div';\r\n    const element = document.createElement(tag);\r\n\r\n    // \u2705 CRITICAL: Link VNode to Element\r\n    vnode._element = element;\r\n    element._vnode = vnode;\r\n\r\n    // Apply properties\r\n    if (vnode.props && typeof vnode.props === 'object') {\r\n      Object.entries(vnode.props).forEach(([key, val]) => {\r\n        this._setProp(element, key, val);\r\n      });\r\n    }\r\n\r\n    // Apply styles\r\n    if (vnode.style && typeof vnode.style === 'object') {\r\n      Object.entries(vnode.style).forEach(([key, val]) => {\r\n        try {\r\n          element.style[key] = val;\r\n        } catch (e) {\r\n          // Ignore style errors\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add children\r\n    if (vnode.children && Array.isArray(vnode.children)) {\r\n      vnode.children.forEach(child => {\r\n        const childNode = this._createDOMNode(child);\r\n        if (childNode) {\r\n          element.appendChild(childNode);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Attach event handlers\r\n    if (vnode.events && typeof vnode.events === 'object') {\r\n      Object.entries(vnode.events).forEach(([eventName, handler]) => {\r\n        if (typeof handler === 'function') {\r\n          this._addEventListener(element, eventName, handler);\r\n        }\r\n      });\r\n    }\r\n\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * Set a property on element\r\n   */\r\n  static _setProp(element, key, value) {\r\n    if (value === null || value === undefined) {\r\n      this._removeProp(element, key);\r\n      return;\r\n    }\r\n\r\n    // className\r\n    if (key === 'className') {\r\n      element.className = String(value);\r\n      return;\r\n    }\r\n\r\n    // value (for inputs, textareas)\r\n    if (key === 'value') {\r\n      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {\r\n        element.value = String(value);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // checked, disabled, selected (booleans)\r\n    if (key === 'checked' || key === 'disabled' || key === 'selected') {\r\n      element[key] = !!value;\r\n      return;\r\n    }\r\n\r\n    // data-* and aria-* attributes\r\n    if (key.startsWith('data-') || key.startsWith('aria-')) {\r\n      element.setAttribute(key, String(value));\r\n      return;\r\n    }\r\n\r\n    // Try to set as property first\r\n    try {\r\n      if (key in element) {\r\n        element[key] = value;\r\n      } else {\r\n        element.setAttribute(key, String(value));\r\n      }\r\n    } catch (e) {\r\n      try {\r\n        element.setAttribute(key, String(value));\r\n      } catch (e2) {\r\n        // Fail silently\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a property from element\r\n   */\r\n  static _removeProp(element, key) {\r\n    if (key === 'className') {\r\n      element.className = '';\r\n      return;\r\n    }\r\n\r\n    if (key === 'value') {\r\n      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {\r\n        element.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (key === 'checked' || key === 'disabled' || key === 'selected') {\r\n      element[key] = false;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      element.removeAttribute(key);\r\n    } catch (e) {\r\n      // Fail silently\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add event listener to element\r\n   */\r\n  static _addEventListener(element, eventName, handler) {\r\n    if (typeof handler !== 'function') {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Normalize event name: onClick -> click, onMouseover -> mouseover\r\n      const normalizedName = eventName\r\n        .replace(/^on/, '')\r\n        .toLowerCase();\r\n\r\n      // Store reference for later removal\r\n      if (!element._eventListeners) {\r\n        element._eventListeners = {};\r\n      }\r\n\r\n      element.addEventListener(normalizedName, handler);\r\n      element._eventListeners[normalizedName] = handler;\r\n    } catch (e) {\r\n      console.warn(`Failed to add event listener ${eventName}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listener from element\r\n   */\r\n  static _removeEventListener(element, eventName) {\r\n    try {\r\n      const normalizedName = eventName\r\n        .replace(/^on/, '')\r\n        .toLowerCase();\r\n\r\n      if (element._eventListeners && element._eventListeners[normalizedName]) {\r\n        element.removeEventListener(normalizedName, element._eventListeners[normalizedName]);\r\n        delete element._eventListeners[normalizedName];\r\n      }\r\n    } catch (e) {\r\n      console.warn(`Failed to remove event listener ${eventName}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cleanup element before removal\r\n   */\r\n  static _cleanup(element) {\r\n    if (!element) return;\r\n\r\n    // Remove all event listeners\r\n    if (element._eventListeners) {\r\n      Object.entries(element._eventListeners).forEach(([name, handler]) => {\r\n        try {\r\n          element.removeEventListener(name, handler);\r\n        } catch (e) {\r\n          // Fail silently\r\n        }\r\n      });\r\n      element._eventListeners = {};\r\n    }\r\n\r\n    // Recursively cleanup children\r\n    if (element.childNodes) {\r\n      for (let i = 0; i < element.childNodes.length; i++) {\r\n        this._cleanup(element.childNodes[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate patches\r\n   */\r\n  static validate(patches) {\r\n    const errors = [];\r\n    const validTypes = ['CREATE', 'REMOVE', 'REPLACE', 'UPDATE_PROPS', 'UPDATE_STYLE', 'UPDATE_TEXT', 'UPDATE_EVENTS'];\r\n\r\n    if (!Array.isArray(patches)) {\r\n      errors.push('Patches must be an array');\r\n      return errors;\r\n    }\r\n\r\n    patches.forEach((patch, i) => {\r\n      if (!patch.type) {\r\n        errors.push(`Patch ${i}: Missing type`);\r\n        return;\r\n      }\r\n\r\n      if (!validTypes.includes(patch.type)) {\r\n        errors.push(`Patch ${i}: Invalid type \"${patch.type}\"`);\r\n      }\r\n    });\r\n\r\n    return errors;\r\n  }\r\n\r\n  /**\r\n   * Get statistics about patches\r\n   */\r\n  static getStats(patches) {\r\n    const stats = { total: patches.length, byType: {} };\r\n\r\n    patches.forEach(p => {\r\n      stats.byType[p.type] = (stats.byType[p.type] || 0) + 1;\r\n    });\r\n\r\n    return stats;\r\n  }\r\n}"],
  "mappings": "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",
  "names": ["PatchApplier", "rootElement", "patches", "options", "patchesApplied", "errors", "patch", "error", "byType", "a", "b", "depthA", "type", "index", "current", "parts", "p", "partIndex", "newNode", "parentIndex", "parent", "newElement", "childIndex", "element", "value", "changes", "key", "val", "eventName", "handler", "vnode", "tag", "child", "childNode", "normalizedName", "name", "i", "validTypes", "stats"]
}
