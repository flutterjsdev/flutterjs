{
  "version": 3,
  "sources": ["../src/runtime_index.js"],
  "sourcesContent": ["/**\r\n * FlutterJS Runtime - Complete Integration Layer\r\n * \r\n * FIXED: All 3 VNodeRenderer.render() calls now properly instantiate the class\r\n */\r\n\r\nimport { VNode } from './vnode.js';\r\nimport { VNodeBuilder } from './vnode_builder.js';\r\nimport { StyleConverter } from './style_converter.js';\r\nimport { VNodeRenderer } from './vnode_renderer.js';\r\nimport { SSRRenderer } from './ssr_renderer.js';\r\nimport { RenderEngine } from './render_engine.js';\r\nimport { Hydrator } from './hydrator.js';\r\n\r\nexport class VNodeRuntime {\r\n  constructor() {\r\n    this.app = null;\r\n    this.rootElement = null;\r\n    this.rootVNode = null;\r\n    this.isHydrated = false;\r\n    this.hotReloadEnabled = false;\r\n    this.renderer = null;  // \u2705 ADD: Store renderer instance\r\n    this.stateRegistry = new Map();\r\n    this.performanceMetrics = {\r\n      initialRender: 0,\r\n      updates: 0,\r\n      totalRenderTime: 0,\r\n      averageRenderTime: 0\r\n    };\r\n  }\r\n\r\n  clearMetrics() {\r\n    this.performanceMetrics = {\r\n      initialRender: 0,\r\n      updates: 0,\r\n      totalRenderTime: 0,\r\n      averageRenderTime: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Start the application\r\n   * @param {Widget} app - Root widget\r\n   * @param {Object} options - Runtime options\r\n   */\r\n  runApp(app, options = {}) {\r\n    const {\r\n      target = '#root',\r\n      mode = 'auto', // 'csr', 'ssr', 'auto'\r\n      enableHotReload = false,\r\n      enablePerformanceTracking = true,\r\n      onError = null\r\n    } = options;\r\n\r\n    try {\r\n      console.log(`  [RUNTIME] runApp called with target: ${target}`);\r\n      this.app = app;\r\n      this.hotReloadEnabled = enableHotReload;\r\n\r\n      // Get target element\r\n      this.rootElement = this.getTargetElement(target);\r\n      console.log(`  [RUNTIME] Target element found`);\r\n\r\n      // \u2705 CREATE RENDERER INSTANCE HERE\r\n      this.renderer = new VNodeRenderer({ debugMode: true });\r\n      console.log(`  [RUNTIME] VNodeRenderer instance created`);\r\n\r\n      // Check if SSR content exists\r\n      const hasSSRContent = this.hasSSRContent(this.rootElement);\r\n      console.log(`  [RUNTIME] Has SSR content: ${hasSSRContent}`);\r\n\r\n      if (hasSSRContent) {\r\n        // Hydration mode\r\n        console.log(`  [RUNTIME] Entering hydration mode`);\r\n        this.hydrateApp(app, options);\r\n      } else {\r\n        // Client-side render mode\r\n        console.log(`  [RUNTIME] Entering CSR mode`);\r\n        this.renderApp(app, options);\r\n      }\r\n\r\n      // Setup hot reload if enabled\r\n      if (enableHotReload) {\r\n        console.log(`  [RUNTIME] Setting up hot reload`);\r\n        this.setupHotReload();\r\n      }\r\n\r\n      // Track performance\r\n      if (enablePerformanceTracking) {\r\n        console.log(`  [RUNTIME] Starting performance tracking`);\r\n        this.startPerformanceTracking();\r\n      }\r\n\r\n      return this;\r\n    } catch (error) {\r\n      if (onError) {\r\n        onError(error);\r\n      } else {\r\n        console.error('FlutterJS Runtime Error:', error);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Client-side render the app\r\n   * @private\r\n   */\r\n  renderApp(app, options = {}) {\r\n    console.log(`  [RENDERAPP] Starting client-side render`);\r\n    const startTime = performance.now();\r\n\r\n    // Build widget tree\r\n    const context = this.createBuildContext(options);\r\n    console.log(`  [RENDERAPP] Build context created`);\r\n\r\n    const widgetTree = app.build ? app.build(context) : app;\r\n    console.log(`  [RENDERAPP] Widget tree built`);\r\n    console.log(`  [RENDERAPP] Widget tree:`, JSON.stringify(widgetTree, null, 2).substring(0, 200));\r\n\r\n    // Convert to VNode\r\n    const vNodeBuilder = new VNodeBuilder({\r\n      debugMode: this.flutterConfig?.debugMode || false,\r\n      runtime: this  // \u2190 CRITICAL: Pass runtime\r\n    });\r\n    this.rootVNode = vNodeBuilder.build(widgetTree, context,);\r\n    console.log(`  [RENDERAPP] VNode created`);\r\n    console.log(`  [RENDERAPP] VNode tag: ${this.rootVNode.tag}`);\r\n    console.log(`  [RENDERAPP] VNode children count: ${this.rootVNode.children ? this.rootVNode.children.length : 0}`);\r\n    console.log(`  [RENDERAPP] VNode props:`, this.rootVNode.props);\r\n    console.log(`  [RENDERAPP] Full VNode:`, JSON.stringify(this.rootVNode, null, 2).substring(0, 300));\r\n\r\n    // Render to DOM\r\n    console.log(`  [RENDERAPP] Root element before render:`, this.rootElement.innerHTML.substring(0, 100));\r\n    console.log(`  [RENDERAPP] Root element classes:`, this.rootElement.className);\r\n\r\n    // \u2705 FIX #1: Use instance instead of static call\r\n    if (!this.renderer) {\r\n      this.renderer = new VNodeRenderer({ debugMode: true });\r\n    }\r\n\r\n    this.renderer.render(this.rootVNode, this.rootElement, {\r\n      clear: true\r\n    });\r\n    console.log(`  [RENDERAPP] Rendered to DOM`);\r\n\r\n    console.log(`  [RENDERAPP] Root element after render:`, this.rootElement.innerHTML.substring(0, 200));\r\n    console.log(`  [RENDERAPP] Root element child count:`, this.rootElement.children.length);\r\n    console.log(`  [RENDERAPP] Root element children:`, Array.from(this.rootElement.children).map(c => ({ tag: c.tagName, class: c.className, text: c.textContent.substring(0, 50) })));\r\n\r\n    const endTime = performance.now();\r\n    this.performanceMetrics.initialRender = endTime - startTime;\r\n\r\n    console.log(`\u2713 App rendered in ${this.performanceMetrics.initialRender.toFixed(2)}ms`);\r\n  }\r\n\r\n  /**\r\n   * Hydrate server-rendered app\r\n   * @private\r\n   */\r\n  hydrateApp(app, options = {}) {\r\n    console.log(`  [HYDRATEAPP] Starting hydration`);\r\n    const startTime = performance.now();\r\n\r\n    // Build widget tree\r\n    const context = this.createBuildContext(options);\r\n    console.log(`  [HYDRATEAPP] Build context created`);\r\n\r\n    const widgetTree = app.build ? app.build(context) : app;\r\n    console.log(`  [HYDRATEAPP] Widget tree built`);\r\n    const vNodeBuilder = new VNodeBuilder({\r\n      debugMode: this.flutterConfig?.debugMode || false,\r\n      runtime: this  // \u2190 CRITICAL: Pass runtime\r\n    });\r\n    // Convert to VNode\r\n    this.rootVNode = vNodeBuilder.build(widgetTree, context);\r\n    console.log(`  [HYDRATEAPP] VNode created`);\r\n\r\n    // Hydrate\r\n    const hydrationData = Hydrator.loadHydrationData();\r\n    console.log(`  [HYDRATEAPP] Hydration data loaded`);\r\n\r\n    Hydrator.hydrate(this.rootElement, this.rootVNode, hydrationData);\r\n    console.log(`  [HYDRATEAPP] Hydration complete`);\r\n\r\n    this.isHydrated = true;\r\n\r\n    const endTime = performance.now();\r\n    this.performanceMetrics.initialRender = endTime - startTime;\r\n\r\n    console.log(`\u2713 App hydrated in ${this.performanceMetrics.initialRender.toFixed(2)}ms`);\r\n  }\r\n\r\n  /**\r\n   * Update the application (e.g., after state change)\r\n   * @param {Function} updateFn - Function that updates state\r\n   */\r\n  update(updateFn) {\r\n    console.log(`  [UPDATE] Update called`);\r\n\r\n    if (!this.app || !this.rootElement) {\r\n      console.log(`  [UPDATE] ERROR: App not initialized`);\r\n      throw new Error('App not initialized. Call runApp() first.');\r\n    }\r\n\r\n    const startTime = performance.now();\r\n\r\n    // Execute update function\r\n    if (updateFn) {\r\n      console.log(`  [UPDATE] Executing update function`);\r\n      updateFn();\r\n    }\r\n\r\n    // Rebuild widget tree\r\n    const context = this.createBuildContext();\r\n    console.log(`  [UPDATE] Build context created`);\r\n\r\n    const widgetTree = this.app.build ? this.app.build(context) : this.app;\r\n    console.log(`  [UPDATE] Widget tree rebuilt`);\r\n\r\n    const vNodeBuilder = new VNodeBuilder({\r\n      debugMode: this.flutterConfig?.debugMode || false,\r\n      runtime: this  // \u2190 CRITICAL: Pass runtime\r\n    });\r\n\r\n    // Convert to VNode\r\n    const newVNode = vNodeBuilder.build(widgetTree, context);\r\n    console.log(`  [UPDATE] New VNode created`);\r\n\r\n    // \u2705 FIX #2 & #3: Use instance instead of static calls\r\n    if (!this.renderer) {\r\n      this.renderer = new VNodeRenderer({ debugMode: true });\r\n    }\r\n\r\n    this.renderer.render(newVNode, this.rootElement, { clear: true });\r\n\r\n    this.rootVNode = newVNode;\r\n\r\n    const endTime = performance.now();\r\n    const renderTime = endTime - startTime;\r\n\r\n    // Ensure at least 0.01ms is recorded if time was measured\r\n    const recordedTime = renderTime > 0 ? renderTime : 0.01;\r\n\r\n    this.performanceMetrics.updates++;\r\n    this.performanceMetrics.totalRenderTime += recordedTime;\r\n    this.performanceMetrics.averageRenderTime =\r\n      this.performanceMetrics.totalRenderTime / this.performanceMetrics.updates;\r\n\r\n    console.log(`  [UPDATE] Update metrics: updates=${this.performanceMetrics.updates}, renderTime=${renderTime.toFixed(2)}ms`);\r\n\r\n    if (this.hotReloadEnabled) {\r\n      console.log(`\u267B Updated in ${renderTime.toFixed(2)}ms`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register a stateful widget\r\n   * @param {string} widgetId - Unique widget identifier\r\n   * @param {Object} stateObject - State object with setState method\r\n   */\r\n  registerState(widgetId, stateObject) {\r\n    console.log(`  [REGISTRY] Registering state for ${widgetId}`);\r\n    this.stateRegistry.set(widgetId, stateObject);\r\n\r\n    // Wrap setState to trigger runtime update\r\n    const originalSetState = stateObject.setState.bind(stateObject);\r\n    stateObject.setState = (updater) => {\r\n      console.log(`  [REGISTRY] setState called for ${widgetId}`);\r\n      originalSetState(updater);\r\n      this.update();\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Unregister a stateful widget\r\n   * @param {string} widgetId - Widget identifier\r\n   */\r\n  unregisterState(widgetId) {\r\n    console.log(`  [REGISTRY] Unregistering state for ${widgetId}`);\r\n    this.stateRegistry.delete(widgetId);\r\n  }\r\n\r\n  /**\r\n   * Get state object by widget ID\r\n   * @param {string} widgetId - Widget identifier\r\n   * @returns {Object|null} State object\r\n   */\r\n  getState(widgetId) {\r\n    console.log(`  [REGISTRY] Getting state for ${widgetId}`);\r\n    return this.stateRegistry.get(widgetId) || null;\r\n  }\r\n\r\n  /**\r\n   * Hot reload the application\r\n   */\r\n  hotReload() {\r\n    console.log(`  [HOTRELOAD] hotReload called`);\r\n\r\n    if (!this.hotReloadEnabled) {\r\n      console.warn('Hot reload is not enabled');\r\n      return;\r\n    }\r\n\r\n    console.log('\uD83D\uDD25 Hot reloading...');\r\n\r\n    if (!this.app || !this.rootElement) {\r\n      console.warn('No app running. Cannot hot reload.');\r\n      return;\r\n    }\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Create build context\r\n   * @private\r\n   */\r\n  createBuildContext(options = {}) {\r\n    console.log(`  [CONTEXT] Creating build context`);\r\n\r\n    return {\r\n      runtime: this,\r\n      mediaQuery: this.getMediaQuery(),\r\n      theme: options.theme || this.getDefaultTheme(),\r\n      navigator: this.createNavigator(),\r\n      ...options.context\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get media query information\r\n   * @private\r\n   */\r\n  getMediaQuery() {\r\n    if (typeof window === 'undefined') {\r\n      console.log(`  [MEDIAQUERY] Server-side - returning default`);\r\n      return {\r\n        width: 1920,\r\n        height: 1080,\r\n        devicePixelRatio: 1\r\n      };\r\n    }\r\n\r\n    const mq = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      devicePixelRatio: window.devicePixelRatio || 1,\r\n      orientation: window.innerWidth > window.innerHeight ? 'landscape' : 'portrait'\r\n    };\r\n\r\n    console.log(`  [MEDIAQUERY] Client-side:`, mq);\r\n    return mq;\r\n  }\r\n\r\n  /**\r\n   * Get default Material Design theme\r\n   * @private\r\n   */\r\n  getDefaultTheme() {\r\n    console.log(`  [THEME] Creating default Material Design theme`);\r\n\r\n    return {\r\n      primaryColor: '#6750a4',\r\n      onPrimary: '#ffffff',\r\n      primaryContainer: '#eaddff',\r\n      onPrimaryContainer: '#21005e',\r\n      surface: '#fffbfe',\r\n      onSurface: '#1c1b1f',\r\n      outline: '#79747e',\r\n      outlineVariant: '#cac7cf'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create navigator for routing\r\n   * @private\r\n   */\r\n  createNavigator() {\r\n    console.log(`  [NAVIGATOR] Creating navigator`);\r\n\r\n    return {\r\n      push: (route) => {\r\n        console.log('Navigation not yet implemented:', route);\r\n      },\r\n      pop: () => {\r\n        console.log('Navigation not yet implemented');\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get target element\r\n   * @private\r\n   */\r\n  getTargetElement(target) {\r\n    console.log(`  [TARGET] Getting target element: ${target}`);\r\n\r\n    if (typeof target === 'string') {\r\n      const element = document.querySelector(target);\r\n      if (!element) {\r\n        console.log(`  [TARGET] ERROR: Element not found for selector: ${target}`);\r\n        throw new Error(`Target element \"${target}\" not found`);\r\n      }\r\n      console.log(`  [TARGET] Found element by selector`);\r\n      return element;\r\n    }\r\n\r\n    if (target instanceof HTMLElement) {\r\n      console.log(`  [TARGET] Using HTMLElement target`);\r\n      return target;\r\n    }\r\n\r\n    console.log(`  [TARGET] ERROR: Invalid target type`);\r\n    throw new Error('Invalid target: must be a selector string or HTMLElement');\r\n  }\r\n\r\n  /**\r\n   * Check if element has SSR content\r\n   * @private\r\n   */\r\n  hasSSRContent(element) {\r\n    console.log(`  [SSRCHECK] Checking for SSR content`);\r\n\r\n    // Check for hydration data script\r\n    const hydrationScript = document.getElementById('__FLUTTERJS_HYDRATION_DATA__');\r\n\r\n    // Check if element has children (SSR content)\r\n    const hasContent = hydrationScript && element.children.length > 0;\r\n    console.log(`  [SSRCHECK] Hydration script found: ${hydrationScript !== null}, Element has children: ${element.children.length > 0}`);\r\n\r\n    return hasContent;\r\n  }\r\n\r\n  /**\r\n   * Setup hot reload listener\r\n   * @private\r\n   */\r\n  setupHotReload() {\r\n    if (typeof window === 'undefined') {\r\n      console.log(`  [HOTRELOAD] Server-side environment, skipping`);\r\n      return;\r\n    }\r\n\r\n    console.log(`  [HOTRELOAD] Setting up hot reload listeners`);\r\n\r\n    // Listen for custom hot reload event\r\n    window.addEventListener('flutterjs:hotreload', () => {\r\n      console.log(`  [HOTRELOAD] Received hot reload event`);\r\n      this.hotReload();\r\n    });\r\n\r\n    // Expose hot reload globally\r\n    window.__flutterjs_hot_reload = () => {\r\n      console.log(`  [HOTRELOAD] Called via global function`);\r\n      this.hotReload();\r\n    };\r\n\r\n    console.log('\uD83D\uDD25 Hot reload enabled');\r\n  }\r\n\r\n  /**\r\n   * Start performance tracking\r\n   * @private\r\n   */\r\n  startPerformanceTracking() {\r\n    if (typeof window === 'undefined') {\r\n      console.log(`  [PERFTRACK] Server-side environment, skipping`);\r\n      return;\r\n    }\r\n\r\n    console.log(`  [PERFTRACK] Starting FPS tracking`);\r\n\r\n    // Track FPS\r\n    let lastTime = performance.now();\r\n    let frames = 0;\r\n\r\n    const trackFPS = () => {\r\n      frames++;\r\n      const currentTime = performance.now();\r\n\r\n      if (currentTime >= lastTime + 1000) {\r\n        const fps = Math.round((frames * 1000) / (currentTime - lastTime));\r\n        this.performanceMetrics.fps = fps;\r\n        console.log(`  [PERFTRACK] FPS: ${fps}`);\r\n        frames = 0;\r\n        lastTime = currentTime;\r\n      }\r\n\r\n      requestAnimationFrame(trackFPS);\r\n    };\r\n\r\n    requestAnimationFrame(trackFPS);\r\n  }\r\n\r\n  /**\r\n   * Get performance metrics\r\n   * @returns {Object} Performance metrics\r\n   */\r\n  getMetrics() {\r\n    console.log(`  [METRICS] Getting metrics - app exists: ${this.app !== null}`);\r\n\r\n    if (!this.app) {\r\n      console.log(`  [METRICS] No app, returning null`);\r\n      return null;\r\n    }\r\n\r\n    const metrics = {\r\n      ...this.performanceMetrics,\r\n      isHydrated: this.isHydrated,\r\n      stateCount: this.stateRegistry.size,\r\n      vnodeStats: this.rootVNode ? RenderEngine.getStats(this.rootVNode) : null\r\n    };\r\n\r\n    console.log(`  [METRICS] Returning metrics:`, metrics);\r\n    return metrics;\r\n  }\r\n\r\n  /**\r\n   * Destroy the runtime and cleanup\r\n   */\r\n  destroy() {\r\n    console.log(`  [DESTROY] Destroying runtime`);\r\n\r\n    // Cleanup event listeners\r\n    if (this.rootElement && this.renderer) {\r\n      console.log(`  [DESTROY] Cleaning up event listeners`);\r\n      this.renderer.cleanupEventListeners(this.rootElement);\r\n    }\r\n\r\n    // Clear state registry\r\n    console.log(`  [DESTROY] Clearing state registry (size: ${this.stateRegistry.size})`);\r\n    this.stateRegistry.clear();\r\n\r\n    // Remove hot reload listener\r\n    if (typeof window !== 'undefined') {\r\n      console.log(`  [DESTROY] Removing hot reload listener`);\r\n      window.removeEventListener('flutterjs:hotreload', this.hotReload);\r\n      delete window.__flutterjs_hot_reload;\r\n    }\r\n\r\n    // Clear references\r\n    this.app = null;\r\n    this.rootElement = null;\r\n    this.rootVNode = null;\r\n    this.renderer = null;\r\n\r\n    console.log('\u2713 Runtime destroyed');\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Global API\r\n// ============================================================================\r\n\r\nlet globalRuntime = null;\r\n\r\n/**\r\n * Start FlutterJS application\r\n * @param {Widget} app - Root widget\r\n * @param {Object} options - Runtime options\r\n */\r\nexport function runApp(app, options = {}) {\r\n  console.log(`[GLOBAL] runApp called`);\r\n\r\n  if (!globalRuntime) {\r\n    console.log(`[GLOBAL] Creating new global runtime`);\r\n    globalRuntime = new VNodeRuntime();\r\n  }\r\n  return globalRuntime.runApp(app, options);\r\n}\r\n\r\n/**\r\n * Get the global runtime instance\r\n * @returns {VNodeRuntime} Runtime instance\r\n */\r\nexport function getRuntime() {\r\n  console.log(`[GLOBAL] getRuntime called, exists: ${globalRuntime !== null}`);\r\n  return globalRuntime;\r\n}\r\n\r\n/**\r\n * Update the application\r\n * @param {Function} updateFn - Update function\r\n */\r\nexport function updateApp(updateFn) {\r\n  console.log(`[GLOBAL] updateApp called`);\r\n\r\n  if (!globalRuntime) {\r\n    console.log(`[GLOBAL] ERROR: No runtime`);\r\n    throw new Error('No app running. Call runApp() first.');\r\n  }\r\n  globalRuntime.update(updateFn);\r\n}\r\n\r\n/**\r\n * Get performance metrics\r\n * @returns {Object} Metrics\r\n */\r\nexport function getMetrics() {\r\n  console.log(`[GLOBAL] getMetrics called`);\r\n\r\n  if (!globalRuntime) {\r\n    console.log(`[GLOBAL] No runtime, returning null`);\r\n    return null;\r\n  }\r\n  return globalRuntime.getMetrics();\r\n}\r\n\r\n/**\r\n * Trigger hot reload\r\n */\r\nexport function hotReload() {\r\n  console.log(`[GLOBAL] hotReload called`);\r\n\r\n  if (!globalRuntime) {\r\n    console.warn('No app running');\r\n    return;\r\n  }\r\n  globalRuntime.hotReload();\r\n}\r\n\r\n/**\r\n * Server-side render to HTML\r\n * @param {Widget} app - Root widget\r\n * @param {Object} options - SSR options\r\n * @returns {string} HTML string\r\n */\r\nexport function renderToString(app, options = {}) {\r\n  console.log(`[GLOBAL] renderToString called`);\r\n\r\n  const context = {\r\n    mediaQuery: { width: 1920, height: 1080, devicePixelRatio: 1 },\r\n    theme: options.theme || {},\r\n    ...options.context\r\n  };\r\n\r\n  console.log(`[GLOBAL] SSR: Creating build context`);\r\n  const widgetTree = app.build ? app.build(context) : app;\r\n\r\n  console.log(`[GLOBAL] SSR: Building VNode`);\r\n  // \u2705 Create instance with runtime\r\n  const vNodeBuilder = new VNodeBuilder({\r\n    debugMode: this.flutterConfig?.debugMode || false,\r\n    runtime: this  // \u2190 CRITICAL: Pass runtime\r\n  });\r\n  this.rootVNode = vNodeBuilder.build(widgetTree, context);\r\n  console.log(`[GLOBAL] SSR: Rendering to string`);\r\n  return RenderEngine.renderServer(vnode, {\r\n    title: options.title || 'FlutterJS App',\r\n    meta: options.meta || {},\r\n    styles: options.styles || [],\r\n    scripts: options.scripts || [],\r\n    includeHydration: options.includeHydration !== false,\r\n    includeCriticalCSS: options.includeCriticalCSS !== false,\r\n    includeRuntime: options.includeRuntime !== false\r\n  });\r\n}\r\n\r\n/**\r\n * Hydrate server-rendered content\r\n * @param {Widget} app - Root widget\r\n * @param {Object} options - Hydration options\r\n */\r\nexport function hydrate(app, options = {}) {\r\n  console.log(`[GLOBAL] hydrate called`);\r\n\r\n  if (!globalRuntime) {\r\n    console.log(`[GLOBAL] Creating new global runtime for hydration`);\r\n    globalRuntime = new VNodeRuntime();\r\n  }\r\n\r\n  const target = options.target || '#root';\r\n  console.log(`[GLOBAL] Getting target: ${target}`);\r\n\r\n  const rootElement = typeof target === 'string'\r\n    ? document.querySelector(target)\r\n    : target;\r\n\r\n  if (!rootElement) {\r\n    console.log(`[GLOBAL] ERROR: Target not found`);\r\n    throw new Error(`Target element \"${target}\" not found`);\r\n  }\r\n\r\n  console.log(`[GLOBAL] Setting up hydration`);\r\n  globalRuntime.rootElement = rootElement;\r\n  globalRuntime.app = app;\r\n  globalRuntime.hydrateApp(app, options);\r\n\r\n  return globalRuntime;\r\n}\r\n\r\n// Default export\r\nexport default {\r\n  runApp,\r\n  getRuntime,\r\n  updateApp,\r\n  getMetrics,\r\n  hotReload,\r\n  renderToString,\r\n  hydrate,\r\n\r\n  VNodeRuntime\r\n};\r\n\r\n// Browser global\r\nif (typeof window !== 'undefined') {\r\n  console.log(`[GLOBAL] Setting up window.FlutterJS`);\r\n  window.FlutterJS = {\r\n    runApp,\r\n    getRuntime,\r\n    updateApp,\r\n    getMetrics,\r\n    hotReload,\r\n    renderToString,\r\n    hydrate\r\n  };\r\n  console.log(`[GLOBAL] window.FlutterJS ready`);\r\n}\r\n\r\nexport function clearMetrics() {\r\n  if (!globalRuntime) return;\r\n  globalRuntime.clearMetrics();\r\n}"],
  "mappings": "AAMA,MAAsB,aACtB,OAAS,gBAAAA,MAAoB,qBAC7B,MAA+B,uBAC/B,OAAS,iBAAAC,MAAqB,sBAC9B,MAA4B,oBAC5B,OAAS,gBAAAC,MAAoB,qBAC7B,OAAS,YAAAC,MAAgB,gBAElB,MAAMC,CAAa,CACxB,aAAc,CACZ,KAAK,IAAM,KACX,KAAK,YAAc,KACnB,KAAK,UAAY,KACjB,KAAK,WAAa,GAClB,KAAK,iBAAmB,GACxB,KAAK,SAAW,KAChB,KAAK,cAAgB,IAAI,IACzB,KAAK,mBAAqB,CACxB,cAAe,EACf,QAAS,EACT,gBAAiB,EACjB,kBAAmB,CACrB,CACF,CAEA,cAAe,CACb,KAAK,mBAAqB,CACxB,cAAe,EACf,QAAS,EACT,gBAAiB,EACjB,kBAAmB,CACrB,CACF,CAOA,OAAOC,EAAKC,EAAU,CAAC,EAAG,CACxB,KAAM,CACJ,OAAAC,EAAS,QACT,KAAAC,EAAO,OACP,gBAAAC,EAAkB,GAClB,0BAAAC,EAA4B,GAC5B,QAAAC,EAAU,IACZ,EAAIL,EAEJ,GAAI,CACF,QAAQ,IAAI,0CAA0CC,CAAM,EAAE,EAC9D,KAAK,IAAMF,EACX,KAAK,iBAAmBI,EAGxB,KAAK,YAAc,KAAK,iBAAiBF,CAAM,EAC/C,QAAQ,IAAI,kCAAkC,EAG9C,KAAK,SAAW,IAAIN,EAAc,CAAE,UAAW,EAAK,CAAC,EACrD,QAAQ,IAAI,4CAA4C,EAGxD,MAAMW,EAAgB,KAAK,cAAc,KAAK,WAAW,EACzD,eAAQ,IAAI,gCAAgCA,CAAa,EAAE,EAEvDA,GAEF,QAAQ,IAAI,qCAAqC,EACjD,KAAK,WAAWP,EAAKC,CAAO,IAG5B,QAAQ,IAAI,+BAA+B,EAC3C,KAAK,UAAUD,EAAKC,CAAO,GAIzBG,IACF,QAAQ,IAAI,mCAAmC,EAC/C,KAAK,eAAe,GAIlBC,IACF,QAAQ,IAAI,2CAA2C,EACvD,KAAK,yBAAyB,GAGzB,IACT,OAASG,EAAO,CACd,MAAIF,EACFA,EAAQE,CAAK,EAEb,QAAQ,MAAM,2BAA4BA,CAAK,EAE3CA,CACR,CACF,CAMA,UAAUR,EAAKC,EAAU,CAAC,EAAG,CAC3B,QAAQ,IAAI,2CAA2C,EACvD,MAAMQ,EAAY,YAAY,IAAI,EAG5BC,EAAU,KAAK,mBAAmBT,CAAO,EAC/C,QAAQ,IAAI,qCAAqC,EAEjD,MAAMU,EAAaX,EAAI,MAAQA,EAAI,MAAMU,CAAO,EAAIV,EACpD,QAAQ,IAAI,iCAAiC,EAC7C,QAAQ,IAAI,6BAA8B,KAAK,UAAUW,EAAY,KAAM,CAAC,EAAE,UAAU,EAAG,GAAG,CAAC,EAG/F,MAAMC,EAAe,IAAIjB,EAAa,CACpC,UAAW,KAAK,eAAe,WAAa,GAC5C,QAAS,IACX,CAAC,EACD,KAAK,UAAYiB,EAAa,MAAMD,EAAYD,CAAQ,EACxD,QAAQ,IAAI,6BAA6B,EACzC,QAAQ,IAAI,4BAA4B,KAAK,UAAU,GAAG,EAAE,EAC5D,QAAQ,IAAI,uCAAuC,KAAK,UAAU,SAAW,KAAK,UAAU,SAAS,OAAS,CAAC,EAAE,EACjH,QAAQ,IAAI,6BAA8B,KAAK,UAAU,KAAK,EAC9D,QAAQ,IAAI,4BAA6B,KAAK,UAAU,KAAK,UAAW,KAAM,CAAC,EAAE,UAAU,EAAG,GAAG,CAAC,EAGlG,QAAQ,IAAI,4CAA6C,KAAK,YAAY,UAAU,UAAU,EAAG,GAAG,CAAC,EACrG,QAAQ,IAAI,sCAAuC,KAAK,YAAY,SAAS,EAGxE,KAAK,WACR,KAAK,SAAW,IAAId,EAAc,CAAE,UAAW,EAAK,CAAC,GAGvD,KAAK,SAAS,OAAO,KAAK,UAAW,KAAK,YAAa,CACrD,MAAO,EACT,CAAC,EACD,QAAQ,IAAI,+BAA+B,EAE3C,QAAQ,IAAI,2CAA4C,KAAK,YAAY,UAAU,UAAU,EAAG,GAAG,CAAC,EACpG,QAAQ,IAAI,0CAA2C,KAAK,YAAY,SAAS,MAAM,EACvF,QAAQ,IAAI,uCAAwC,MAAM,KAAK,KAAK,YAAY,QAAQ,EAAE,IAAIiB,IAAM,CAAE,IAAKA,EAAE,QAAS,MAAOA,EAAE,UAAW,KAAMA,EAAE,YAAY,UAAU,EAAG,EAAE,CAAE,EAAE,CAAC,EAElL,MAAMC,EAAU,YAAY,IAAI,EAChC,KAAK,mBAAmB,cAAgBA,EAAUL,EAElD,QAAQ,IAAI,0BAAqB,KAAK,mBAAmB,cAAc,QAAQ,CAAC,CAAC,IAAI,CACvF,CAMA,WAAWT,EAAKC,EAAU,CAAC,EAAG,CAC5B,QAAQ,IAAI,mCAAmC,EAC/C,MAAMQ,EAAY,YAAY,IAAI,EAG5BC,EAAU,KAAK,mBAAmBT,CAAO,EAC/C,QAAQ,IAAI,sCAAsC,EAElD,MAAMU,EAAaX,EAAI,MAAQA,EAAI,MAAMU,CAAO,EAAIV,EACpD,QAAQ,IAAI,kCAAkC,EAC9C,MAAMY,EAAe,IAAIjB,EAAa,CACpC,UAAW,KAAK,eAAe,WAAa,GAC5C,QAAS,IACX,CAAC,EAED,KAAK,UAAYiB,EAAa,MAAMD,EAAYD,CAAO,EACvD,QAAQ,IAAI,8BAA8B,EAG1C,MAAMK,EAAgBjB,EAAS,kBAAkB,EACjD,QAAQ,IAAI,sCAAsC,EAElDA,EAAS,QAAQ,KAAK,YAAa,KAAK,UAAWiB,CAAa,EAChE,QAAQ,IAAI,mCAAmC,EAE/C,KAAK,WAAa,GAElB,MAAMD,EAAU,YAAY,IAAI,EAChC,KAAK,mBAAmB,cAAgBA,EAAUL,EAElD,QAAQ,IAAI,0BAAqB,KAAK,mBAAmB,cAAc,QAAQ,CAAC,CAAC,IAAI,CACvF,CAMA,OAAOO,EAAU,CAGf,GAFA,QAAQ,IAAI,0BAA0B,EAElC,CAAC,KAAK,KAAO,CAAC,KAAK,YACrB,cAAQ,IAAI,uCAAuC,EAC7C,IAAI,MAAM,2CAA2C,EAG7D,MAAMP,EAAY,YAAY,IAAI,EAG9BO,IACF,QAAQ,IAAI,sCAAsC,EAClDA,EAAS,GAIX,MAAMN,EAAU,KAAK,mBAAmB,EACxC,QAAQ,IAAI,kCAAkC,EAE9C,MAAMC,EAAa,KAAK,IAAI,MAAQ,KAAK,IAAI,MAAMD,CAAO,EAAI,KAAK,IACnE,QAAQ,IAAI,gCAAgC,EAQ5C,MAAMO,EANe,IAAItB,EAAa,CACpC,UAAW,KAAK,eAAe,WAAa,GAC5C,QAAS,IACX,CAAC,EAG6B,MAAMgB,EAAYD,CAAO,EACvD,QAAQ,IAAI,8BAA8B,EAGrC,KAAK,WACR,KAAK,SAAW,IAAId,EAAc,CAAE,UAAW,EAAK,CAAC,GAGvD,KAAK,SAAS,OAAOqB,EAAU,KAAK,YAAa,CAAE,MAAO,EAAK,CAAC,EAEhE,KAAK,UAAYA,EAGjB,MAAMC,EADU,YAAY,IAAI,EACHT,EAGvBU,EAAeD,EAAa,EAAIA,EAAa,IAEnD,KAAK,mBAAmB,UACxB,KAAK,mBAAmB,iBAAmBC,EAC3C,KAAK,mBAAmB,kBACtB,KAAK,mBAAmB,gBAAkB,KAAK,mBAAmB,QAEpE,QAAQ,IAAI,sCAAsC,KAAK,mBAAmB,OAAO,gBAAgBD,EAAW,QAAQ,CAAC,CAAC,IAAI,EAEtH,KAAK,kBACP,QAAQ,IAAI,qBAAgBA,EAAW,QAAQ,CAAC,CAAC,IAAI,CAEzD,CAOA,cAAcE,EAAUC,EAAa,CACnC,QAAQ,IAAI,sCAAsCD,CAAQ,EAAE,EAC5D,KAAK,cAAc,IAAIA,EAAUC,CAAW,EAG5C,MAAMC,EAAmBD,EAAY,SAAS,KAAKA,CAAW,EAC9DA,EAAY,SAAYE,GAAY,CAClC,QAAQ,IAAI,oCAAoCH,CAAQ,EAAE,EAC1DE,EAAiBC,CAAO,EACxB,KAAK,OAAO,CACd,CACF,CAMA,gBAAgBH,EAAU,CACxB,QAAQ,IAAI,wCAAwCA,CAAQ,EAAE,EAC9D,KAAK,cAAc,OAAOA,CAAQ,CACpC,CAOA,SAASA,EAAU,CACjB,eAAQ,IAAI,kCAAkCA,CAAQ,EAAE,EACjD,KAAK,cAAc,IAAIA,CAAQ,GAAK,IAC7C,CAKA,WAAY,CAGV,GAFA,QAAQ,IAAI,gCAAgC,EAExC,CAAC,KAAK,iBAAkB,CAC1B,QAAQ,KAAK,2BAA2B,EACxC,MACF,CAIA,GAFA,QAAQ,IAAI,4BAAqB,EAE7B,CAAC,KAAK,KAAO,CAAC,KAAK,YAAa,CAClC,QAAQ,KAAK,oCAAoC,EACjD,MACF,CAEA,KAAK,OAAO,CACd,CAMA,mBAAmBnB,EAAU,CAAC,EAAG,CAC/B,eAAQ,IAAI,oCAAoC,EAEzC,CACL,QAAS,KACT,WAAY,KAAK,cAAc,EAC/B,MAAOA,EAAQ,OAAS,KAAK,gBAAgB,EAC7C,UAAW,KAAK,gBAAgB,EAChC,GAAGA,EAAQ,OACb,CACF,CAMA,eAAgB,CACd,GAAI,OAAO,OAAW,IACpB,eAAQ,IAAI,gDAAgD,EACrD,CACL,MAAO,KACP,OAAQ,KACR,iBAAkB,CACpB,EAGF,MAAMuB,EAAK,CACT,MAAO,OAAO,WACd,OAAQ,OAAO,YACf,iBAAkB,OAAO,kBAAoB,EAC7C,YAAa,OAAO,WAAa,OAAO,YAAc,YAAc,UACtE,EAEA,eAAQ,IAAI,8BAA+BA,CAAE,EACtCA,CACT,CAMA,iBAAkB,CAChB,eAAQ,IAAI,kDAAkD,EAEvD,CACL,aAAc,UACd,UAAW,UACX,iBAAkB,UAClB,mBAAoB,UACpB,QAAS,UACT,UAAW,UACX,QAAS,UACT,eAAgB,SAClB,CACF,CAMA,iBAAkB,CAChB,eAAQ,IAAI,kCAAkC,EAEvC,CACL,KAAOC,GAAU,CACf,QAAQ,IAAI,kCAAmCA,CAAK,CACtD,EACA,IAAK,IAAM,CACT,QAAQ,IAAI,gCAAgC,CAC9C,CACF,CACF,CAMA,iBAAiBvB,EAAQ,CAGvB,GAFA,QAAQ,IAAI,sCAAsCA,CAAM,EAAE,EAEtD,OAAOA,GAAW,SAAU,CAC9B,MAAMwB,EAAU,SAAS,cAAcxB,CAAM,EAC7C,GAAI,CAACwB,EACH,cAAQ,IAAI,qDAAqDxB,CAAM,EAAE,EACnE,IAAI,MAAM,mBAAmBA,CAAM,aAAa,EAExD,eAAQ,IAAI,sCAAsC,EAC3CwB,CACT,CAEA,GAAIxB,aAAkB,YACpB,eAAQ,IAAI,qCAAqC,EAC1CA,EAGT,cAAQ,IAAI,uCAAuC,EAC7C,IAAI,MAAM,0DAA0D,CAC5E,CAMA,cAAcwB,EAAS,CACrB,QAAQ,IAAI,uCAAuC,EAGnD,MAAMC,EAAkB,SAAS,eAAe,8BAA8B,EAGxEC,EAAaD,GAAmBD,EAAQ,SAAS,OAAS,EAChE,eAAQ,IAAI,wCAAwCC,IAAoB,IAAI,2BAA2BD,EAAQ,SAAS,OAAS,CAAC,EAAE,EAE7HE,CACT,CAMA,gBAAiB,CACf,GAAI,OAAO,OAAW,IAAa,CACjC,QAAQ,IAAI,iDAAiD,EAC7D,MACF,CAEA,QAAQ,IAAI,+CAA+C,EAG3D,OAAO,iBAAiB,sBAAuB,IAAM,CACnD,QAAQ,IAAI,yCAAyC,EACrD,KAAK,UAAU,CACjB,CAAC,EAGD,OAAO,uBAAyB,IAAM,CACpC,QAAQ,IAAI,0CAA0C,EACtD,KAAK,UAAU,CACjB,EAEA,QAAQ,IAAI,8BAAuB,CACrC,CAMA,0BAA2B,CACzB,GAAI,OAAO,OAAW,IAAa,CACjC,QAAQ,IAAI,iDAAiD,EAC7D,MACF,CAEA,QAAQ,IAAI,qCAAqC,EAGjD,IAAIC,EAAW,YAAY,IAAI,EAC3BC,EAAS,EAEb,MAAMC,EAAW,IAAM,CACrBD,IACA,MAAME,EAAc,YAAY,IAAI,EAEpC,GAAIA,GAAeH,EAAW,IAAM,CAClC,MAAMI,EAAM,KAAK,MAAOH,EAAS,KAASE,EAAcH,EAAS,EACjE,KAAK,mBAAmB,IAAMI,EAC9B,QAAQ,IAAI,sBAAsBA,CAAG,EAAE,EACvCH,EAAS,EACTD,EAAWG,CACb,CAEA,sBAAsBD,CAAQ,CAChC,EAEA,sBAAsBA,CAAQ,CAChC,CAMA,YAAa,CAGX,GAFA,QAAQ,IAAI,6CAA6C,KAAK,MAAQ,IAAI,EAAE,EAExE,CAAC,KAAK,IACR,eAAQ,IAAI,oCAAoC,EACzC,KAGT,MAAMG,EAAU,CACd,GAAG,KAAK,mBACR,WAAY,KAAK,WACjB,WAAY,KAAK,cAAc,KAC/B,WAAY,KAAK,UAAYrC,EAAa,SAAS,KAAK,SAAS,EAAI,IACvE,EAEA,eAAQ,IAAI,iCAAkCqC,CAAO,EAC9CA,CACT,CAKA,SAAU,CACR,QAAQ,IAAI,gCAAgC,EAGxC,KAAK,aAAe,KAAK,WAC3B,QAAQ,IAAI,yCAAyC,EACrD,KAAK,SAAS,sBAAsB,KAAK,WAAW,GAItD,QAAQ,IAAI,8CAA8C,KAAK,cAAc,IAAI,GAAG,EACpF,KAAK,cAAc,MAAM,EAGrB,OAAO,OAAW,MACpB,QAAQ,IAAI,0CAA0C,EACtD,OAAO,oBAAoB,sBAAuB,KAAK,SAAS,EAChE,OAAO,OAAO,wBAIhB,KAAK,IAAM,KACX,KAAK,YAAc,KACnB,KAAK,UAAY,KACjB,KAAK,SAAW,KAEhB,QAAQ,IAAI,0BAAqB,CACnC,CACF,CAMA,IAAIC,EAAgB,KAOb,SAASC,EAAOpC,EAAKC,EAAU,CAAC,EAAG,CACxC,eAAQ,IAAI,wBAAwB,EAE/BkC,IACH,QAAQ,IAAI,sCAAsC,EAClDA,EAAgB,IAAIpC,GAEfoC,EAAc,OAAOnC,EAAKC,CAAO,CAC1C,CAMO,SAASoC,GAAa,CAC3B,eAAQ,IAAI,uCAAuCF,IAAkB,IAAI,EAAE,EACpEA,CACT,CAMO,SAASG,EAAUtB,EAAU,CAGlC,GAFA,QAAQ,IAAI,2BAA2B,EAEnC,CAACmB,EACH,cAAQ,IAAI,4BAA4B,EAClC,IAAI,MAAM,sCAAsC,EAExDA,EAAc,OAAOnB,CAAQ,CAC/B,CAMO,SAASuB,GAAa,CAG3B,OAFA,QAAQ,IAAI,4BAA4B,EAEnCJ,EAIEA,EAAc,WAAW,GAH9B,QAAQ,IAAI,qCAAqC,EAC1C,KAGX,CAKO,SAASK,GAAY,CAG1B,GAFA,QAAQ,IAAI,2BAA2B,EAEnC,CAACL,EAAe,CAClB,QAAQ,KAAK,gBAAgB,EAC7B,MACF,CACAA,EAAc,UAAU,CAC1B,CAQO,SAASM,EAAezC,EAAKC,EAAU,CAAC,EAAG,CAChD,QAAQ,IAAI,gCAAgC,EAE5C,MAAMS,EAAU,CACd,WAAY,CAAE,MAAO,KAAM,OAAQ,KAAM,iBAAkB,CAAE,EAC7D,MAAOT,EAAQ,OAAS,CAAC,EACzB,GAAGA,EAAQ,OACb,EAEA,QAAQ,IAAI,sCAAsC,EAClD,MAAMU,EAAaX,EAAI,MAAQA,EAAI,MAAMU,CAAO,EAAIV,EAEpD,QAAQ,IAAI,8BAA8B,EAE1C,MAAMY,EAAe,IAAIjB,EAAa,CACpC,UAAW,KAAK,eAAe,WAAa,GAC5C,QAAS,IACX,CAAC,EACD,YAAK,UAAYiB,EAAa,MAAMD,EAAYD,CAAO,EACvD,QAAQ,IAAI,mCAAmC,EACxCb,EAAa,aAAa,MAAO,CACtC,MAAOI,EAAQ,OAAS,gBACxB,KAAMA,EAAQ,MAAQ,CAAC,EACvB,OAAQA,EAAQ,QAAU,CAAC,EAC3B,QAASA,EAAQ,SAAW,CAAC,EAC7B,iBAAkBA,EAAQ,mBAAqB,GAC/C,mBAAoBA,EAAQ,qBAAuB,GACnD,eAAgBA,EAAQ,iBAAmB,EAC7C,CAAC,CACH,CAOO,SAASyC,EAAQ1C,EAAKC,EAAU,CAAC,EAAG,CACzC,QAAQ,IAAI,yBAAyB,EAEhCkC,IACH,QAAQ,IAAI,oDAAoD,EAChEA,EAAgB,IAAIpC,GAGtB,MAAMG,EAASD,EAAQ,QAAU,QACjC,QAAQ,IAAI,4BAA4BC,CAAM,EAAE,EAEhD,MAAMyC,EAAc,OAAOzC,GAAW,SAClC,SAAS,cAAcA,CAAM,EAC7BA,EAEJ,GAAI,CAACyC,EACH,cAAQ,IAAI,kCAAkC,EACxC,IAAI,MAAM,mBAAmBzC,CAAM,aAAa,EAGxD,eAAQ,IAAI,+BAA+B,EAC3CiC,EAAc,YAAcQ,EAC5BR,EAAc,IAAMnC,EACpBmC,EAAc,WAAWnC,EAAKC,CAAO,EAE9BkC,CACT,CAGA,IAAOS,EAAQ,CACb,OAAAR,EACA,WAAAC,EACA,UAAAC,EACA,WAAAC,EACA,UAAAC,EACA,eAAAC,EACA,QAAAC,EAEA,aAAA3C,CACF,EAGI,OAAO,OAAW,MACpB,QAAQ,IAAI,sCAAsC,EAClD,OAAO,UAAY,CACjB,OAAAqC,EACA,WAAAC,EACA,UAAAC,EACA,WAAAC,EACA,UAAAC,EACA,eAAAC,EACA,QAAAC,CACF,EACA,QAAQ,IAAI,iCAAiC,GAGxC,SAASG,GAAe,CACxBV,GACLA,EAAc,aAAa,CAC7B",
  "names": ["VNodeBuilder", "VNodeRenderer", "RenderEngine", "Hydrator", "VNodeRuntime", "app", "options", "target", "mode", "enableHotReload", "enablePerformanceTracking", "onError", "hasSSRContent", "error", "startTime", "context", "widgetTree", "vNodeBuilder", "c", "endTime", "hydrationData", "updateFn", "newVNode", "renderTime", "recordedTime", "widgetId", "stateObject", "originalSetState", "updater", "mq", "route", "element", "hydrationScript", "hasContent", "lastTime", "frames", "trackFPS", "currentTime", "fps", "metrics", "globalRuntime", "runApp", "getRuntime", "updateApp", "getMetrics", "hotReload", "renderToString", "hydrate", "rootElement", "runtime_index_default", "clearMetrics"]
}
