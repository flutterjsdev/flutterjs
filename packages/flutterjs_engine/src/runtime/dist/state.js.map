{
  "version": 3,
  "sources": ["../src/state.js"],
  "sourcesContent": ["/**\r\n * ============================================================================\r\n * Flutter-Style Typed State System\r\n * ============================================================================\r\n * \r\n * Implements State<T> pattern from Flutter where:\r\n * - State<MyHomePage> gives you access to this.widget as MyHomePage\r\n * - Automatic type inference through context\r\n * - Works just like Flutter without user-side workarounds\r\n * \r\n * USAGE:\r\n * class _MyHomePageState extends State {\r\n *   build(context) {\r\n *     return Text(this.widget.title);  // \u2705 this.widget is MyHomePage\r\n *   }\r\n * }\r\n */\r\n\r\nimport { UpdateBatcher } from \"./update_batcher.js\";\r\nimport { StateTracker } from \"./state_tracker.js\";\r\n\r\n// ============================================================================\r\n// STATE CLASS - WITH FLUTTER-STYLE GENERIC SUPPORT\r\n// ============================================================================\r\n\r\n/**\r\n * Base State class with generic widget type support\r\n * \r\n * In Flutter: class _MyState extends State<MyWidget>\r\n * In FlutterJS: class _MyState extends State\r\n * \r\n * The generic type is handled automatically through the widget-state connection\r\n */\r\nclass State {\r\n  constructor() {\r\n    // Internal references (set by framework)\r\n    this._element = null;           // Owning StatefulElement\r\n    this._widget = null;            // Current widget configuration - MUST BE SET\r\n    this._mounted = false;          // Is state mounted?\r\n    this._updateQueued = false;     // Update scheduled?\r\n    this._building = false;         // Currently building?\r\n\r\n    // Lifecycle tracking\r\n    this._initStateCalled = false;\r\n    this._disposeCalled = false;\r\n    this._didInitState = false;\r\n    this._didMount = false;\r\n    this._isActive = false;\r\n\r\n    // Performance tracking\r\n    this._buildCount = 0;\r\n    this._lastBuildTime = 0;\r\n  }\r\n\r\n  /**\r\n   * Build widget tree - MUST be implemented by subclass\r\n   * @param {BuildContext} context - Build context\r\n   * @returns {Widget} Widget tree\r\n   */\r\n  build(context) {\r\n    throw new Error(`${this.constructor.name}.build() must be implemented`);\r\n  }\r\n\r\n  // ============================================================================\r\n  // LIFECYCLE METHODS\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Called once when state is first created\r\n   * Override to initialize state\r\n   */\r\n  initState() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called when widget configuration changes\r\n   * @param {Widget} oldWidget - Previous widget\r\n   */\r\n  didUpdateWidget(oldWidget) {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called when inherited dependencies change\r\n   */\r\n  didChangeDependencies() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called when state is about to be permanently removed\r\n   * Override to cleanup resources (timers, listeners, etc.)\r\n   */\r\n  dispose() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called after first build completes\r\n   */\r\n  didMount() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called when state is reactivated (after deactivate)\r\n   */\r\n  activate() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called when state is deactivated (but not disposed)\r\n   */\r\n  deactivate() {\r\n    // Override in subclass\r\n  }\r\n\r\n  /**\r\n   * Called during hot reload\r\n   */\r\n  reassemble() {\r\n    // Override in subclass\r\n  }\r\n\r\n  // ============================================================================\r\n  // STATE UPDATE METHOD - FLUTTER API\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Update state and schedule rebuild\r\n   * @param {Function|Object} updateFn - Update function or object\r\n   */\r\n  setState(updateFn) {\r\n    // Check if mounted\r\n    if (!this.mounted) {\r\n      console.warn(`[State] setState called on unmounted state (${this.constructor.name})`);\r\n      return;\r\n    }\r\n\r\n    // Check if building\r\n    if (this._building) {\r\n      console.warn(`[State] setState called during build in ${this.constructor.name}`);\r\n    }\r\n\r\n    // Apply state update\r\n    if (typeof updateFn === 'function') {\r\n      try {\r\n        updateFn.call(this);\r\n      } catch (error) {\r\n        console.error(`[State] setState update function failed:`, error);\r\n        throw error;\r\n      }\r\n    } else if (typeof updateFn === 'object' && updateFn !== null) {\r\n      // Direct object merge\r\n      Object.assign(this, updateFn);\r\n    } else if (updateFn !== undefined && updateFn !== null) {\r\n      throw new Error('setState accepts function or object');\r\n    }\r\n\r\n    // Mark element for rebuild\r\n    // Mark element for rebuild\r\n    if (this._element && this._element.markNeedsBuild) {\r\n      console.log(`[State] setState calling markNeedsBuild on element: ${this.constructor.name}`);\r\n      this._element.markNeedsBuild();\r\n    } else {\r\n      console.error(`[State] setState failed: element or markNeedsBuild missing. Has element: ${!!this._element}`);\r\n    }\r\n  }\r\n\r\n  // ============================================================================\r\n  // FLUTTER-STYLE GETTERS\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Get BuildContext\r\n   * @returns {BuildContext|null}\r\n   */\r\n  get context() {\r\n    return this._element ? this._element.context : null;\r\n  }\r\n\r\n  /**\r\n   * Check if state is mounted\r\n   * @returns {boolean}\r\n   */\r\n  get mounted() {\r\n    return this._mounted && this._element && this._element._mounted;\r\n  }\r\n\r\n  /**\r\n   * \u2705 CRITICAL GETTER: Get current widget (typed as T in State<T>)\r\n   * This is THE key to accessing widget properties in Flutter style\r\n   * \r\n   * Example:\r\n   * class _MyState extends State {\r\n   *   build(context) {\r\n   *     return Text(this.widget.title);  // \u2705 Works!\r\n   *   }\r\n   * }\r\n   * \r\n   * @returns {StatefulWidget} The widget that created this state\r\n   */\r\n  get widget() {\r\n    if (!this._widget) {\r\n      // \u2705 FALLBACK: Try to get widget from element if not set\r\n      if (this._element && this._element.widget) {\r\n        console.warn(\r\n          `[State] this._widget was null, recovering from element. ` +\r\n          `This indicates _mount() was not called properly.`\r\n        );\r\n        this._widget = this._element.widget;\r\n      } else {\r\n        console.error(\r\n          `[State] Cannot access this.widget - state not properly mounted. ` +\r\n          `Element: ${!!this._element}, Element.widget: ${!!this._element?.widget}`\r\n        );\r\n        return null;\r\n      }\r\n    }\r\n    return this._widget;\r\n  }\r\n\r\n  /**\r\n   * Mark state as building\r\n   * @private\r\n   */\r\n  _markBuilding(building) {\r\n    this._building = building;\r\n  }\r\n\r\n  // ============================================================================\r\n  // INTERNAL LIFECYCLE METHODS - CALLED BY FRAMEWORK\r\n  // ============================================================================\r\n\r\n  /**\r\n   * \u2705 CRITICAL METHOD: Internal mount - called by StatefulElement.mount()\r\n   * This is where this._widget gets set!\r\n   * \r\n   * @param {StatefulElement} element - The element that owns this state\r\n   */\r\n  _mount(element) {\r\n    console.log('\uD83D\uDD27 State._mount() called for:', this.constructor.name);\r\n\r\n    if (this._mounted) {\r\n      console.warn('\u26A0\uFE0F State already mounted');\r\n      return;\r\n    }\r\n\r\n    // \u2705 SET THE ELEMENT REFERENCE\r\n    this._element = element;\r\n\r\n    // \u2705 CRITICAL: SET THE WIDGET REFERENCE\r\n    // This makes this.widget.title work!\r\n    this._widget = element.widget;\r\n\r\n    console.log('\u2705 State._mount() set widget:', {\r\n      widgetType: this._widget?.constructor?.name,\r\n      widgetTitle: this._widget?.title,\r\n      widgetProps: Object.keys(this._widget || {})\r\n    });\r\n\r\n    // \u2705 MARK AS MOUNTED\r\n    this._mounted = true;\r\n    this._isActive = true;\r\n\r\n    // Call initState if not already called\r\n    if (!this._didInitState) {\r\n      this._didInitState = true;\r\n      console.log('\uD83C\uDFAC Calling initState()');\r\n      try {\r\n        this.initState();\r\n      } catch (error) {\r\n        console.error(`[State] initState failed:`, error);\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    // Call didChangeDependencies\r\n    console.log('\uD83D\uDD17 Calling didChangeDependencies()');\r\n    try {\r\n      this.didChangeDependencies();\r\n    } catch (error) {\r\n      console.error(`[State] didChangeDependencies failed:`, error);\r\n    }\r\n\r\n    // Call didMount after first build\r\n    if (!this._didMount) {\r\n      this._didMount = true;\r\n      console.log('\uD83C\uDF89 Calling didMount()');\r\n      try {\r\n        this.didMount();\r\n      } catch (error) {\r\n        console.error(`[State] didMount failed:`, error);\r\n      }\r\n    }\r\n\r\n    console.log('\u2705 State._mount() complete');\r\n  }\r\n\r\n  /**\r\n   * Internal: Unmount the state\r\n   * Called by StatefulElement.unmount()\r\n   */\r\n  _unmount() {\r\n    if (!this._mounted) {\r\n      return;\r\n    }\r\n\r\n    this._isActive = false;\r\n    this._mounted = false;\r\n  }\r\n\r\n  /**\r\n   * Internal: Reactivate the state\r\n   */\r\n  _reactivate() {\r\n    if (this._isActive) {\r\n      return;\r\n    }\r\n\r\n    this._isActive = true;\r\n\r\n    try {\r\n      this.activate();\r\n    } catch (error) {\r\n      console.error(`[State] activate failed:`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal: Deactivate the state\r\n   */\r\n  _deactivate() {\r\n    if (!this._isActive) {\r\n      return;\r\n    }\r\n\r\n    this._isActive = false;\r\n\r\n    try {\r\n      this.deactivate();\r\n    } catch (error) {\r\n      console.error(`[State] deactivate failed:`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \u2705 CRITICAL METHOD: Update widget reference when widget rebuilds\r\n   * Called by StatefulElement.updateWidget()\r\n   * \r\n   * @param {Widget} newWidget - New widget configuration\r\n   */\r\n  _updateWidget(newWidget) {\r\n    console.log('\uD83D\uDD04 State._updateWidget() called');\r\n    console.log('  Old widget:', this._widget?.constructor?.name);\r\n    console.log('  New widget:', newWidget?.constructor?.name);\r\n\r\n    const oldWidget = this._widget;\r\n\r\n    // \u2705 UPDATE THE WIDGET REFERENCE\r\n    this._widget = newWidget;\r\n\r\n    // Call user's didUpdateWidget lifecycle\r\n    if (this.didUpdateWidget && typeof this.didUpdateWidget === 'function') {\r\n      try {\r\n        this.didUpdateWidget(oldWidget);\r\n      } catch (error) {\r\n        console.error(`[State] didUpdateWidget failed:`, error);\r\n      }\r\n    }\r\n\r\n    console.log('\u2705 Widget updated');\r\n  }\r\n\r\n  /**\r\n   * Internal: Dispose state\r\n   */\r\n  _dispose() {\r\n    if (this._disposeCalled) {\r\n      return;\r\n    }\r\n\r\n    this._disposeCalled = true;\r\n    this._mounted = false;\r\n    this._isActive = false;\r\n\r\n    try {\r\n      this.dispose();\r\n    } catch (error) {\r\n      console.error(`[State] dispose failed:`, error);\r\n    }\r\n\r\n    // Clear references\r\n    this._element = null;\r\n    this._widget = null;\r\n  }\r\n\r\n  /**\r\n   * Get state statistics\r\n   */\r\n  getStats() {\r\n    return {\r\n      mounted: this.mounted,\r\n      buildCount: this._buildCount,\r\n      lastBuildTime: this._lastBuildTime,\r\n      initStateCalled: this._initStateCalled,\r\n      disposeCalled: this._disposeCalled,\r\n      isActive: this._isActive,\r\n      hasWidget: !!this._widget,\r\n      widgetType: this._widget?.constructor?.name || 'none'\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// ENHANCED STATE WITH TYPE CHECKING (Optional)\r\n// ============================================================================\r\n\r\n/**\r\n * TypedState - Optional enhanced state with runtime type checking\r\n * \r\n * Usage:\r\n * class _MyState extends TypedState {\r\n *   static widgetType = MyHomePage;\r\n *   \r\n *   build(context) {\r\n *     // TypedState ensures this.widget is MyHomePage\r\n *     return Text(this.widget.title);\r\n *   }\r\n * }\r\n */\r\nclass TypedState extends State {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Override _mount to add type checking\r\n   */\r\n  _mount(element) {\r\n    // Call parent mount\r\n    super._mount(element);\r\n\r\n    // Optional: Check widget type matches\r\n    const expectedType = this.constructor.widgetType;\r\n    if (expectedType && !(this._widget instanceof expectedType)) {\r\n      console.warn(\r\n        `[TypedState] Type mismatch: expected ${expectedType.name}, ` +\r\n        `got ${this._widget?.constructor?.name}`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Type-safe widget getter with fallback\r\n   */\r\n  get widget() {\r\n    const widget = super.widget;\r\n\r\n    if (!widget) {\r\n      throw new Error(\r\n        `[TypedState] this.widget is null. State may not be properly mounted. ` +\r\n        `Ensure StatefulElement calls state._mount(this) during mount.`\r\n      );\r\n    }\r\n\r\n    return widget;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// CONTEXT BUILDER - PROVIDES WIDGET THROUGH CONTEXT\r\n// ============================================================================\r\n\r\n/**\r\n * Enhanced BuildContext that provides widget access\r\n */\r\nclass EnhancedBuildContext {\r\n  constructor(element, runtime, state = null) {\r\n    this._element = element;\r\n    this._runtime = runtime;\r\n    this._state = state;\r\n  }\r\n\r\n  /**\r\n   * Get the widget that created this context\r\n   * For StatefulWidgets, this is the StatefulWidget instance\r\n   */\r\n  get widget() {\r\n    if (this._state && this._state._widget) {\r\n      return this._state._widget;\r\n    }\r\n    return this._element?.widget || null;\r\n  }\r\n\r\n  /**\r\n   * Get the state object (if this is a StatefulWidget)\r\n   */\r\n  get state() {\r\n    return this._state;\r\n  }\r\n\r\n  /**\r\n   * Get the element\r\n   */\r\n  get element() {\r\n    return this._element;\r\n  }\r\n\r\n  /**\r\n   * Get the runtime\r\n   */\r\n  get runtime() {\r\n    return this._runtime;\r\n  }\r\n\r\n  /**\r\n   * Find ancestor widget of type T\r\n   */\r\n  findAncestorWidgetOfExactType(Type) {\r\n    let current = this._element?._parent;\r\n\r\n    while (current) {\r\n      if (current.widget instanceof Type) {\r\n        return current.widget;\r\n      }\r\n      current = current._parent;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Find ancestor state of type T\r\n   */\r\n  findAncestorStateOfType(Type) {\r\n    let current = this._element?._parent;\r\n\r\n    while (current) {\r\n      if (current.state && current.state instanceof Type) {\r\n        return current.state;\r\n      }\r\n      current = current._parent;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// STATE MANAGER - MANAGES STATE LIFECYCLE\r\n// ============================================================================\r\n\r\nclass StateManager {\r\n  constructor(runtime) {\r\n    this.runtime = runtime;\r\n\r\n    // State registry\r\n    this.states = new Map();              // stateId \u2192 state\r\n    this.stateElements = new WeakMap();   // state \u2192 element\r\n\r\n    // Update batching\r\n    this.updateBatcher = new UpdateBatcher(this);\r\n\r\n    // State tracking\r\n    this.stateTracker = new StateTracker();\r\n\r\n    // Configuration\r\n    this.config = {\r\n      enableBatching: true,\r\n      enableTracking: true,\r\n      warnOnSetStateDuringBuild: true,\r\n      debugMode: false\r\n    };\r\n\r\n    // Statistics\r\n    this.stats = {\r\n      statesCreated: 0,\r\n      statesDisposed: 0,\r\n      setStateCalls: 0,\r\n      batchedUpdates: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Register a state with proper widget linking\r\n   * @param {State} state - State to register\r\n   * @param {StatefulElement} element - Owning element\r\n   */\r\n  register(state, element) {\r\n    if (!state || !element) {\r\n      throw new Error('State and element are required');\r\n    }\r\n\r\n    const stateId = this.generateStateId(state);\r\n\r\n    this.states.set(stateId, state);\r\n    this.stateElements.set(state, element);\r\n\r\n    // \u2705 CRITICAL: Ensure widget reference is set\r\n    // This should be done in state._mount() but we double-check here\r\n    if (!state._widget && element.widget) {\r\n      console.warn(\r\n        `[StateManager] State widget not set, setting from element. ` +\r\n        `This indicates _mount() was not called.`\r\n      );\r\n      state._widget = element.widget;\r\n    }\r\n\r\n    this.stats.statesCreated++;\r\n\r\n    if (this.config.debugMode) {\r\n      console.log(`[StateManager] Registered state ${stateId}`);\r\n      console.log(`  Widget type: ${state._widget?.constructor?.name}`);\r\n      console.log(`  Widget props:`, Object.keys(state._widget || {}));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unregister a state\r\n   * @param {State} state - State to unregister\r\n   */\r\n  unregister(state) {\r\n    if (!state) {\r\n      return;\r\n    }\r\n\r\n    const stateId = this.generateStateId(state);\r\n\r\n    // Dispose state\r\n    if (!state._disposeCalled) {\r\n      state._dispose();\r\n    }\r\n\r\n    // Clear references\r\n    this.states.delete(stateId);\r\n    this.stateElements.delete(state);\r\n\r\n    state._element = null;\r\n    state._widget = null;\r\n\r\n    this.stats.statesDisposed++;\r\n\r\n    if (this.config.debugMode) {\r\n      console.log(`[StateManager] Unregistered state ${stateId}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle setState call\r\n   * @param {State} state - State being updated\r\n   * @param {Function} updateFn - Update function\r\n   */\r\n  handleSetState(state, updateFn) {\r\n    if (!state || !state.mounted) {\r\n      return;\r\n    }\r\n\r\n    this.stats.setStateCalls++;\r\n\r\n    if (this.config.enableBatching) {\r\n      this.updateBatcher.queueUpdate(state._element, updateFn);\r\n    } else {\r\n      // Immediate update\r\n      updateFn();\r\n      state._element.markNeedsBuild();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate unique state ID\r\n   */\r\n  generateStateId(state) {\r\n    if (!state._stateId) {\r\n      state._stateId = `state_${++StateManager._stateIdCounter}`;\r\n    }\r\n    return state._stateId;\r\n  }\r\n\r\n  /**\r\n   * Get element for state\r\n   */\r\n  getElement(state) {\r\n    return this.stateElements.get(state);\r\n  }\r\n\r\n  /**\r\n   * Get statistics\r\n   */\r\n  getStats() {\r\n    return {\r\n      ...this.stats,\r\n      currentStates: this.states.size,\r\n      batcher: this.updateBatcher.getStats(),\r\n      tracker: this.stateTracker.getStats()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Clear all states\r\n   */\r\n  clear() {\r\n    this.states.forEach(state => {\r\n      if (!state._disposeCalled) {\r\n        state._dispose();\r\n      }\r\n    });\r\n\r\n    this.states.clear();\r\n    this.updateBatcher.clear();\r\n    this.stateTracker.clear();\r\n  }\r\n\r\n  /**\r\n   * Dispose state manager\r\n   */\r\n  dispose() {\r\n    this.clear();\r\n  }\r\n}\r\n\r\nStateManager._stateIdCounter = 0;\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport {\r\n  State,\r\n  TypedState,\r\n  StateManager,\r\n  EnhancedBuildContext,\r\n};"],
  "mappings": "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",
  "names": ["UpdateBatcher", "StateTracker", "State", "context", "oldWidget", "updateFn", "error", "building", "element", "newWidget", "TypedState", "expectedType", "widget", "EnhancedBuildContext", "runtime", "state", "Type", "current", "StateManager", "stateId"]
}
