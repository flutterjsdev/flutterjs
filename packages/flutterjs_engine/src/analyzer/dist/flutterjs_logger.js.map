{
  "version": 3,
  "sources": ["../src/flutterjs_logger.js"],
  "sourcesContent": ["/**\n * FlutterJS Logger - Centralized Debug Output System\n * \n * Instead of console.log() everywhere, use this logger to:\n * - Write debug logs to a file (.debug folder)\n * - Maintain clean console output\n * - Enable/disable debug modes per component\n * - Group related logs together\n * - Support multiple log levels\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\nclass Logger {\n  constructor(options = {}) {\n    this.options = {\n      debugDir: '.debug',\n      enabled: true,\n      level: 'info',  // 'error', 'warn', 'info', 'debug', 'trace'\n      writeToFile: true,\n      writeToConsole: false,  // Set to true only for critical errors\n      includeTimestamp: true,\n      includeStackTrace: false,\n      maxFileSize: 10 * 1024 * 1024,  // 10MB\n      ...options,\n    };\n\n    this.logLevels = {\n      'error': 0,\n      'warn': 1,\n      'info': 2,\n      'debug': 3,\n      'trace': 4,\n    };\n\n    this.currentLevel = this.logLevels[this.options.level];\n    this.logs = [];\n    this.logSessions = {};\n    this.indentLevel = 0;\n\n    // Ensure debug directory exists\n    if (this.options.writeToFile) {\n      this.ensureDebugDir();\n    }\n  }\n\n  /**\n   * Ensure .debug directory exists\n   */\n  ensureDebugDir() {\n    if (!fs.existsSync(this.options.debugDir)) {\n      fs.mkdirSync(this.options.debugDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Get file path for a specific component\n   */\n  getLogFilePath(component = 'general') {\n    return path.join(this.options.debugDir, `${component}.log`);\n  }\n\n  /**\n   * Check if log level should be written\n   */\n  shouldLog(level) {\n    return this.logLevels[level] <= this.currentLevel;\n  }\n\n  /**\n   * Format log entry\n   */\n  formatEntry(level, component, message, data = null) {\n    const timestamp = this.options.includeTimestamp\n      ? new Date().toISOString()\n      : '';\n\n    const indent = '  '.repeat(this.indentLevel);\n    const levelStr = level.toUpperCase().padEnd(5);\n    const componentStr = component.padEnd(20);\n\n    let entry = `${timestamp} [${levelStr}] [${componentStr}] ${indent}${message}`;\n\n    if (data) {\n      entry += '\\n' + indent + JSON.stringify(data, null, 2);\n    }\n\n    return entry;\n  }\n\n  /**\n   * Internal write method\n   */\n  write(level, component, message, data) {\n    if (!this.shouldLog(level)) return;\n\n    const entry = this.formatEntry(level, component, message, data);\n    this.logs.push(entry);\n\n    // Write to console if enabled (only for critical messages)\n    if (this.options.writeToConsole && level === 'error') {\n      console.error(`${component}: ${message}`, data || '');\n    }\n\n    // Write to file\n    if (this.options.writeToFile) {\n      this.writeToFile(component, entry);\n    }\n  }\n\n  /**\n   * Write entry to file\n   */\n  writeToFile(component, entry) {\n    try {\n      const filePath = this.getLogFilePath(component);\n      fs.appendFileSync(filePath, entry + '\\n', 'utf-8');\n\n      // Check file size and rotate if needed\n      const stats = fs.statSync(filePath);\n      if (stats.size > this.options.maxFileSize) {\n        this.rotateLogFile(filePath);\n      }\n    } catch (error) {\n      console.error(`Logger failed to write to ${component}: ${error.message}`);\n    }\n  }\n\n  /**\n   * Rotate log file when it gets too large\n   */\n  rotateLogFile(filePath) {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const backupPath = filePath.replace('.log', `.${timestamp}.log`);\n    fs.renameSync(filePath, backupPath);\n  }\n\n  // =========================================================================\n  // PUBLIC API\n  // =========================================================================\n\n  /**\n   * Start a named session (group of related logs)\n   */\n  startSession(name, component = 'general') {\n    this.logSessions[name] = {\n      component,\n      startTime: Date.now(),\n      startIndent: this.indentLevel,\n    };\n    this.indent();\n    this.info(component, `\u25BA START SESSION: ${name}`);\n  }\n\n  /**\n   * End a named session\n   */\n  endSession(name, component = 'general') {\n    if (this.logSessions[name]) {\n      const duration = Date.now() - this.logSessions[name].startTime;\n      this.info(component, `\u25C4 END SESSION: ${name} (${duration}ms)`);\n      this.unindent();\n      delete this.logSessions[name];\n    }\n  }\n\n  /**\n   * Increase indent level\n   */\n  indent() {\n    this.indentLevel++;\n  }\n\n  /**\n   * Decrease indent level\n   */\n  unindent() {\n    this.indentLevel = Math.max(0, this.indentLevel - 1);\n  }\n\n  /**\n   * Error level\n   */\n  error(component, message, data) {\n    this.write('error', component, message, data);\n  }\n\n  /**\n   * Warning level\n   */\n  warn(component, message, data) {\n    this.write('warn', component, message, data);\n  }\n\n  /**\n   * Info level\n   */\n  info(component, message, data) {\n    this.write('info', component, message, data);\n  }\n\n  /**\n   * Debug level\n   */\n  debug(component, message, data) {\n    this.write('debug', component, message, data);\n  }\n\n  /**\n   * Trace level (most verbose)\n   */\n  trace(component, message, data) {\n    this.write('trace', component, message, data);\n  }\n\n  /**\n   * Log a method entry/exit pair\n   */\n  methodEntry(component, methodName, params = null) {\n    this.indent();\n    this.trace(component, `\u2192 ${methodName}()`, params);\n  }\n\n  /**\n   * Log method exit\n   */\n  methodExit(component, methodName, result = null) {\n    this.trace(component, `\u2190 ${methodName}()`, result);\n    this.unindent();\n  }\n\n  /**\n   * Log a successful step\n   */\n  success(component, message, data) {\n    this.write('info', component, `\u2713 ${message}`, data);\n  }\n\n  /**\n   * Log a failure\n   */\n  failure(component, message, error) {\n    this.write('error', component, `\u2717 ${message}`, error);\n  }\n\n  /**\n   * Log a step count (e.g., \"Found 5 widgets\")\n   */\n  count(component, label, count) {\n    this.write('info', component, `${label}: ${count}`);\n  }\n\n  /**\n   * Create a scoped logger for a specific component\n   */\n  createComponentLogger(componentName) {\n    return {\n      error: (msg, data) => this.error(componentName, msg, data),\n      warn: (msg, data) => this.warn(componentName, msg, data),\n      info: (msg, data) => this.info(componentName, msg, data),\n      debug: (msg, data) => this.debug(componentName, msg, data),\n      trace: (msg, data) => this.trace(componentName, msg, data),\n      success: (msg, data) => this.success(componentName, msg, data),\n      failure: (msg, err) => this.failure(componentName, msg, err),\n      methodEntry: (method, params) => this.methodEntry(componentName, method, params),\n      methodExit: (method, result) => this.methodExit(componentName, method, result),\n      startSession: (name) => this.startSession(name, componentName),\n      endSession: (name) => this.endSession(name, componentName),\n      indent: () => this.indent(),\n      unindent: () => this.unindent(),\n    };\n  }\n\n  /**\n   * Get all logs as a single string\n   */\n  getAllLogs() {\n    return this.logs.join('\\n');\n  }\n\n  /**\n   * Save all logs to files\n   */\n  saveLogs() {\n    try {\n      const allLogsPath = path.join(this.options.debugDir, '_all.log');\n      fs.writeFileSync(allLogsPath, this.getAllLogs(), 'utf-8');\n      return allLogsPath;\n    } catch (error) {\n      console.error('Failed to save logs:', error.message);\n      return null;\n    }\n  }\n\n  /**\n   * Clear debug directory\n   */\n  clearDebugDir() {\n    try {\n      if (fs.existsSync(this.options.debugDir)) {\n        fs.rmSync(this.options.debugDir, { recursive: true, force: true });\n        this.ensureDebugDir();\n      }\n    } catch (error) {\n      console.error('Failed to clear debug directory:', error.message);\n    }\n  }\n\n  /**\n   * Read all debug files and return as object\n   */\n  readDebugFiles() {\n    const files = {};\n    try {\n      const entries = fs.readdirSync(this.options.debugDir);\n      entries.forEach((file) => {\n        if (file.endsWith('.log')) {\n          const filePath = path.join(this.options.debugDir, file);\n          files[file] = fs.readFileSync(filePath, 'utf-8');\n        }\n      });\n    } catch (error) {\n      console.error('Failed to read debug files:', error.message);\n    }\n    return files;\n  }\n\n  /**\n   * Get analysis report of logs (counts, errors, warnings, etc.)\n   */\n  getReport() {\n    const report = {\n      totalEntries: this.logs.length,\n      errors: 0,\n      warnings: 0,\n      info: 0,\n      debug: 0,\n      trace: 0,\n      sessions: Object.keys(this.logSessions).length,\n      debugFiles: [],\n    };\n\n    this.logs.forEach((log) => {\n      if (log.includes('[ERROR]')) report.errors++;\n      else if (log.includes('[WARN]')) report.warnings++;\n      else if (log.includes('[INFO]')) report.info++;\n      else if (log.includes('[DEBUG]')) report.debug++;\n      else if (log.includes('[TRACE]')) report.trace++;\n    });\n\n    try {\n      report.debugFiles = fs.readdirSync(this.options.debugDir)\n        .filter((f) => f.endsWith('.log'));\n    } catch (error) {\n      // Ignore\n    }\n\n    return report;\n  }\n}\n\n/**\n * Global singleton logger instance\n */\nlet globalLogger = null;\n\nexport function initLogger(options = {}) {\n  globalLogger = new Logger(options);\n  return globalLogger;\n}\n\nexport function getLogger() {\n  if (!globalLogger) {\n    globalLogger = new Logger();\n  }\n  return globalLogger;\n}\n\nexport { Logger };\n"],
  "mappings": "AAWA,OAAOA,MAAQ,KACf,OAAOC,MAAU,OAEjB,MAAMC,CAAO,CACX,YAAYC,EAAU,CAAC,EAAG,CACxB,KAAK,QAAU,CACb,SAAU,SACV,QAAS,GACT,MAAO,OACP,YAAa,GACb,eAAgB,GAChB,iBAAkB,GAClB,kBAAmB,GACnB,YAAa,GAAK,KAAO,KACzB,GAAGA,CACL,EAEA,KAAK,UAAY,CACf,MAAS,EACT,KAAQ,EACR,KAAQ,EACR,MAAS,EACT,MAAS,CACX,EAEA,KAAK,aAAe,KAAK,UAAU,KAAK,QAAQ,KAAK,EACrD,KAAK,KAAO,CAAC,EACb,KAAK,YAAc,CAAC,EACpB,KAAK,YAAc,EAGf,KAAK,QAAQ,aACf,KAAK,eAAe,CAExB,CAKA,gBAAiB,CACVH,EAAG,WAAW,KAAK,QAAQ,QAAQ,GACtCA,EAAG,UAAU,KAAK,QAAQ,SAAU,CAAE,UAAW,EAAK,CAAC,CAE3D,CAKA,eAAeI,EAAY,UAAW,CACpC,OAAOH,EAAK,KAAK,KAAK,QAAQ,SAAU,GAAGG,CAAS,MAAM,CAC5D,CAKA,UAAUC,EAAO,CACf,OAAO,KAAK,UAAUA,CAAK,GAAK,KAAK,YACvC,CAKA,YAAYA,EAAOD,EAAWE,EAASC,EAAO,KAAM,CAClD,MAAMC,EAAY,KAAK,QAAQ,iBAC3B,IAAI,KAAK,EAAE,YAAY,EACvB,GAEEC,EAAS,KAAK,OAAO,KAAK,WAAW,EACrCC,EAAWL,EAAM,YAAY,EAAE,OAAO,CAAC,EACvCM,EAAeP,EAAU,OAAO,EAAE,EAExC,IAAIQ,EAAQ,GAAGJ,CAAS,KAAKE,CAAQ,MAAMC,CAAY,KAAKF,CAAM,GAAGH,CAAO,GAE5E,OAAIC,IACFK,GAAS;AAAA,EAAOH,EAAS,KAAK,UAAUF,EAAM,KAAM,CAAC,GAGhDK,CACT,CAKA,MAAMP,EAAOD,EAAWE,EAASC,EAAM,CACrC,GAAI,CAAC,KAAK,UAAUF,CAAK,EAAG,OAE5B,MAAMO,EAAQ,KAAK,YAAYP,EAAOD,EAAWE,EAASC,CAAI,EAC9D,KAAK,KAAK,KAAKK,CAAK,EAGhB,KAAK,QAAQ,gBAAkBP,IAAU,SAC3C,QAAQ,MAAM,GAAGD,CAAS,KAAKE,CAAO,GAAIC,GAAQ,EAAE,EAIlD,KAAK,QAAQ,aACf,KAAK,YAAYH,EAAWQ,CAAK,CAErC,CAKA,YAAYR,EAAWQ,EAAO,CAC5B,GAAI,CACF,MAAMC,EAAW,KAAK,eAAeT,CAAS,EAC9CJ,EAAG,eAAea,EAAUD,EAAQ;AAAA,EAAM,OAAO,EAGnCZ,EAAG,SAASa,CAAQ,EACxB,KAAO,KAAK,QAAQ,aAC5B,KAAK,cAAcA,CAAQ,CAE/B,OAASC,EAAO,CACd,QAAQ,MAAM,6BAA6BV,CAAS,KAAKU,EAAM,OAAO,EAAE,CAC1E,CACF,CAKA,cAAcD,EAAU,CACtB,MAAML,EAAY,IAAI,KAAK,EAAE,YAAY,EAAE,QAAQ,QAAS,GAAG,EACzDO,EAAaF,EAAS,QAAQ,OAAQ,IAAIL,CAAS,MAAM,EAC/DR,EAAG,WAAWa,EAAUE,CAAU,CACpC,CASA,aAAaC,EAAMZ,EAAY,UAAW,CACxC,KAAK,YAAYY,CAAI,EAAI,CACvB,UAAAZ,EACA,UAAW,KAAK,IAAI,EACpB,YAAa,KAAK,WACpB,EACA,KAAK,OAAO,EACZ,KAAK,KAAKA,EAAW,yBAAoBY,CAAI,EAAE,CACjD,CAKA,WAAWA,EAAMZ,EAAY,UAAW,CACtC,GAAI,KAAK,YAAYY,CAAI,EAAG,CAC1B,MAAMC,EAAW,KAAK,IAAI,EAAI,KAAK,YAAYD,CAAI,EAAE,UACrD,KAAK,KAAKZ,EAAW,uBAAkBY,CAAI,KAAKC,CAAQ,KAAK,EAC7D,KAAK,SAAS,EACd,OAAO,KAAK,YAAYD,CAAI,CAC9B,CACF,CAKA,QAAS,CACP,KAAK,aACP,CAKA,UAAW,CACT,KAAK,YAAc,KAAK,IAAI,EAAG,KAAK,YAAc,CAAC,CACrD,CAKA,MAAMZ,EAAWE,EAASC,EAAM,CAC9B,KAAK,MAAM,QAASH,EAAWE,EAASC,CAAI,CAC9C,CAKA,KAAKH,EAAWE,EAASC,EAAM,CAC7B,KAAK,MAAM,OAAQH,EAAWE,EAASC,CAAI,CAC7C,CAKA,KAAKH,EAAWE,EAASC,EAAM,CAC7B,KAAK,MAAM,OAAQH,EAAWE,EAASC,CAAI,CAC7C,CAKA,MAAMH,EAAWE,EAASC,EAAM,CAC9B,KAAK,MAAM,QAASH,EAAWE,EAASC,CAAI,CAC9C,CAKA,MAAMH,EAAWE,EAASC,EAAM,CAC9B,KAAK,MAAM,QAASH,EAAWE,EAASC,CAAI,CAC9C,CAKA,YAAYH,EAAWc,EAAYC,EAAS,KAAM,CAChD,KAAK,OAAO,EACZ,KAAK,MAAMf,EAAW,UAAKc,CAAU,KAAMC,CAAM,CACnD,CAKA,WAAWf,EAAWc,EAAYE,EAAS,KAAM,CAC/C,KAAK,MAAMhB,EAAW,UAAKc,CAAU,KAAME,CAAM,EACjD,KAAK,SAAS,CAChB,CAKA,QAAQhB,EAAWE,EAASC,EAAM,CAChC,KAAK,MAAM,OAAQH,EAAW,UAAKE,CAAO,GAAIC,CAAI,CACpD,CAKA,QAAQH,EAAWE,EAASQ,EAAO,CACjC,KAAK,MAAM,QAASV,EAAW,UAAKE,CAAO,GAAIQ,CAAK,CACtD,CAKA,MAAMV,EAAWiB,EAAOC,EAAO,CAC7B,KAAK,MAAM,OAAQlB,EAAW,GAAGiB,CAAK,KAAKC,CAAK,EAAE,CACpD,CAKA,sBAAsBC,EAAe,CACnC,MAAO,CACL,MAAO,CAACC,EAAKjB,IAAS,KAAK,MAAMgB,EAAeC,EAAKjB,CAAI,EACzD,KAAM,CAACiB,EAAKjB,IAAS,KAAK,KAAKgB,EAAeC,EAAKjB,CAAI,EACvD,KAAM,CAACiB,EAAKjB,IAAS,KAAK,KAAKgB,EAAeC,EAAKjB,CAAI,EACvD,MAAO,CAACiB,EAAKjB,IAAS,KAAK,MAAMgB,EAAeC,EAAKjB,CAAI,EACzD,MAAO,CAACiB,EAAKjB,IAAS,KAAK,MAAMgB,EAAeC,EAAKjB,CAAI,EACzD,QAAS,CAACiB,EAAKjB,IAAS,KAAK,QAAQgB,EAAeC,EAAKjB,CAAI,EAC7D,QAAS,CAACiB,EAAKC,IAAQ,KAAK,QAAQF,EAAeC,EAAKC,CAAG,EAC3D,YAAa,CAACC,EAAQP,IAAW,KAAK,YAAYI,EAAeG,EAAQP,CAAM,EAC/E,WAAY,CAACO,EAAQN,IAAW,KAAK,WAAWG,EAAeG,EAAQN,CAAM,EAC7E,aAAeJ,GAAS,KAAK,aAAaA,EAAMO,CAAa,EAC7D,WAAaP,GAAS,KAAK,WAAWA,EAAMO,CAAa,EACzD,OAAQ,IAAM,KAAK,OAAO,EAC1B,SAAU,IAAM,KAAK,SAAS,CAChC,CACF,CAKA,YAAa,CACX,OAAO,KAAK,KAAK,KAAK;AAAA,CAAI,CAC5B,CAKA,UAAW,CACT,GAAI,CACF,MAAMI,EAAc1B,EAAK,KAAK,KAAK,QAAQ,SAAU,UAAU,EAC/D,OAAAD,EAAG,cAAc2B,EAAa,KAAK,WAAW,EAAG,OAAO,EACjDA,CACT,OAASb,EAAO,CACd,eAAQ,MAAM,uBAAwBA,EAAM,OAAO,EAC5C,IACT,CACF,CAKA,eAAgB,CACd,GAAI,CACEd,EAAG,WAAW,KAAK,QAAQ,QAAQ,IACrCA,EAAG,OAAO,KAAK,QAAQ,SAAU,CAAE,UAAW,GAAM,MAAO,EAAK,CAAC,EACjE,KAAK,eAAe,EAExB,OAASc,EAAO,CACd,QAAQ,MAAM,mCAAoCA,EAAM,OAAO,CACjE,CACF,CAKA,gBAAiB,CACf,MAAMc,EAAQ,CAAC,EACf,GAAI,CACc5B,EAAG,YAAY,KAAK,QAAQ,QAAQ,EAC5C,QAAS6B,GAAS,CACxB,GAAIA,EAAK,SAAS,MAAM,EAAG,CACzB,MAAMhB,EAAWZ,EAAK,KAAK,KAAK,QAAQ,SAAU4B,CAAI,EACtDD,EAAMC,CAAI,EAAI7B,EAAG,aAAaa,EAAU,OAAO,CACjD,CACF,CAAC,CACH,OAASC,EAAO,CACd,QAAQ,MAAM,8BAA+BA,EAAM,OAAO,CAC5D,CACA,OAAOc,CACT,CAKA,WAAY,CACV,MAAME,EAAS,CACb,aAAc,KAAK,KAAK,OACxB,OAAQ,EACR,SAAU,EACV,KAAM,EACN,MAAO,EACP,MAAO,EACP,SAAU,OAAO,KAAK,KAAK,WAAW,EAAE,OACxC,WAAY,CAAC,CACf,EAEA,KAAK,KAAK,QAASC,GAAQ,CACrBA,EAAI,SAAS,SAAS,EAAGD,EAAO,SAC3BC,EAAI,SAAS,QAAQ,EAAGD,EAAO,WAC/BC,EAAI,SAAS,QAAQ,EAAGD,EAAO,OAC/BC,EAAI,SAAS,SAAS,EAAGD,EAAO,QAChCC,EAAI,SAAS,SAAS,GAAGD,EAAO,OAC3C,CAAC,EAED,GAAI,CACFA,EAAO,WAAa9B,EAAG,YAAY,KAAK,QAAQ,QAAQ,EACrD,OAAQgC,GAAMA,EAAE,SAAS,MAAM,CAAC,CACrC,MAAgB,CAEhB,CAEA,OAAOF,CACT,CACF,CAKA,IAAIG,EAAe,KAEZ,SAASC,EAAW/B,EAAU,CAAC,EAAG,CACvC,OAAA8B,EAAe,IAAI/B,EAAOC,CAAO,EAC1B8B,CACT,CAEO,SAASE,GAAY,CAC1B,OAAKF,IACHA,EAAe,IAAI/B,GAEd+B,CACT",
  "names": ["fs", "path", "Logger", "options", "component", "level", "message", "data", "timestamp", "indent", "levelStr", "componentStr", "entry", "filePath", "error", "backupPath", "name", "duration", "methodName", "params", "result", "label", "count", "componentName", "msg", "err", "method", "allLogsPath", "files", "file", "report", "log", "f", "globalLogger", "initLogger", "getLogger"]
}
