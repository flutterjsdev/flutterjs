{
  "version": 3,
  "sources": ["../src/flutter_import_resolver.js", "../src/analyzer.js", "../src/lexer.js", "../src/flutterjs_logger.js", "../src/flutterjs_parser.js", "../src/flutterjs_widget_analyzer.js", "../src/state_analyzer_implementation.js", "../src/context_analyzer_data.js", "../src/context_analyzer.js", "../src/ssr_analyzer.js", "../src/flutterjs_report_generator.js", "../src/flutter_resolver_config.js"],
  "sourcesContent": ["/**\n * Advanced Import Resolver for Flutter.js Framework\n * \n * Resolution Chain:\n * 1. Check framework package mappings (@package:)\n * 2. Check local project code (./src, ./lib, etc.)\n * 3. Check package cache (future: npm_modules, pub_cache, etc.)\n * 4. Return error if not found\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\nclass ImportResolver {\n  constructor(options = {}) {\n    this.options = {\n      projectRoot: process.cwd(),\n      frameworkType: 'flutter-js',\n      ignoreUnresolved: false,        // Fail on missing imports\n      cacheEnabled: false,            // Enable package cache checking\n      ...options,\n    };\n\n    // Framework package mappings\n    this.frameworkPackages = {\n      '@package:flutter': 'flutter-js-framework/core',\n      '@package:material': 'flutter-js-framework/material',\n      '@package:cupertino': 'flutter-js-framework/cupertino',\n      '@package:foundation': 'flutter-js-framework/foundation',\n      '@package:widgets': 'flutter-js-framework/widgets',\n      '@package:painting': 'flutter-js-framework/painting',\n      '@package:rendering': 'flutter-js-framework/rendering',\n      '@package:animation': 'flutter-js-framework/animation',\n    };\n\n    // User-defined custom package mappings\n    this.customPackageMappings = {};\n\n    // Resolution cache\n    this.resolvedCache = new Map();\n    this.unresolvedCache = new Map();\n\n    // Local search paths (where to look for local code)\n    this.localSearchPaths = [\n      'src',\n      'lib',\n      'packages',\n      'modules',\n      '.',\n    ];\n\n    this.results = {\n      resolved: [],\n      unresolved: [],\n      errors: [],\n    };\n  }\n\n  /**\n   * Main resolution entry point\n   * Tries multiple fallback locations\n   */\n  resolve(importPath, importedItems = [], options = {}) {\n    // Check cache first\n    const cacheKey = `${importPath}:${JSON.stringify(importedItems)}`;\n    if (this.resolvedCache.has(cacheKey)) {\n      return this.resolvedCache.get(cacheKey);\n    }\n    if (this.unresolvedCache.has(cacheKey)) {\n      return this.unresolvedCache.get(cacheKey);\n    }\n\n    const result = {\n      original: importPath,\n      items: importedItems,\n      resolved: null,\n      actualPath: null,\n      type: null,\n      source: null,        // Where it was found: 'framework', 'local', 'cache', 'error'\n      isValid: false,\n      reason: null,\n      fallbacks: [],       // Track what was tried\n    };\n\n    // STEP 1: Check if it's a framework package (@package:)\n    if (importPath.startsWith('@package:')) {\n      const stepResult = this.resolveFrameworkPackage(importPath, importedItems);\n      if (stepResult.isValid) {\n        result.resolved = stepResult.resolved;\n        result.actualPath = stepResult.actualPath;\n        result.type = 'framework';\n        result.source = 'framework';\n        result.isValid = true;\n        result.reason = 'Resolved from framework mappings';\n        this.resolvedCache.set(cacheKey, result);\n        this.results.resolved.push(result);\n        return result;\n      }\n      result.fallbacks.push({\n        step: 1,\n        tried: 'framework-package',\n        found: false,\n        reason: stepResult.reason,\n      });\n    }\n\n    // STEP 2: Check local project code\n    if (!importPath.startsWith('@')) {\n      const stepResult = this.resolveLocalImport(importPath, importedItems);\n      if (stepResult.isValid) {\n        result.resolved = stepResult.resolved;\n        result.actualPath = stepResult.actualPath;\n        result.type = 'local';\n        result.source = 'local';\n        result.isValid = true;\n        result.reason = `Found in local project at ${stepResult.actualPath}`;\n        this.resolvedCache.set(cacheKey, result);\n        this.results.resolved.push(result);\n        return result;\n      }\n      result.fallbacks.push({\n        step: 2,\n        tried: 'local-code',\n        locations: stepResult.searchedLocations,\n        found: false,\n        reason: stepResult.reason,\n      });\n    }\n\n    // STEP 3: Check package cache (future feature)\n    if (this.options.cacheEnabled) {\n      const stepResult = this.resolveFromCache(importPath, importedItems);\n      if (stepResult.isValid) {\n        result.resolved = stepResult.resolved;\n        result.actualPath = stepResult.actualPath;\n        result.type = 'cache';\n        result.source = 'cache';\n        result.isValid = true;\n        result.reason = `Found in package cache at ${stepResult.actualPath}`;\n        this.resolvedCache.set(cacheKey, result);\n        this.results.resolved.push(result);\n        return result;\n      }\n      result.fallbacks.push({\n        step: 3,\n        tried: 'package-cache',\n        found: false,\n        reason: stepResult.reason,\n      });\n    }\n\n    // STEP 4: Not found - return error\n    result.isValid = false;\n    result.source = 'error';\n    result.reason = this.generateErrorMessage(importPath, result.fallbacks);\n\n    if (!this.options.ignoreUnresolved) {\n      this.results.errors.push(result);\n    }\n    this.unresolvedCache.set(cacheKey, result);\n    this.results.unresolved.push(result);\n\n    return result;\n  }\n\n  /**\n   * STEP 1: Resolve @package: framework imports\n   */\n  resolveFrameworkPackage(importPath, importedItems) {\n    // Check framework packages\n    if (this.frameworkPackages[importPath]) {\n      return {\n        isValid: true,\n        resolved: this.frameworkPackages[importPath],\n        actualPath: this.frameworkPackages[importPath],\n        reason: 'Found in framework package mappings',\n      };\n    }\n\n    // Check custom mappings\n    if (this.customPackageMappings[importPath]) {\n      return {\n        isValid: true,\n        resolved: this.customPackageMappings[importPath],\n        actualPath: this.customPackageMappings[importPath],\n        reason: 'Found in custom package mappings',\n      };\n    }\n\n    return {\n      isValid: false,\n      reason: `Framework package \"${importPath}\" not found in mappings`,\n    };\n  }\n\n  /**\n   * STEP 2: Resolve local imports (./src/*, ./lib/*, etc.)\n   * Tries multiple locations in project\n   */\n  resolveLocalImport(importPath, importedItems) {\n    const searchedLocations = [];\n\n    // For relative imports (./src/components)\n    if (importPath.startsWith('./') || importPath.startsWith('../')) {\n      const fullPath = path.resolve(this.options.projectRoot, importPath);\n      searchedLocations.push(fullPath);\n\n      if (this.fileExists(fullPath)) {\n        return {\n          isValid: true,\n          resolved: importPath,\n          actualPath: fullPath,\n          reason: 'Relative import found',\n        };\n      }\n\n      // Try with .js extension\n      if (this.fileExists(`${fullPath}.js`)) {\n        return {\n          isValid: true,\n          resolved: importPath,\n          actualPath: `${fullPath}.js`,\n          reason: 'Relative import found (with .js)',\n        };\n      }\n\n      return {\n        isValid: false,\n        searchedLocations,\n        reason: `Relative import not found: ${importPath}`,\n      };\n    }\n\n    // For absolute imports (components/Button)\n    // Search in local paths: src/, lib/, packages/, etc.\n    for (const searchPath of this.localSearchPaths) {\n      const fullPath = path.resolve(\n        this.options.projectRoot,\n        searchPath,\n        importPath\n      );\n      searchedLocations.push(fullPath);\n\n      // Try as directory/index.js\n      const indexPath = path.join(fullPath, 'index.js');\n      if (this.fileExists(indexPath)) {\n        return {\n          isValid: true,\n          resolved: importPath,\n          actualPath: indexPath,\n          reason: `Found in ${searchPath}/${importPath}/index.js`,\n        };\n      }\n\n      // Try as file.js\n      if (this.fileExists(`${fullPath}.js`)) {\n        return {\n          isValid: true,\n          resolved: importPath,\n          actualPath: `${fullPath}.js`,\n          reason: `Found in ${searchPath}/${importPath}.js`,\n        };\n      }\n\n      // Try as .fjs (Flutter.js file)\n      if (this.fileExists(`${fullPath}.fjs`)) {\n        return {\n          isValid: true,\n          resolved: importPath,\n          actualPath: `${fullPath}.fjs`,\n          reason: `Found in ${searchPath}/${importPath}.fjs`,\n        };\n      }\n    }\n\n    return {\n      isValid: false,\n      searchedLocations,\n      reason: `Local import not found in: ${this.localSearchPaths.join(', ')}`,\n    };\n  }\n\n  /**\n   * STEP 3: Resolve from package cache (future implementation)\n   * Can check: node_modules/, pub_cache/, etc.\n   */\n  resolveFromCache(importPath, importedItems) {\n    // TODO: Implement package cache checking\n    // For now, just return not found\n    return {\n      isValid: false,\n      reason: 'Package cache resolution not yet implemented',\n    };\n  }\n\n  /**\n   * Check if file exists\n   */\n  fileExists(filePath) {\n    try {\n      return fs.existsSync(filePath);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Generate helpful error message showing what was tried\n   */\n  generateErrorMessage(importPath, fallbacks) {\n    let message = `\u274C Import not found: \"${importPath}\"\\n\\nResolution chain:\\n`;\n\n    fallbacks.forEach((step) => {\n      message += `  ${step.step}. Checked ${step.tried}: NOT FOUND\\n`;\n\n      if (step.locations) {\n        message += `     Locations searched:\\n`;\n        step.locations.forEach((loc) => {\n          message += `       - ${loc}\\n`;\n        });\n      }\n\n      if (step.reason) {\n        message += `     (${step.reason})\\n`;\n      }\n    });\n\n    message += `\\nSuggestions:\\n`;\n    message += `  \u2022 Verify the import path is correct\\n`;\n    message += `  \u2022 Check that the file exists in your project\\n`;\n    message += `  \u2022 Add a custom package mapping if needed: addPackageMapping()\\n`;\n\n    return message;\n  }\n\n  /**\n   * Resolve multiple imports at once\n   */\n  resolveImports(imports) {\n    this.results = {\n      resolved: [],\n      unresolved: [],\n      errors: [],\n    };\n\n    imports.forEach((imp) => {\n      this.resolve(imp.source, imp.items);\n    });\n\n    return {\n      imports: this.results,\n      summary: this.getSummary(),\n    };\n  }\n\n  /**\n   * Add custom package mapping\n   * Example: resolver.addPackageMapping('@package:ui', './packages/ui')\n   */\n  addPackageMapping(packageName, actualPath) {\n    if (packageName.startsWith('@package:')) {\n      this.customPackageMappings[packageName] = actualPath;\n      console.log(`\u2713 Added mapping: ${packageName} \u2192 ${actualPath}`);\n    } else {\n      console.warn(`\u26A0 Custom mappings should start with @package:`);\n    }\n  }\n\n  /**\n   * Add multiple mappings at once\n   */\n  addPackageMappings(mappings) {\n    Object.entries(mappings).forEach(([pkg, path]) => {\n      this.addPackageMapping(pkg, path);\n    });\n  }\n\n  /**\n   * Get all mappings\n   */\n  getPackageMappings() {\n    return {\n      framework: this.frameworkPackages,\n      custom: this.customPackageMappings,\n    };\n  }\n\n  /**\n   * Set local search paths\n   * Example: resolver.setLocalSearchPaths(['src', 'lib', 'packages'])\n   */\n  setLocalSearchPaths(paths) {\n    this.localSearchPaths = paths;\n    console.log(`\u2713 Set local search paths: ${paths.join(', ')}`);\n  }\n\n  /**\n   * Get resolution summary\n   */\n  getSummary() {\n    const total = this.results.resolved.length + this.results.unresolved.length;\n    const resolved = this.results.resolved.length;\n    const unresolved = this.results.unresolved.length;\n\n    return {\n      total,\n      resolved,\n      unresolved,\n      errors: this.results.errors.length,\n      resolutionRate: total > 0 ? ((resolved / total) * 100).toFixed(2) + '%' : 'N/A',\n      bySource: {\n        framework: this.results.resolved.filter((r) => r.source === 'framework').length,\n        local: this.results.resolved.filter((r) => r.source === 'local').length,\n        cache: this.results.resolved.filter((r) => r.source === 'cache').length,\n      },\n    };\n  }\n\n  /**\n   * Generate resolution report\n   */\n  generateReport() {\n    const summary = this.getSummary();\n\n    let report = `\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551         IMPORT RESOLUTION REPORT                           \u2551\n\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D\n\n\uD83D\uDCCA Summary\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Total Imports:    ${summary.total}\n  \u2713 Resolved:       ${summary.resolved} (${summary.resolutionRate})\n  \u2717 Unresolved:     ${summary.unresolved}\n  \u26A0 Errors:         ${summary.errors}\n\n\uD83D\uDCCD Resolution Sources\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Framework:        ${summary.bySource.framework}\n  Local Code:       ${summary.bySource.local}\n  Package Cache:    ${summary.bySource.cache}\n\n${this.results.unresolved.length > 0 ? `\n\u26A0\uFE0F  UNRESOLVED IMPORTS\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n${this.results.unresolved\n  .map(\n    (imp) =>\n      `  \u274C ${imp.original}\n     Reason: ${imp.reason}`\n  )\n  .join('\\n')}\n` : ''}\n\n${this.results.errors.length > 0 ? `\n\uD83D\uDD34 ERRORS\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n${this.results.errors.map((err) => `  \u2022 ${err.reason}`).join('\\n')}\n` : ''}\n`;\n\n    return report;\n  }\n\n  /**\n   * Clear caches\n   */\n  clearCache() {\n    this.resolvedCache.clear();\n    this.unresolvedCache.clear();\n    console.log('\u2713 Resolution cache cleared');\n  }\n}\n\nexport { ImportResolver };\n", "/**\n * FlutterJS Analyzer - Main Orchestrator (FIXED Logger Integration)\n * Properly integrates centralized logging system\n */\n\nimport fs from 'fs';\nimport { Lexer } from './lexer.js';\nimport { Parser } from './flutterjs_parser.js';\nimport { WidgetAnalyzer } from './flutterjs_widget_analyzer.js';\nimport { StateAnalyzer } from './state_analyzer_implementation.js';\nimport { ContextAnalyzer } from './context_analyzer.js';\nimport { SSRAnalyzer } from './ssr_analyzer.js';\nimport { ReportGenerator } from './flutterjs_report_generator.js';\nimport { ImportResolver } from './flutter_import_resolver.js';\nimport { resolverConfig } from './flutter_resolver_config.js';\nimport { initLogger, getLogger } from './flutterjs_logger.js';\n\n// ============================================================================\n// MAIN ANALYZER CLASS\n// ============================================================================\n\nclass Analyzer {\n  constructor(options = {}) {\n    this.options = {\n      sourceFile: null,\n      sourceCode: null,\n      outputFormat: 'json',\n      outputFile: null,\n      verbose: true,\n      strict: false,\n      projectRoot: process.cwd(),\n      includeMetrics: true,\n      includeTree: true,\n      includeValidation: true,\n      includeSuggestions: true,\n      includeContext: true,\n      includeSsr: true,\n      includeImports: true,\n      ignoreUnresolvedImports: true,\n      prettyPrint: true,\n      debugLevel: 'info',  // NEW: Add debug level option\n      ...options,\n    };\n\n    // FIXED: Properly initialize logger\n    this.logger = initLogger({\n      level: this.options.debugLevel,\n      writeToFile: true,\n      writeToConsole: false,\n      debugDir: '.debug',\n    });\n\n    const loggerInstance = this.logger.createComponentLogger('Analyzer');\n    this.log = loggerInstance;  // Store logger instance\n\n    // Initialize import resolver\n    this.importResolver = new ImportResolver({\n      projectRoot: this.options.projectRoot,\n      ignoreUnresolved: this.options.ignoreUnresolvedImports,\n      ...resolverConfig,\n    });\n\n    this.results = {\n      source: null,\n      tokens: null,\n      ast: null,\n      widgets: null,\n      importResolution: null,\n      state: null,\n      context: null,\n      ssr: null,\n      report: null,\n    };\n\n    this.errors = [];\n    this.timings = {};\n  }\n\n  /**\n   * Main entry point - run full analysis pipeline\n   */\n  async analyze() {\n    const logger = this.log;\n\n    logger.startSession('FullAnalyzerPipeline');\n\n    try {\n      logger.info('\\n' + '='.repeat(80));\n      logger.info('\uD83D\uDE80 FlutterJS ANALYZER - FULL PIPELINE');\n      logger.info('='.repeat(80));\n\n      // Step 1: Load source code\n      logger.startSession('LoadSource');\n      logger.info('STEP 1: Loading source code...');\n      await this.loadSource();\n      logger.success('Source loaded');\n      logger.endSession('LoadSource');\n\n      // Step 2: Lexing\n      logger.startSession('Lexing');\n      logger.info('STEP 2: Tokenizing (Lexing)...');\n      this.lex();\n      logger.trace('Tokens generated', this.results.tokens.length);\n      logger.success('Lexing complete');\n      logger.endSession('Lexing');\n\n      // Step 3: Parsing\n      logger.startSession('Parsing');\n      logger.info('STEP 3: Building AST (Parsing)...');\n      this.parse();\n      logger.trace('Top-level items', this.results.ast.body.length);\n      logger.success('Parsing complete');\n      logger.endSession('Parsing');\n\n      // Step 4: Widget Analysis (Phase 1)\n      logger.startSession('WidgetAnalysis');\n      logger.info('STEP 4: Widget Analysis (Phase 1)...');\n      this.analyzeWidgets();\n      logger.trace('Widgets detected', this.results.widgets.widgets.length);\n      logger.success('Widget analysis complete');\n      logger.endSession('WidgetAnalysis');\n\n      // Step 5: Import Resolution\n      if (this.options.includeImports) {\n        logger.startSession('ImportResolution');\n        logger.info('STEP 5: Resolving Imports...');\n        this.analyzeImports();\n        const summary = this.results.importResolution?.summary;\n        logger.trace('Imports resolved', summary?.resolved || 0);\n        logger.trace('Imports unresolved', summary?.unresolved || 0);\n        logger.success('Import resolution complete');\n        logger.endSession('ImportResolution');\n      }\n\n      // Step 6: State Analysis (Phase 2)\n      logger.startSession('StateAnalysis');\n      logger.info('STEP 6: State Analysis (Phase 2)...');\n      this.analyzeState();\n      logger.trace('State classes analyzed', this.results.state.stateClasses.length);\n      logger.success('State analysis complete');\n      logger.endSession('StateAnalysis');\n\n      // Step 7: Context Analysis (Phase 3)\n      if (this.options.includeContext) {\n        logger.startSession('ContextAnalysis');\n        logger.info('STEP 7: Context Analysis (Phase 3)...');\n        this.analyzeContext();\n        logger.trace('Inherited widgets detected', this.results.context.inheritedWidgets?.length || 0);\n        logger.success('Context analysis complete');\n        logger.endSession('ContextAnalysis');\n      }\n\n      // Step 8: SSR Analysis (Phase 3)\n      if (this.options.includeSsr) {\n        logger.startSession('SSRAnalysis');\n        logger.info('STEP 8: SSR Compatibility Analysis (Phase 3)...');\n        this.analyzeSsr();\n        logger.trace('SSR Compatibility Score', this.results.ssr.ssrCompatibilityScore);\n        logger.success('SSR analysis complete');\n        logger.endSession('SSRAnalysis');\n      }\n\n      // Step 9: Report Generation\n      logger.startSession('ReportGeneration');\n      logger.info('STEP 9: Generating Report...');\n      this.generateReport();\n      logger.success('Report generated');\n      logger.endSession('ReportGeneration');\n\n      // Step 10: Output\n      logger.startSession('Output');\n      logger.info('STEP 10: Output...');\n      this.output();\n      logger.success('Output complete');\n      logger.endSession('Output');\n\n      logger.info('='.repeat(80));\n      logger.success('\u2705 ANALYSIS COMPLETE');\n      logger.info('='.repeat(80) + '\\n');\n\n      // Save logs to files\n      this.logger.saveLogs();\n\n      return this.getResults();\n    } catch (error) {\n      logger.error('ANALYSIS FAILED');\n      logger.failure('Analysis pipeline', error.message);\n      logger.endSession('FullAnalyzerPipeline');\n      throw error;\n    }\n  }\n\n  /**\n   * Step 5: Resolve all imports\n   */\n  analyzeImports() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      if (!this.results.widgets) {\n        logger.warn('No widgets found, skipping import analysis');\n        return;\n      }\n\n      const imports = this.results.widgets.imports || [];\n\n      if (imports.length === 0) {\n        logger.info('No imports found in source');\n        this.results.importResolution = {\n          imports: {\n            resolved: [],\n            unresolved: [],\n            errors: [],\n          },\n          summary: {\n            total: 0,\n            resolved: 0,\n            unresolved: 0,\n            errors: 0,\n            resolutionRate: 'N/A',\n            bySource: { framework: 0, local: 0, cache: 0 },\n          },\n        };\n        return;\n      }\n\n      logger.info(`Found ${imports.length} imports to resolve`);\n\n      // Resolve imports\n      const resolution = this.importResolver.resolveImports(\n        imports.map((imp) => ({\n          source: imp.source,\n          items: imp.items,\n        }))\n      );\n\n      // Store resolution results\n      this.results.importResolution = resolution;\n\n      // Log resolution statistics\n      logger.debug(`Resolved: ${resolution.imports.resolved.length}`);\n      logger.debug(`Unresolved: ${resolution.imports.unresolved.length}`);\n      logger.debug(`Errors: ${resolution.imports.errors.length}`);\n\n      // Check for errors (unless ignoreUnresolvedImports is set)\n      if (!this.options.ignoreUnresolvedImports &&\n        resolution.imports.errors.length > 0) {\n        throw new Error(\n          `${resolution.imports.errors.length} imports could not be resolved`\n        );\n      }\n    } catch (error) {\n      logger.error(`Import resolution failed: ${error.message}`);\n      throw new Error(`Import resolution failed: ${error.message}`);\n    }\n\n    this.timings.analyzeImports = Date.now() - start;\n  }\n\n  /**\n   * Step 1: Load source code from file or use provided code\n   */\n  async loadSource() {\n    const start = Date.now();\n    const logger = this.log;\n\n    if (this.options.sourceCode) {\n      this.results.source = this.options.sourceCode;\n      logger.debug('Using provided source code');\n    } else if (this.options.sourceFile) {\n      try {\n        this.results.source = fs.readFileSync(this.options.sourceFile, 'utf-8');\n        logger.debug(`Loaded from file: ${this.options.sourceFile}`);\n        logger.trace('Source file size', this.results.source.length);\n      } catch (error) {\n        logger.error(`Cannot read file \"${this.options.sourceFile}\"`);\n        throw new Error(`Cannot read file \"${this.options.sourceFile}\": ${error.message}`);\n      }\n    } else {\n      logger.error('No source code or source file provided');\n      throw new Error('No source code or source file provided');\n    }\n\n    this.timings.loadSource = Date.now() - start;\n  }\n\n  /**\n   * Step 2: Lex source code into tokens\n   */\n  lex() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const lexer = new Lexer(this.results.source);\n      this.results.tokens = lexer.tokenize();\n\n      if (lexer.getErrors().length > 0) {\n        logger.warn(`Lexer produced ${lexer.getErrors().length} warnings`);\n        lexer.getErrors().forEach((err) => {\n          logger.debug(`Lexer: ${err.message}`);\n        });\n      }\n    } catch (error) {\n      logger.error(`Lexing failed: ${error.message}`);\n      throw new Error(`Lexing failed: ${error.message}`);\n    }\n\n    this.timings.lex = Date.now() - start;\n  }\n\n  /**\n   * Step 3: Parse tokens into AST\n   */\n  parse() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const parser = new Parser(this.results.tokens);\n      this.results.ast = parser.parse();\n\n      if (parser.getErrors().length > 0) {\n        logger.warn(`Parser produced ${parser.getErrors().length} errors`);\n        parser.getErrors().forEach((err) => {\n          logger.debug(`Parser: ${err.message}`);\n        });\n\n        if (this.options.strict) {\n          throw new Error(`${parser.getErrors().length} parser errors found`);\n        }\n      }\n    } catch (error) {\n      logger.error(`Parsing failed: ${error.message}`);\n      throw new Error(`Parsing failed: ${error.message}`);\n    }\n\n    this.timings.parse = Date.now() - start;\n  }\n\n  /**\n   * Step 4: Analyze widgets (Phase 1)\n   */\n  analyzeWidgets() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const analyzer = new WidgetAnalyzer(this.results.ast);\n      this.results.widgets = analyzer.analyze();\n\n      if (this.results.widgets.errors.length > 0) {\n        logger.warn(`Widget analysis produced ${this.results.widgets.errors.length} errors`);\n        this.results.widgets.errors.forEach((err) => {\n          logger.debug(`Widget: ${err.message}`);\n        });\n      }\n    } catch (error) {\n      logger.error(`Widget analysis failed: ${error.message}`);\n      throw new Error(`Widget analysis failed: ${error.message}`);\n    }\n\n    this.timings.analyzeWidgets = Date.now() - start;\n  }\n\n  /**\n   * Step 6: Analyze state (Phase 2)\n   */\n  analyzeState() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const analyzer = new StateAnalyzer(\n        this.results.ast,\n        this.results.widgets.widgets,\n        { strict: this.options.strict }\n      );\n      this.results.state = analyzer.analyze();\n\n      if (this.results.state.errors.length > 0) {\n        logger.warn(`State analysis produced ${this.results.state.errors.length} errors`);\n        this.results.state.errors.forEach((err) => {\n          logger.debug(`State: ${err.message}`);\n        });\n      }\n    } catch (error) {\n      logger.error(`State analysis failed: ${error.message}`);\n      throw new Error(`State analysis failed: ${error.message}`);\n    }\n\n    this.timings.analyzeState = Date.now() - start;\n  }\n\n  /**\n   * Step 7: Analyze context (Phase 3)\n   */\n  analyzeContext() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const analyzer = new ContextAnalyzer(\n        this.results.ast,\n        this.results.widgets.widgets,\n        { strict: this.options.strict }\n      );\n      this.results.context = analyzer.analyze();\n\n      if (this.results.context.errors && this.results.context.errors.length > 0) {\n        logger.warn(`Context analysis produced ${this.results.context.errors.length} errors`);\n        this.results.context.errors.forEach((err) => {\n          logger.debug(`Context: ${err.message}`);\n        });\n      }\n    } catch (error) {\n      logger.error(`Context analysis failed: ${error.message}`);\n      throw new Error(`Context analysis failed: ${error.message}`);\n    }\n\n    this.timings.analyzeContext = Date.now() - start;\n  }\n\n  /**\n   * Step 8: Analyze SSR compatibility (Phase 3)\n   */\n  analyzeSsr() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const analyzer = new SSRAnalyzer(\n        this.results.context,\n        this.results.state,\n        { strict: this.options.strict }\n      );\n      this.results.ssr = analyzer.analyze();\n\n      if (this.results.ssr.errors && this.results.ssr.errors.length > 0) {\n        logger.warn(`SSR analysis produced ${this.results.ssr.errors.length} errors`);\n        this.results.ssr.errors.forEach((err) => {\n          logger.debug(`SSR: ${err.message}`);\n        });\n      }\n    } catch (error) {\n      logger.error(`SSR analysis failed: ${error.message}`);\n      throw new Error(`SSR analysis failed: ${error.message}`);\n    }\n\n    this.timings.analyzeSsr = Date.now() - start;\n  }\n\n  /**\n   * Step 9: Generate report\n   */\n  generateReport() {\n    const start = Date.now();\n    const logger = this.log;\n\n    try {\n      const generator = new ReportGenerator(\n        this.results.widgets,\n        this.results.state,\n        this.results.context,\n        this.results.ssr,\n        {\n          format: this.options.outputFormat,\n          includeMetrics: this.options.includeMetrics,\n          includeTree: this.options.includeTree,\n          includeValidation: this.options.includeValidation,\n          includeSuggestions: this.options.includeSuggestions,\n          includeContext: this.options.includeContext,\n          includeSsr: this.options.includeSsr,\n          prettyPrint: this.options.prettyPrint,\n        }\n      );\n\n      this.results.report = generator.generate();\n    } catch (error) {\n      logger.error(`Report generation failed: ${error.message}`);\n      throw new Error(`Report generation failed: ${error.message}`);\n    }\n\n    this.timings.generateReport = Date.now() - start;\n  }\n\n  /**\n   * Step 10: Output report (console or file)\n   */\n  output() {\n    const logger = this.log;\n\n    if (this.options.outputFile) {\n      try {\n        fs.writeFileSync(this.options.outputFile, this.results.report, 'utf-8');\n        logger.success(`Report saved to: ${this.options.outputFile}`);\n      } catch (error) {\n        logger.error(`Cannot write to file \"${this.options.outputFile}\"`);\n        throw new Error(`Cannot write to file \"${this.options.outputFile}\": ${error.message}`);\n      }\n    } else {\n      // Only print report to console if not verbose logging\n      if (this.options.outputFormat !== 'console') {\n        console.log(this.results.report);\n      }\n    }\n  }\n\n  /**\n   * Get analysis results - FIXED: Include logger info\n   */\n  getResults() {\n    // Extract widget arrays by type\n    const allWidgets = this.results.widgets?.widgets || [];\n    const statelessWidgets = allWidgets.filter((w) => w.type === 'stateless');\n    const statefulWidgets = allWidgets.filter((w) => w.type === 'stateful');\n    const stateWidgets = allWidgets.filter((w) => w.type === 'state');\n\n    // Extract widget names as arrays\n    const statelessNames = statelessWidgets.map((w) => w.name);\n    const statefulNames = statefulWidgets.map((w) => w.name);\n\n    // Build state classes mapping: StatefulWidget -> State class\n    const stateClasses = {};\n    stateWidgets.forEach((stateWidget) => {\n      // Convention: _MyHomePageState -> MyHomePage\n      const widgetName = stateWidget.name.replace(/^_/, '').replace(/State$/, '');\n      const stateFields = stateWidget.fields || [];\n      stateClasses[stateWidget.name] = stateFields.map((f) => f.name);\n    });\n\n    // Also map by StatefulWidget name if we have linking info\n    statefulWidgets.forEach((statefulWidget) => {\n      const expectedStateName = `_${statefulWidget.name}State`;\n      if (stateClasses[expectedStateName]) {\n        // Create mapping for easy lookup\n        stateClasses[statefulWidget.name] = stateClasses[expectedStateName];\n      }\n    });\n\n    return {\n      source: {\n        length: this.results.source?.length || 0,\n        file: this.options.sourceFile,\n      },\n      tokens: {\n        count: this.results.tokens?.length || 0,\n      },\n      ast: {\n        items: this.results.ast?.body?.length || 0,\n      },\n      // FIXED: Return actual widget names and full widget objects\n      widgets: {\n        // Arrays of widget names for easy access\n        stateless: statelessNames,\n        stateful: statefulNames,\n        count: allWidgets.length,\n\n        // Full widget objects for detailed analysis\n        all: allWidgets,\n\n        // State class mappings\n        stateClasses: stateClasses,\n\n        // Metadata\n        total: {\n          stateless: statelessWidgets.length,\n          stateful: statefulWidgets.length,\n          state: stateWidgets.length,\n        },\n      },\n      imports: this.options.includeImports\n        ? {\n          total: this.results.importResolution?.summary?.total || 0,\n          resolved: this.results.importResolution?.summary?.resolved || 0,\n          unresolved: this.results.importResolution?.summary?.unresolved || 0,\n          errors: this.results.importResolution?.summary?.errors || 0,\n          resolutionRate: this.results.importResolution?.summary?.resolutionRate || 'N/A',\n        }\n        : null,\n      state: {\n        stateClasses: this.results.state?.stateClasses?.length || 0,\n        stateFields: this.results.state?.stateFields?.length || 0,\n        setStateCalls: this.results.state?.setStateCalls?.length || 0,\n        lifecycleMethods: this.results.state?.lifecycleMethods?.length || 0,\n        eventHandlers: this.results.state?.eventHandlers?.length || 0,\n        validationIssues: this.results.state?.validationResults?.length || 0,\n      },\n      context: this.options.includeContext\n        ? {\n          inheritedWidgets: this.results.context?.inheritedWidgets?.length || 0,\n          changeNotifiers: this.results.context?.changeNotifiers?.length || 0,\n          providers: this.results.context?.providers?.length || 0,\n          contextAccessPoints: this.results.context?.contextAccessPoints?.length || 0,\n        }\n        : null,\n      ssr: this.options.includeSsr\n        ? {\n          compatibility: this.results.ssr?.overallCompatibility || 'unknown',\n          compatibilityScore: this.results.ssr?.ssrCompatibilityScore || 0,\n          safePatterns: this.results.ssr?.ssrSafePatterns?.length || 0,\n          unsafePatterns: this.results.ssr?.ssrUnsafePatterns?.length || 0,\n          hydrationNeeded: this.results.ssr?.hydrationCount || 0,\n          migrationSteps: this.results.ssr?.ssrMigrationPath?.length || 0,\n          estimatedEffort: this.results.ssr?.estimatedEffort || 'unknown',\n        }\n        : null,\n      timings: this.timings,\n      report: this.results.report,\n      logger: this.logger.getReport(),\n      debugFiles: this.logger.readDebugFiles(),\n    };\n  }\n}\n\n// ============================================================================\n// STATIC HELPER METHODS\n// ============================================================================\n\nasync function analyzeCode(sourceCode, options = {}) {\n  const analyzer = new Analyzer({\n    sourceCode,\n    ...options,\n  });\n\n  return analyzer.analyze();\n}\n\nasync function analyzeFile(sourceFile, options = {}) {\n  const analyzer = new Analyzer({\n    sourceFile,\n    ...options,\n  });\n\n  return analyzer.analyze();\n}\n\nasync function analyzeAndSave(sourceFile, outputFile, options = {}) {\n  const analyzer = new Analyzer({\n    sourceFile,\n    outputFile,\n    ...options,\n  });\n\n  return analyzer.analyze();\n}\n\n// ============================================================================\n// CLI INTERFACE\n// ============================================================================\n\nasync function runCLI() {\n  const args = process.argv.slice(2);\n\n  if (args.length === 0) {\n    printUsage();\n    process.exit(0);\n  }\n\n  const sourceFile = args[0];\n  let outputFile = null;\n  let outputFormat = 'json';\n  let verbose = true;\n  let includeImports = true;\n  let includeContext = true;\n  let includeSsr = true;\n  let debugLevel = 'info';\n\n  for (let i = 1; i < args.length; i++) {\n    const arg = args[i];\n\n    if (arg === '-o' || arg === '--output') {\n      outputFile = args[++i];\n    } else if (arg === '-f' || arg === '--format') {\n      outputFormat = args[++i];\n    } else if (arg === '-q' || arg === '--quiet') {\n      verbose = false;\n    } else if (arg === '--debug') {\n      debugLevel = args[++i] || 'debug';\n    } else if (arg === '--no-imports') {\n      includeImports = false;\n    } else if (arg === '--no-context') {\n      includeContext = false;\n    } else if (arg === '--no-ssr') {\n      includeSsr = false;\n    } else if (arg === '--phase1') {\n      includeImports = false;\n      includeContext = false;\n      includeSsr = false;\n    } else if (arg === '-h' || arg === '--help') {\n      printUsage();\n      process.exit(0);\n    }\n  }\n\n  if (!['json', 'markdown', 'console'].includes(outputFormat)) {\n    console.error(`Invalid format: ${outputFormat}`);\n    process.exit(1);\n  }\n\n  try {\n    const analyzer = new Analyzer({\n      sourceFile,\n      outputFile,\n      outputFormat,\n      verbose,\n      includeImports,\n      includeContext,\n      includeSsr,\n      debugLevel,\n    });\n\n    const results = await analyzer.analyze();\n\n    // Show debug info location\n    if (debugLevel !== 'info') {\n      console.log('\\n\uD83D\uDCCA Debug logs saved to: .debug/');\n      console.log('   View with: node debug_viewer.js\\n');\n    }\n\n    process.exit(0);\n  } catch (error) {\n    console.error(`\\n\u274C Error: ${error.message}\\n`);\n    process.exit(1);\n  }\n}\n\nfunction printUsage() {\n  console.log(`\nFlutterJS Analyzer (Phase 1 + Import Resolution + Phase 2 + 3)\n\nUsage:\n  node analyzer.js <source-file> [options]\n\nOptions:\n  -o, --output <file>      Output file (default: print to console)\n  -f, --format <format>    Output format: json, markdown, console (default: json)\n  -q, --quiet              Suppress verbose output\n  --debug <level>          Enable debug logging: trace, debug, info (default: info)\n  --no-imports             Skip import resolution\n  --no-context             Skip Phase 3 context analysis\n  --no-ssr                 Skip Phase 3 SSR analysis\n  --phase1                 Only Phase 1 (widgets + imports)\n  -h, --help               Show this help message\n\nExamples:\n  node analyzer.js test.fjs\n  node analyzer.js test.fjs -o report.json\n  node analyzer.js test.fjs --debug trace\n  node analyzer.js test.fjs -f markdown\n  node analyzer.js test.fjs --phase1\n`);\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport {\n  Analyzer,\n  analyzeCode,\n  analyzeFile,\n  analyzeAndSave,\n  runCLI,\n};\n\n// ============================================================================\n// CLI EXECUTION\n// ============================================================================\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  runCLI();\n}", "/**\r\n * FlutterJS Lexer - Converts source code to tokens\r\n * Phase 1.1 MVP Implementation\r\n * \r\n * No external dependencies - pure Node.js\r\n */\r\n\r\n// ============================================================================\r\n// TOKEN CLASS\r\n// ============================================================================\r\n\r\n/**\r\n * Represents a single token in the source code\r\n */\r\nclass Token {\r\n  constructor(type, value, line, column) {\r\n    this.type = type;           // Token type (KEYWORD, IDENTIFIER, etc.)\r\n    this.value = value;         // Token value (the actual string)\r\n    this.line = line;           // Line number (1-indexed)\r\n    this.column = column;       // Column number (0-indexed)\r\n  }\r\n\r\n  /**\r\n   * Get human-readable token representation\r\n   */\r\n  toString() {\r\n    return `Token(${this.type}, \"${this.value}\", ${this.line}:${this.column})`;\r\n  }\r\n\r\n  /**\r\n   * Check if this token matches a type or list of types\r\n   */\r\n  isType(types) {\r\n    if (Array.isArray(types)) {\r\n      return types.includes(this.type);\r\n    }\r\n    return this.type === types;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// TOKEN TYPE CONSTANTS\r\n// ============================================================================\r\n\r\nconst TokenType = {\r\n  // Literals\r\n  STRING: 'STRING',\r\n  NUMBER: 'NUMBER',\r\n  BOOLEAN: 'BOOLEAN',\r\n  NULL: 'NULL',\r\n  UNDEFINED: 'UNDEFINED',\r\n\r\n  // Keywords\r\n  KEYWORD: 'KEYWORD',\r\n\r\n  // Identifiers\r\n  IDENTIFIER: 'IDENTIFIER',\r\n\r\n  // Operators & Punctuation\r\n  OPERATOR: 'OPERATOR',\r\n  PUNCTUATION: 'PUNCTUATION',\r\n\r\n  // Comments & Whitespace\r\n  COMMENT: 'COMMENT',\r\n  WHITESPACE: 'WHITESPACE',\r\n  NEWLINE: 'NEWLINE',\r\n\r\n  // Special\r\n  EOF: 'EOF',\r\n};\r\n\r\n// ============================================================================\r\n// LEXER CLASS\r\n// ============================================================================\r\n\r\n/**\r\n * Lexer - Converts source code string into a stream of tokens\r\n */\r\nclass Lexer {\r\n  constructor(source, options = {}) {\r\n    this.source = source;\r\n    this.position = 0;           // Current position in source\r\n    this.line = 1;               // Current line number\r\n    this.column = 0;             // Current column number\r\n    this.tokens = [];            // Collected tokens\r\n    this.errors = [];            // Lexing errors\r\n\r\n    // Configuration\r\n    this.options = {\r\n      includeWhitespace: false,   // Include whitespace tokens in output\r\n      includeComments: true,      // Include comment tokens\r\n      ...options,\r\n    };\r\n\r\n    // Keywords that we care about for FlutterJS\r\n    this.keywords = new Set([\r\n      'class', 'extends', 'constructor', 'new', 'const',\r\n      'function', 'return', 'if', 'else', 'for', 'while',\r\n      'this', 'static', 'async', 'await', 'import', 'export',\r\n      'from', 'as', 'default', 'true', 'false', 'null',\r\n      'undefined', 'typeof', 'instanceof', 'void', 'delete',\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Main entry point - tokenize entire source\r\n   */\r\n  tokenize() {\r\n    while (this.position < this.source.length) {\r\n      this.scanToken();\r\n    }\r\n\r\n    this.tokens.push(new Token(TokenType.EOF, '', this.line, this.column));\r\n    return this.tokens;\r\n  }\r\n\r\n  /**\r\n   * Scan a single token\r\n   */\r\n  scanToken() {\r\n    const ch = this.peek();\r\n\r\n    // Handle whitespace\r\n    if (this.isWhitespace(ch)) {\r\n      return this.scanWhitespace();\r\n    }\r\n\r\n    // Handle comments\r\n    if (ch === '/' && (this.peekNext() === '/' || this.peekNext() === '*')) {\r\n      return this.scanComment();\r\n    }\r\n\r\n    // Handle strings\r\n    if (ch === '\"' || ch === \"'\" || ch === '`') {\r\n      return this.scanString();\r\n    }\r\n\r\n    // Handle numbers\r\n    if (this.isDigit(ch)) {\r\n      return this.scanNumber();\r\n    }\r\n\r\n    // Handle identifiers and keywords\r\n    if (this.isIdentifierStart(ch)) {\r\n      return this.scanIdentifier();\r\n    }\r\n\r\n    // Handle operators and punctuation\r\n    return this.scanOperatorOrPunctuation();\r\n  }\r\n\r\n  /**\r\n   * Scan whitespace and newlines\r\n   */\r\n  scanWhitespace() {\r\n    const startColumn = this.column;\r\n    let whitespaceStr = '';\r\n\r\n    while (this.position < this.source.length && this.isWhitespace(this.peek())) {\r\n      const ch = this.advance();\r\n      whitespaceStr += ch;\r\n\r\n      if (ch === '\\n') {\r\n        if (this.options.includeWhitespace) {\r\n          this.tokens.push(new Token(TokenType.NEWLINE, '\\n', this.line - 1, startColumn));\r\n        }\r\n        this.line++;\r\n        this.column = 0;\r\n        whitespaceStr = '';\r\n      }\r\n    }\r\n\r\n    // Add remaining whitespace if configured\r\n    if (this.options.includeWhitespace && whitespaceStr.length > 0) {\r\n      this.tokens.push(new Token(TokenType.WHITESPACE, whitespaceStr, this.line, startColumn));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scan comments (single-line // and multi-line )\r\n   */\r\n  scanComment() {\r\n    const startLine = this.line;\r\n    const startColumn = this.column;\r\n    let content = '';\r\n\r\n    if (this.peekNext() === '/') {\r\n      // Single-line comment\r\n      this.advance(); // /\r\n      this.advance(); // /\r\n\r\n      while (this.position < this.source.length && this.peek() !== '\\n') {\r\n        content += this.advance();\r\n      }\r\n\r\n      if (this.options.includeComments) {\r\n        this.tokens.push(new Token(TokenType.COMMENT, content, startLine, startColumn));\r\n      }\r\n    } else if (this.peekNext() === '*') {\r\n      // Multi-line comment\r\n      this.advance(); // /\r\n      this.advance(); // *\r\n\r\n      while (this.position < this.source.length) {\r\n        if (this.peek() === '*' && this.peekNext() === '/') {\r\n          this.advance(); // *\r\n          this.advance(); // /\r\n          break;\r\n        }\r\n\r\n        const ch = this.advance();\r\n        content += ch;\r\n\r\n        if (ch === '\\n') {\r\n          this.line++;\r\n          this.column = 0;\r\n        }\r\n      }\r\n\r\n      if (this.options.includeComments) {\r\n        this.tokens.push(new Token(TokenType.COMMENT, content, startLine, startColumn));\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scan string literals (\", ', `)\r\n   */\r\n  scanString() {\r\n    const startLine = this.line;\r\n    const startColumn = this.column;\r\n    const quoteChar = this.advance();\r\n    let value = '';\r\n\r\n    while (this.position < this.source.length) {\r\n      const ch = this.peek();\r\n\r\n      if (ch === quoteChar) {\r\n        this.advance();\r\n        break;\r\n      }\r\n\r\n      if (ch === '\\\\') {\r\n        // Handle escape sequences\r\n        this.advance();\r\n        const escaped = this.advance();\r\n        value += this.getEscapeSequence(escaped);\r\n      } else {\r\n        if (ch === '\\n') {\r\n          this.line++;\r\n          this.column = 0;\r\n        }\r\n        value += this.advance();\r\n      }\r\n    }\r\n\r\n    this.tokens.push(new Token(TokenType.STRING, value, startLine, startColumn));\r\n  }\r\n\r\n  /**\r\n   * Scan number literals (integers and floats)\r\n   */\r\n  scanNumber() {\r\n    const startLine = this.line;\r\n    const startColumn = this.column;\r\n    let value = '';\r\n\r\n    // Scan integer part\r\n    while (this.position < this.source.length && this.isDigit(this.peek())) {\r\n      value += this.advance();\r\n    }\r\n\r\n    // Scan decimal part\r\n    if (this.peek() === '.' && this.isDigit(this.peekNext())) {\r\n      value += this.advance(); // .\r\n      while (this.position < this.source.length && this.isDigit(this.peek())) {\r\n        value += this.advance();\r\n      }\r\n    }\r\n\r\n    // Scan exponent part (e.g., 1e10, 1E-5)\r\n    if ((this.peek() === 'e' || this.peek() === 'E') && this.isDigit(this.peekNext())) {\r\n      value += this.advance(); // e/E\r\n      if (this.peek() === '+' || this.peek() === '-') {\r\n        value += this.advance();\r\n      }\r\n      while (this.position < this.source.length && this.isDigit(this.peek())) {\r\n        value += this.advance();\r\n      }\r\n    }\r\n\r\n    this.tokens.push(new Token(TokenType.NUMBER, value, startLine, startColumn));\r\n  }\r\n\r\n  /**\r\n   * Scan identifiers and keywords\r\n   */\r\n  scanIdentifier() {\r\n    const startLine = this.line;\r\n    const startColumn = this.column;\r\n    let value = '';\r\n\r\n    while (\r\n      this.position < this.source.length &&\r\n      this.isIdentifierPart(this.peek())\r\n    ) {\r\n      value += this.advance();\r\n    }\r\n\r\n    // Check if it's a keyword or special literal\r\n    let tokenType = TokenType.IDENTIFIER;\r\n    if (this.keywords.has(value)) {\r\n      if (value === 'true' || value === 'false') {\r\n        tokenType = TokenType.BOOLEAN;\r\n      } else if (value === 'null') {\r\n        tokenType = TokenType.NULL;\r\n      } else if (value === 'undefined') {\r\n        tokenType = TokenType.UNDEFINED;\r\n      } else {\r\n        tokenType = TokenType.KEYWORD;\r\n      }\r\n    }\r\n\r\n    this.tokens.push(new Token(tokenType, value, startLine, startColumn));\r\n  }\r\n\r\n  /**\r\n   * Scan operators and punctuation\r\n   */\r\n  scanOperatorOrPunctuation() {\r\n    const startLine = this.line;\r\n    const startColumn = this.column;\r\n    const ch = this.advance();\r\n\r\n    // Two-character operators\r\n    const twoChar = ch + (this.peek() || '');\r\n    const twoCharOps = [\r\n      '=>', '==', '!=', '===', '!==', '<=', '>=',\r\n      '++', '--', '&&', '||', '+=', '-=', '*=', '/=', '%=',\r\n      '??', '?.', '..', '**',\r\n    ];\r\n\r\n    if (twoCharOps.includes(twoChar)) {\r\n      this.advance();\r\n      this.tokens.push(new Token(TokenType.OPERATOR, twoChar, startLine, startColumn));\r\n      return;\r\n    }\r\n\r\n    // Three-character operators\r\n    const threeChar = twoChar + (this.peek() || '');\r\n    const threeCharOps = ['===', '!==', '...'];\r\n    if (threeCharOps.includes(threeChar)) {\r\n      this.advance();\r\n      this.tokens.push(new Token(TokenType.OPERATOR, threeChar, startLine, startColumn));\r\n      return;\r\n    }\r\n\r\n    // Single-character operators\r\n    const singleCharOps = [\r\n      '+', '-', '*', '/', '%', '=', '<', '>', '!', '&', '|', '^', '~', '?', ':',\r\n    ];\r\n    if (singleCharOps.includes(ch)) {\r\n      this.tokens.push(new Token(TokenType.OPERATOR, ch, startLine, startColumn));\r\n      return;\r\n    }\r\n\r\n    // Punctuation\r\n    const punctuation = [\r\n      '{', '}', '(', ')', '[', ']', ';', ',', '.', '@', '#',\r\n    ];\r\n    if (punctuation.includes(ch)) {\r\n      this.tokens.push(new Token(TokenType.PUNCTUATION, ch, startLine, startColumn));\r\n      return;\r\n    }\r\n\r\n    // Unknown character - log error but continue\r\n    this.errors.push({\r\n      message: `Unexpected character: '${ch}'`,\r\n      line: startLine,\r\n      column: startColumn,\r\n    });\r\n  }\r\n\r\n  // =========================================================================\r\n  // HELPER METHODS\r\n  // =========================================================================\r\n\r\n  /**\r\n   * Peek at current character without consuming it\r\n   */\r\n  peek(offset = 0) {\r\n    const pos = this.position + offset;\r\n    if (pos >= this.source.length) return null;\r\n    return this.source[pos];\r\n  }\r\n\r\n  /**\r\n   * Peek at next character\r\n   */\r\n  peekNext() {\r\n    return this.peek(1);\r\n  }\r\n\r\n  /**\r\n   * Consume and return current character\r\n   */\r\n  advance() {\r\n    const ch = this.source[this.position];\r\n    this.position++;\r\n    this.column++;\r\n    return ch;\r\n  }\r\n\r\n  /**\r\n   * Check if character is whitespace (excluding newlines)\r\n   */\r\n  isWhitespace(ch) {\r\n    return ch === ' ' || ch === '\\t' || ch === '\\r' || ch === '\\n';\r\n  }\r\n\r\n  /**\r\n   * Check if character is a digit\r\n   */\r\n  isDigit(ch) {\r\n    return ch >= '0' && ch <= '9';\r\n  }\r\n\r\n  /**\r\n   * Check if character can start an identifier\r\n   */\r\n  isIdentifierStart(ch) {\r\n    if (!ch) return false;\r\n    return (ch >= 'a' && ch <= 'z') ||\r\n           (ch >= 'A' && ch <= 'Z') ||\r\n           ch === '_' ||\r\n           ch === '$';\r\n  }\r\n\r\n  /**\r\n   * Check if character can be part of an identifier\r\n   */\r\n  isIdentifierPart(ch) {\r\n    if (!ch) return false;\r\n    return this.isIdentifierStart(ch) || this.isDigit(ch);\r\n  }\r\n\r\n  /**\r\n   * Get escape sequence value\r\n   */\r\n  getEscapeSequence(ch) {\r\n    const escapes = {\r\n      'n': '\\n',\r\n      't': '\\t',\r\n      'r': '\\r',\r\n      '\\\\': '\\\\',\r\n      '\"': '\"',\r\n      \"'\": \"'\",\r\n      '`': '`',\r\n      '0': '\\0',\r\n    };\r\n    return escapes[ch] || ch;\r\n  }\r\n\r\n  /**\r\n   * Get all tokens (convenience method)\r\n   */\r\n  getTokens() {\r\n    return this.tokens;\r\n  }\r\n\r\n  /**\r\n   * Get all errors\r\n   */\r\n  getErrors() {\r\n    return this.errors;\r\n  }\r\n\r\n  /**\r\n   * Pretty-print tokens for debugging\r\n   */\r\n  printTokens() {\r\n    console.log('\\n=== TOKENS ===\\n');\r\n    this.tokens.forEach((token, index) => {\r\n      console.log(`[${index}] ${token.toString()}`);\r\n    });\r\n    console.log(`\\nTotal: ${this.tokens.length} tokens\\n`);\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport {\r\n  Token,\r\n  Lexer,\r\n  TokenType,\r\n};", "/**\n * FlutterJS Logger - Centralized Debug Output System\n * \n * Instead of console.log() everywhere, use this logger to:\n * - Write debug logs to a file (.debug folder)\n * - Maintain clean console output\n * - Enable/disable debug modes per component\n * - Group related logs together\n * - Support multiple log levels\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\nclass Logger {\n  constructor(options = {}) {\n    this.options = {\n      debugDir: '.debug',\n      enabled: true,\n      level: 'info',  // 'error', 'warn', 'info', 'debug', 'trace'\n      writeToFile: true,\n      writeToConsole: false,  // Set to true only for critical errors\n      includeTimestamp: true,\n      includeStackTrace: false,\n      maxFileSize: 10 * 1024 * 1024,  // 10MB\n      ...options,\n    };\n\n    this.logLevels = {\n      'error': 0,\n      'warn': 1,\n      'info': 2,\n      'debug': 3,\n      'trace': 4,\n    };\n\n    this.currentLevel = this.logLevels[this.options.level];\n    this.logs = [];\n    this.logSessions = {};\n    this.indentLevel = 0;\n\n    // Ensure debug directory exists\n    if (this.options.writeToFile) {\n      this.ensureDebugDir();\n    }\n  }\n\n  /**\n   * Ensure .debug directory exists\n   */\n  ensureDebugDir() {\n    if (!fs.existsSync(this.options.debugDir)) {\n      fs.mkdirSync(this.options.debugDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Get file path for a specific component\n   */\n  getLogFilePath(component = 'general') {\n    return path.join(this.options.debugDir, `${component}.log`);\n  }\n\n  /**\n   * Check if log level should be written\n   */\n  shouldLog(level) {\n    return this.logLevels[level] <= this.currentLevel;\n  }\n\n  /**\n   * Format log entry\n   */\n  formatEntry(level, component, message, data = null) {\n    const timestamp = this.options.includeTimestamp\n      ? new Date().toISOString()\n      : '';\n\n    const indent = '  '.repeat(this.indentLevel);\n    const levelStr = level.toUpperCase().padEnd(5);\n    const componentStr = component.padEnd(20);\n\n    let entry = `${timestamp} [${levelStr}] [${componentStr}] ${indent}${message}`;\n\n    if (data) {\n      entry += '\\n' + indent + JSON.stringify(data, null, 2);\n    }\n\n    return entry;\n  }\n\n  /**\n   * Internal write method\n   */\n  write(level, component, message, data) {\n    if (!this.shouldLog(level)) return;\n\n    const entry = this.formatEntry(level, component, message, data);\n    this.logs.push(entry);\n\n    // Write to console if enabled (only for critical messages)\n    if (this.options.writeToConsole && level === 'error') {\n      console.error(`${component}: ${message}`, data || '');\n    }\n\n    // Write to file\n    if (this.options.writeToFile) {\n      this.writeToFile(component, entry);\n    }\n  }\n\n  /**\n   * Write entry to file\n   */\n  writeToFile(component, entry) {\n    try {\n      const filePath = this.getLogFilePath(component);\n      fs.appendFileSync(filePath, entry + '\\n', 'utf-8');\n\n      // Check file size and rotate if needed\n      const stats = fs.statSync(filePath);\n      if (stats.size > this.options.maxFileSize) {\n        this.rotateLogFile(filePath);\n      }\n    } catch (error) {\n      console.error(`Logger failed to write to ${component}: ${error.message}`);\n    }\n  }\n\n  /**\n   * Rotate log file when it gets too large\n   */\n  rotateLogFile(filePath) {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const backupPath = filePath.replace('.log', `.${timestamp}.log`);\n    fs.renameSync(filePath, backupPath);\n  }\n\n  // =========================================================================\n  // PUBLIC API\n  // =========================================================================\n\n  /**\n   * Start a named session (group of related logs)\n   */\n  startSession(name, component = 'general') {\n    this.logSessions[name] = {\n      component,\n      startTime: Date.now(),\n      startIndent: this.indentLevel,\n    };\n    this.indent();\n    this.info(component, `\u25BA START SESSION: ${name}`);\n  }\n\n  /**\n   * End a named session\n   */\n  endSession(name, component = 'general') {\n    if (this.logSessions[name]) {\n      const duration = Date.now() - this.logSessions[name].startTime;\n      this.info(component, `\u25C4 END SESSION: ${name} (${duration}ms)`);\n      this.unindent();\n      delete this.logSessions[name];\n    }\n  }\n\n  /**\n   * Increase indent level\n   */\n  indent() {\n    this.indentLevel++;\n  }\n\n  /**\n   * Decrease indent level\n   */\n  unindent() {\n    this.indentLevel = Math.max(0, this.indentLevel - 1);\n  }\n\n  /**\n   * Error level\n   */\n  error(component, message, data) {\n    this.write('error', component, message, data);\n  }\n\n  /**\n   * Warning level\n   */\n  warn(component, message, data) {\n    this.write('warn', component, message, data);\n  }\n\n  /**\n   * Info level\n   */\n  info(component, message, data) {\n    this.write('info', component, message, data);\n  }\n\n  /**\n   * Debug level\n   */\n  debug(component, message, data) {\n    this.write('debug', component, message, data);\n  }\n\n  /**\n   * Trace level (most verbose)\n   */\n  trace(component, message, data) {\n    this.write('trace', component, message, data);\n  }\n\n  /**\n   * Log a method entry/exit pair\n   */\n  methodEntry(component, methodName, params = null) {\n    this.indent();\n    this.trace(component, `\u2192 ${methodName}()`, params);\n  }\n\n  /**\n   * Log method exit\n   */\n  methodExit(component, methodName, result = null) {\n    this.trace(component, `\u2190 ${methodName}()`, result);\n    this.unindent();\n  }\n\n  /**\n   * Log a successful step\n   */\n  success(component, message, data) {\n    this.write('info', component, `\u2713 ${message}`, data);\n  }\n\n  /**\n   * Log a failure\n   */\n  failure(component, message, error) {\n    this.write('error', component, `\u2717 ${message}`, error);\n  }\n\n  /**\n   * Log a step count (e.g., \"Found 5 widgets\")\n   */\n  count(component, label, count) {\n    this.write('info', component, `${label}: ${count}`);\n  }\n\n  /**\n   * Create a scoped logger for a specific component\n   */\n  createComponentLogger(componentName) {\n    return {\n      error: (msg, data) => this.error(componentName, msg, data),\n      warn: (msg, data) => this.warn(componentName, msg, data),\n      info: (msg, data) => this.info(componentName, msg, data),\n      debug: (msg, data) => this.debug(componentName, msg, data),\n      trace: (msg, data) => this.trace(componentName, msg, data),\n      success: (msg, data) => this.success(componentName, msg, data),\n      failure: (msg, err) => this.failure(componentName, msg, err),\n      methodEntry: (method, params) => this.methodEntry(componentName, method, params),\n      methodExit: (method, result) => this.methodExit(componentName, method, result),\n      startSession: (name) => this.startSession(name, componentName),\n      endSession: (name) => this.endSession(name, componentName),\n      indent: () => this.indent(),\n      unindent: () => this.unindent(),\n    };\n  }\n\n  /**\n   * Get all logs as a single string\n   */\n  getAllLogs() {\n    return this.logs.join('\\n');\n  }\n\n  /**\n   * Save all logs to files\n   */\n  saveLogs() {\n    try {\n      const allLogsPath = path.join(this.options.debugDir, '_all.log');\n      fs.writeFileSync(allLogsPath, this.getAllLogs(), 'utf-8');\n      return allLogsPath;\n    } catch (error) {\n      console.error('Failed to save logs:', error.message);\n      return null;\n    }\n  }\n\n  /**\n   * Clear debug directory\n   */\n  clearDebugDir() {\n    try {\n      if (fs.existsSync(this.options.debugDir)) {\n        fs.rmSync(this.options.debugDir, { recursive: true, force: true });\n        this.ensureDebugDir();\n      }\n    } catch (error) {\n      console.error('Failed to clear debug directory:', error.message);\n    }\n  }\n\n  /**\n   * Read all debug files and return as object\n   */\n  readDebugFiles() {\n    const files = {};\n    try {\n      const entries = fs.readdirSync(this.options.debugDir);\n      entries.forEach((file) => {\n        if (file.endsWith('.log')) {\n          const filePath = path.join(this.options.debugDir, file);\n          files[file] = fs.readFileSync(filePath, 'utf-8');\n        }\n      });\n    } catch (error) {\n      console.error('Failed to read debug files:', error.message);\n    }\n    return files;\n  }\n\n  /**\n   * Get analysis report of logs (counts, errors, warnings, etc.)\n   */\n  getReport() {\n    const report = {\n      totalEntries: this.logs.length,\n      errors: 0,\n      warnings: 0,\n      info: 0,\n      debug: 0,\n      trace: 0,\n      sessions: Object.keys(this.logSessions).length,\n      debugFiles: [],\n    };\n\n    this.logs.forEach((log) => {\n      if (log.includes('[ERROR]')) report.errors++;\n      else if (log.includes('[WARN]')) report.warnings++;\n      else if (log.includes('[INFO]')) report.info++;\n      else if (log.includes('[DEBUG]')) report.debug++;\n      else if (log.includes('[TRACE]')) report.trace++;\n    });\n\n    try {\n      report.debugFiles = fs.readdirSync(this.options.debugDir)\n        .filter((f) => f.endsWith('.log'));\n    } catch (error) {\n      // Ignore\n    }\n\n    return report;\n  }\n}\n\n/**\n * Global singleton logger instance\n */\nlet globalLogger = null;\n\nexport function initLogger(options = {}) {\n  globalLogger = new Logger(options);\n  return globalLogger;\n}\n\nexport function getLogger() {\n  if (!globalLogger) {\n    globalLogger = new Logger();\n  }\n  return globalLogger;\n}\n\nexport { Logger };\n", "/**\n * FlutterJS Parser - Converts tokens to AST (FIXED VERSION)\n * Phase 1.2 MVP Implementation - Complete Fixes\n * \n * Final fix: parseParameterList handles UNDEFINED and NULL token types\n */\n\n\nimport { TokenType } from './lexer.js';\nimport { getLogger } from './flutterjs_logger.js';\n\n// ============================================================================\n// AST NODE CLASSES\n// ============================================================================\n\nclass ASTNode {\n  constructor(type, location) {\n    this.type = type;\n    this.location = location;\n  }\n}\n\nclass Program extends ASTNode {\n  constructor(body = [], location = null) {\n    super('Program', location);\n    this.body = body;\n  }\n}\n\nclass ImportDeclaration extends ASTNode {\n  constructor(specifiers = [], source = null, location = null) {\n    super('ImportDeclaration', location);\n    this.specifiers = specifiers;\n    this.source = source;\n  }\n}\n\nclass ImportSpecifier extends ASTNode {\n  constructor(imported = null, local = null, location = null) {\n    super('ImportSpecifier', location);\n    this.imported = imported;\n    this.local = local;\n  }\n}\n\nclass ClassDeclaration extends ASTNode {\n  constructor(id = null, superClass = null, body = null, location = null) {\n    super('ClassDeclaration', location);\n    this.id = id;\n    this.superClass = superClass;\n    this.body = body;\n  }\n}\n\nclass ClassBody extends ASTNode {\n  constructor(fields = [], methods = [], location = null) {\n    super('ClassBody', location);\n    this.fields = fields;\n    this.methods = methods;\n  }\n}\n\nclass FieldDeclaration extends ASTNode {\n  constructor(key = null, initialValue = null, location = null) {\n    super('FieldDeclaration', location);\n    this.key = key;\n    this.initialValue = initialValue;\n  }\n}\n\nclass MethodDeclaration extends ASTNode {\n  constructor(key = null, params = [], body = null, location = null) {\n    super('MethodDeclaration', location);\n    this.key = key;\n    this.params = params;\n    this.body = body;\n  }\n}\n\nclass Parameter extends ASTNode {\n  constructor(name = null, optional = false, defaultValue = null, location = null) {\n    super('Parameter', location);\n    this.name = name;\n    this.optional = optional;\n    this.defaultValue = defaultValue;\n  }\n}\n\nclass FunctionDeclaration extends ASTNode {\n  constructor(id = null, params = [], body = null, isAsync = false, location = null) {\n    super('FunctionDeclaration', location);\n    this.id = id;\n    this.params = params;\n    this.body = body;\n    this.isAsync = isAsync;\n  }\n}\n\nclass BlockStatement extends ASTNode {\n  constructor(body = [], location = null) {\n    super('BlockStatement', location);\n    this.body = body;\n  }\n}\n\nclass ReturnStatement extends ASTNode {\n  constructor(argument = null, location = null) {\n    super('ReturnStatement', location);\n    this.argument = argument;\n  }\n}\n\nclass ExpressionStatement extends ASTNode {\n  constructor(expression = null, location = null) {\n    super('ExpressionStatement', location);\n    this.expression = expression;\n  }\n}\n\nclass Identifier extends ASTNode {\n  constructor(name = '', location = null) {\n    super('Identifier', location);\n    this.name = name;\n  }\n}\n\nclass Literal extends ASTNode {\n  constructor(value = null, raw = '', type = 'string', location = null) {\n    super('Literal', location);\n    this.value = value;\n    this.raw = raw;\n    this.literalType = type;\n  }\n}\n\nclass CallExpression extends ASTNode {\n  constructor(callee = null, args = [], location = null) {\n    super('CallExpression', location);\n    this.callee = callee;\n    this.args = args;\n  }\n}\n\nclass NewExpression extends ASTNode {\n  constructor(callee = null, args = [], location = null) {\n    super('NewExpression', location);\n    this.callee = callee;\n    this.args = args;\n    this.isConst = false;\n  }\n}\n\nclass ObjectLiteral extends ASTNode {\n  constructor(properties = [], location = null) {\n    super('ObjectLiteral', location);\n    this.properties = properties;\n  }\n}\n\nclass Property extends ASTNode {\n  constructor(key = null, value = null, location = null) {\n    super('Property', location);\n    this.key = key;\n    this.value = value;\n    this.shorthand = false;\n  }\n}\n\nclass ArrowFunctionExpression extends ASTNode {\n  constructor(params = [], body = null, location = null) {\n    super('ArrowFunctionExpression', location);\n    this.params = params;\n    this.body = body;\n  }\n}\n\nclass MemberExpression extends ASTNode {\n  constructor(object = null, property = null, computed = false, location = null) {\n    super('MemberExpression', location);\n    this.object = object;\n    this.property = property;\n    this.computed = computed;\n  }\n}\n\n// ============================================================================\n// PARSER CLASS\n// ============================================================================\n\nclass Parser {\n  constructor(tokens = [], options = {}) {\n    this.tokens = tokens;\n    this.current = 0;\n    this.errors = [];\n    this.options = { strict: false, ...options };\n    // NEW: Call stack tracking\n    this.callStack = [];\n\n    this.debugMode = true;\n  }\n\n  parse() {\n    const body = [];\n\n    while (!this.isAtEnd()) {\n      try {\n        const stmt = this.parseTopLevel();\n        if (stmt) {\n          body.push(stmt);\n        }\n      } catch (error) {\n        this.errors.push(error);\n        this.synchronize();\n      }\n    }\n\n    return new Program(body);\n  }\n\n  parseTopLevel() {\n    if (this.isAtEnd()) return null;\n\n    if (this.isKeyword('import')) {\n      this.advance();\n      return this.parseImportDeclaration();\n    }\n\n    if (this.isKeyword('class')) {\n      this.advance();\n      return this.parseClassDeclaration();\n    }\n\n    if (this.isKeyword('function')) {\n      this.advance();\n      return this.parseFunctionDeclaration();\n    }\n\n    const expr = this.parseExpression();\n    this.consumeStatementEnd();\n    return new ExpressionStatement(expr, this.getLocation());\n  }\n\n  isKeyword(value) {\n    if (this.isAtEnd()) return false;\n    const token = this.peek();\n    return token.type === TokenType.KEYWORD && token.value === value;\n  }\n\n  isPunctuation(value) {\n    if (this.isAtEnd()) return false;\n    const token = this.peek();\n    return token.type === TokenType.PUNCTUATION && token.value === value;\n  }\n\n  isOperator(value) {\n    if (this.isAtEnd()) return false;\n    const token = this.peek();\n    return token.type === TokenType.OPERATOR && token.value === value;\n  }\n\n  parseImportDeclaration() {\n    const startLocation = this.getLocation();\n    const specifiers = [];\n\n    if (this.isPunctuation('{')) {\n      this.advance();\n      while (!this.isPunctuation('}') && !this.isAtEnd()) {\n        const name = this.consume(TokenType.IDENTIFIER, 'Expected identifier').value;\n        const imported = new Identifier(name);\n        let local = imported;\n\n        if (this.isKeyword('as')) {\n          this.advance();\n          const localName = this.consume(TokenType.IDENTIFIER, 'Expected identifier').value;\n          local = new Identifier(localName);\n        }\n\n        specifiers.push(new ImportSpecifier(imported, local));\n\n        if (!this.isPunctuation(',')) break;\n        this.advance();\n      }\n      this.consume(TokenType.PUNCTUATION, 'Expected }');\n    }\n\n    this.consume(TokenType.KEYWORD, 'Expected from');\n    const source = new Literal(\n      this.consume(TokenType.STRING, 'Expected string').value,\n      '',\n      'string'\n    );\n    this.consumeStatementEnd();\n\n    return new ImportDeclaration(specifiers, source, startLocation);\n  }\n\n  parseClassDeclaration() {\n    const logger = getLogger().createComponentLogger('Parser.parseClassDeclaration');\n    logger.startSession('parseClassDeclaration');\n    logger.trace(`  Current token: ${this.peek().value} (${this.peek().type})`);\n\n    const startLocation = this.getLocation();\n    const nameToken = this.consume(TokenType.IDENTIFIER, 'Expected class name');\n    const name = new Identifier(nameToken.value);\n    logger.trace(`  Class name: ${name.name}`);\n\n    let superClass = null;\n    if (this.isKeyword('extends')) {\n      this.advance();\n      const superName = this.consume(TokenType.IDENTIFIER, 'Expected superclass name').value;\n      superClass = new Identifier(superName);\n      logger.trace(`  Extends: ${superClass.name}`);\n\n      // Skip generic type parameters like <MyCounter>\n      if (this.isOperator('<')) {\n        this.advance();\n        this.consume(TokenType.IDENTIFIER, 'Expected type name');\n        this.consume(TokenType.OPERATOR, 'Expected >');\n      }\n    }\n\n    logger.trace(`  Looking for opening brace...`);\n    logger.trace(`  Current token: ${this.peek().value} (${this.peek().type})`);\n    this.consume(TokenType.PUNCTUATION, 'Expected {');\n\n    const fields = [];\n    const methods = [];\n\n    logger.trace(`  Parsing class body...`);\n    let itemCount = 0;\n\n    while (!this.isPunctuation('}') && !this.isAtEnd()) {\n      logger.trace(`    [item ${itemCount}] Current token: ${this.peek().value} (${this.peek().type})`);\n\n      // Skip semicolons\n      if (this.isPunctuation(';')) {\n        logger.trace(`    Skipping semicolon`);\n        this.advance();\n        continue;\n      }\n\n      // Check for constructor (always a method)\n      if (this.isKeyword('constructor')) {\n        logger.trace(`    Found constructor`);\n        methods.push(this.parseMethodDeclaration());\n        itemCount++;\n        continue;\n      }\n\n      // Check for field or method\n      if (this.check(TokenType.IDENTIFIER)) {\n        const currentPos = this.current;\n        const idToken = this.peek();\n        const fieldName = idToken.value;\n        logger.trace(`    Found identifier: ${fieldName}`);\n        this.advance();\n\n        // CASE 1: Field initializer - IDENTIFIER = value\n        if (this.isOperator('=')) {\n          logger.trace(`      -> This is a FIELD (followed by =)`);\n          this.current = currentPos; // Rewind\n          try {\n            fields.push(this.parseFieldDeclaration());\n            logger.trace(`      Field parsed successfully`);\n            itemCount++;\n            continue;\n          } catch (e) {\n            console.error(`      ERROR parsing field: ${e.message}`);\n            throw e;\n          }\n        }\n\n        // CASE 2: Method - IDENTIFIER ( params )\n        if (this.isPunctuation('(')) {\n          logger.trace(`      -> This is a METHOD (followed by '(')`);\n          this.current = currentPos; // Rewind\n          try {\n            methods.push(this.parseMethodDeclaration());\n            logger.trace(`      Method parsed successfully`);\n            itemCount++;\n            continue;\n          } catch (e) {\n            console.error(`      ERROR parsing method: ${e.message}`);\n            throw e;\n          }\n        }\n\n        logger.trace(`      -> Unknown pattern, skipping`);\n        this.advance();\n        continue;\n      }\n\n      // Skip unknown tokens\n      logger.trace(`    Skipping unknown token: ${this.peek().value}`);\n      this.advance();\n    }\n\n    logger.trace(`  Class body parsing complete. Found ${fields.length} fields, ${methods.length} methods`);\n\n    this.consume(TokenType.PUNCTUATION, 'Expected }');\n    const body = new ClassBody(fields, methods);\n    logger.trace(`[parseClassDeclaration] SUCCESS\\n`);\n    return new ClassDeclaration(name, superClass, body, startLocation);\n  }\n\n  parseMethodDeclaration() {\n    const logger = getLogger().createComponentLogger('Parser.parseMethodDeclaration');\n    logger.startSession(`      [parseMethodDeclaration] STARTING`);\n    logger.trace(`        Current: ${this.peek().value}`);\n\n    const startLocation = this.getLocation();\n\n    let methodName;\n    if (this.isKeyword('constructor')) {\n      methodName = 'constructor';\n      this.advance();\n    } else {\n      methodName = this.consume(TokenType.IDENTIFIER, 'Expected method name').value;\n    }\n\n    logger.trace(`        Method name: ${methodName}`);\n    const key = new Identifier(methodName);\n\n    this.consume(TokenType.PUNCTUATION, 'Expected (');\n    const params = this.parseParameterList();\n    logger.trace(`        Parameters: ${params.length}`);\n    this.consume(TokenType.PUNCTUATION, 'Expected )');\n\n    let body = null;\n    if (this.isOperator('=>')) {\n      logger.trace(`        Arrow function body`);\n      this.advance();\n      body = this.parseExpression();\n    } else if (this.isPunctuation('{')) {\n      logger.trace(`        Block body`);\n      this.advance();\n      body = this.parseBlock();\n    }\n\n    logger.trace(`      [parseMethodDeclaration] SUCCESS`);\n    return new MethodDeclaration(key, params, body, startLocation);\n  }\n  parseFieldDeclaration() {\n    console.log(`      [parseFieldDeclaration] STARTING`);\n    console.log(`        Current: ${this.peek().value}`);\n\n    const startLocation = this.getLocation();\n    const fieldName = this.consume(TokenType.IDENTIFIER, 'Expected field name').value;\n    const key = new Identifier(fieldName);\n    console.log(`        Field name: ${fieldName}`);\n\n    let initialValue = null;\n    if (this.isOperator('=')) {\n      console.log(`        Found = operator, parsing initializer...`);\n      this.advance();\n      try {\n        initialValue = this.parseExpression();\n        console.log(`        Initializer parsed: ${initialValue.type}`);\n      } catch (e) {\n        console.error(`        ERROR parsing initializer: ${e.message}`);\n        throw e;\n      }\n    }\n\n    this.consumeStatementEnd();\n    console.log(`      [parseFieldDeclaration] SUCCESS`);\n    return new FieldDeclaration(key, initialValue, startLocation);\n  }\n\n  parseFunctionDeclaration() {\n    const startLocation = this.getLocation();\n    const nameToken = this.consume(TokenType.IDENTIFIER, 'Expected function name');\n    const name = nameToken.value ? new Identifier(nameToken.value) : null;\n\n    this.consume(TokenType.PUNCTUATION, 'Expected (');\n    const params = this.parseParameterList();\n    this.consume(TokenType.PUNCTUATION, 'Expected )');\n\n    this.consume(TokenType.PUNCTUATION, 'Expected {');\n    const body = this.parseBlock();\n\n    return new FunctionDeclaration(name, params, body, false, startLocation);\n  }\n\n  /**\n   * Parse parameter list - FIXED to handle UNDEFINED and NULL token types\n   */\n  parseParameterList() {\n    const params = [];\n\n    while (!this.isPunctuation(')') && !this.isAtEnd()) {\n      const paramLocation = this.getLocation();\n\n      // Handle destructuring: { key = value }\n      if (this.isPunctuation('{')) {\n        this.advance();\n        while (!this.isPunctuation('}') && !this.isAtEnd()) {\n          const paramName = this.consume(TokenType.IDENTIFIER, 'Expected param name').value;\n          let defaultValue = null;\n\n          if (this.isOperator('=')) {\n            this.advance();\n            // FIXED: Check token type, not just keywords\n            const token = this.peek();\n\n            if (this.check(TokenType.IDENTIFIER)) {\n              defaultValue = new Identifier(this.advance().value);\n            } else if (this.check(TokenType.NUMBER)) {\n              defaultValue = new Literal(parseFloat(this.advance().value), '', 'number');\n            } else if (this.check(TokenType.UNDEFINED)) {\n              // FIXED: Handle UNDEFINED token type\n              this.advance();\n              defaultValue = new Literal(undefined, 'undefined', 'undefined');\n            } else if (this.check(TokenType.NULL)) {\n              // FIXED: Handle NULL token type\n              this.advance();\n              defaultValue = new Literal(null, 'null', 'null');\n            } else if (this.isKeyword('undefined')) {\n              this.advance();\n              defaultValue = new Literal(undefined, 'undefined', 'undefined');\n            } else if (this.isKeyword('null')) {\n              this.advance();\n              defaultValue = new Literal(null, 'null', 'null');\n            }\n          }\n\n          params.push(new Parameter(new Identifier(paramName), defaultValue !== null, defaultValue, paramLocation));\n\n          if (!this.isPunctuation(',')) break;\n          this.advance();\n        }\n        this.consume(TokenType.PUNCTUATION, 'Expected }');\n\n        // Handle = {} after destructuring\n        if (this.isOperator('=')) {\n          this.advance();\n          if (this.isPunctuation('{')) {\n            this.advance();\n            let braceDepth = 1;\n            while (braceDepth > 0 && !this.isAtEnd()) {\n              if (this.isPunctuation('{')) braceDepth++;\n              else if (this.isPunctuation('}')) braceDepth--;\n              if (braceDepth > 0) this.advance();\n            }\n            this.consume(TokenType.PUNCTUATION, 'Expected }');\n          }\n        }\n      } else if (this.check(TokenType.IDENTIFIER)) {\n        // Regular parameter\n        const paramName = this.consume(TokenType.IDENTIFIER, 'Expected param name').value;\n        let defaultValue = null;\n\n        if (this.isOperator('=')) {\n          this.advance();\n          const token = this.peek();\n\n          if (this.check(TokenType.IDENTIFIER)) {\n            defaultValue = new Identifier(this.advance().value);\n          } else if (this.check(TokenType.NUMBER)) {\n            defaultValue = new Literal(parseFloat(this.advance().value), '', 'number');\n          } else if (this.check(TokenType.UNDEFINED)) {\n            this.advance();\n            defaultValue = new Literal(undefined, 'undefined', 'undefined');\n          } else if (this.check(TokenType.NULL)) {\n            this.advance();\n            defaultValue = new Literal(null, 'null', 'null');\n          } else if (this.isKeyword('undefined')) {\n            this.advance();\n            defaultValue = new Literal(undefined, 'undefined', 'undefined');\n          } else if (this.isKeyword('null')) {\n            this.advance();\n            defaultValue = new Literal(null, 'null', 'null');\n          }\n        }\n\n        params.push(new Parameter(new Identifier(paramName), defaultValue !== null, defaultValue, paramLocation));\n      } else {\n        break;\n      }\n\n      if (!this.isPunctuation(',')) break;\n      this.advance();\n    }\n\n    return params;\n  }\n\n  parseBlock() {\n    console.log(`\\n[parseBlock] STARTING at token: ${this.peek().value}`);\n\n    const startLocation = this.getLocation();\n    const statements = [];\n\n    while (!this.isPunctuation('}') && !this.isAtEnd()) {\n      console.log(`  [parseBlock] Current token: ${this.peek().value} (${this.peek().type})`);\n\n      if (this.isKeyword('return')) {\n        console.log(`    Found RETURN statement`);\n        this.advance();\n        let argument = null;\n\n        if (!this.isPunctuation(';') && !this.isPunctuation('}')) {\n          console.log(`    Parsing return argument...`);\n          try {\n            argument = this.parseExpression();\n            console.log(`    Return argument parsed successfully`);\n          } catch (error) {\n            console.error(`    \u274C ERROR parsing return argument: ${error.message}`);\n            console.error(`       Token was: ${this.peek().value}`);\n\n            // Skip to semicolon\n            while (!this.isPunctuation(';') && !this.isPunctuation('}') && !this.isAtEnd()) {\n              this.advance();\n            }\n          }\n        }\n\n        this.consumeStatementEnd();\n        statements.push(new ReturnStatement(argument, startLocation));\n\n      } else {\n        console.log(`    Parsing expression statement...`);\n        try {\n          const expr = this.parseExpression();\n          console.log(`    Expression parsed successfully: ${expr.type}`);\n          this.consumeStatementEnd();\n          statements.push(new ExpressionStatement(expr, startLocation));\n        } catch (error) {\n          console.error(`    \u274C ERROR parsing expression: ${error.message}`);\n          console.error(`       Token was: ${this.peek().value}`);\n\n          // Skip to next statement\n          while (!this.isPunctuation(';') && !this.isPunctuation('}') && !this.isAtEnd()) {\n            this.advance();\n          }\n          if (this.isPunctuation(';')) {\n            this.advance();\n          }\n        }\n      }\n    }\n\n    if (this.isPunctuation('}')) {\n      this.advance();\n    }\n\n    console.log(`[parseBlock] SUCCESS - ${statements.length} statements\\n`);\n    return new BlockStatement(statements, startLocation);\n  }\n\n  parseExpression() {\n    console.log(`    [parseExpression] Current token: ${this.peek().value}`);\n    try {\n      const result = this.parseAssignment();\n      console.log(`    [parseExpression] \u2713 Success, type: ${result.type}`);\n      return result;\n    } catch (e) {\n      console.error(`    [parseExpression] \u2717 Failed: ${e.message}`);\n      throw e;\n    }\n  }\n\n  parseAssignment() {\n    let expr = this.parseTernary();\n\n    if (this.isOperator('=')) {\n      this.advance();\n      const value = this.parseAssignment();\n      return { type: 'AssignmentExpression', left: expr, right: value };\n    }\n\n    return expr;\n  }\n\n  parseTernary() {\n    let expr = this.parseLogicalOr();\n\n    if (this.isOperator('?')) {\n      this.advance();\n      const consequent = this.parseExpression();\n      this.consume(TokenType.OPERATOR, 'Expected :');\n      const alternate = this.parseExpression();\n      return { type: 'ConditionalExpression', test: expr, consequent, alternate };\n    }\n\n    return expr;\n  }\n\n  parseLogicalOr() {\n    let expr = this.parseLogicalAnd();\n\n    while (this.isOperator('||')) {\n      this.advance();\n      const right = this.parseLogicalAnd();\n      expr = { type: 'LogicalExpression', operator: '||', left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseLogicalAnd() {\n    let expr = this.parseEquality();\n\n    while (this.isOperator('&&')) {\n      this.advance();\n      const right = this.parseEquality();\n      expr = { type: 'LogicalExpression', operator: '&&', left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseEquality() {\n    let expr = this.parseRelational();\n\n    while (this.isOperator('===') || this.isOperator('!==') || this.isOperator('==') || this.isOperator('!=')) {\n      const operator = this.advance().value;\n      const right = this.parseRelational();\n      expr = { type: 'BinaryExpression', operator, left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseRelational() {\n    let expr = this.parseAdditive();\n\n    while (this.isOperator('<') || this.isOperator('>') || this.isOperator('<=') || this.isOperator('>=')) {\n      const operator = this.advance().value;\n      const right = this.parseAdditive();\n      expr = { type: 'BinaryExpression', operator, left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseAdditive() {\n    let expr = this.parseMultiplicative();\n\n    while (this.isOperator('+') || this.isOperator('-')) {\n      const operator = this.advance().value;\n      const right = this.parseMultiplicative();\n      expr = { type: 'BinaryExpression', operator, left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseMultiplicative() {\n    let expr = this.parseUnary();\n\n    while (this.isOperator('*') || this.isOperator('/') || this.isOperator('%')) {\n      const operator = this.advance().value;\n      const right = this.parseUnary();\n      expr = { type: 'BinaryExpression', operator, left: expr, right };\n    }\n\n    return expr;\n  }\n\n  parseUnary() {\n    console.log(`        [parseUnary] Current: ${this.peek().value}`);\n\n    if (this.isOperator('!') || this.isOperator('-') || this.isOperator('+') || this.isOperator('~')) {\n      const operator = this.advance().value;\n      const expr = this.parseUnary();\n      return { type: 'UnaryExpression', operator, argument: expr };\n    }\n\n\n    console.log(`        [parseUnary] Calling parsePostfix`);\n    return this.parsePostfix();\n  }\n\n  parsePostfix() {\n    console.log(`        [parsePostfix] Starting, calling parseCall`);\n    let expr = this.parseCall();\n    console.log(`        [parsePostfix] parseCall returned: ${expr.type || expr.name}`);\n    console.log(`        [parsePostfix] Next token: ${this.peek().value}`);\n\n    while (true) {\n      if (this.isOperator('++') || this.isOperator('--')) {\n        const operator = this.advance().value;\n        expr = { type: 'UpdateExpression', operator, argument: expr, prefix: false };\n      } else if (this.isPunctuation('.')) {\n        console.log(`        [parsePostfix] Found . member access`);\n        this.advance();\n        const property = new Identifier(this.consume(TokenType.IDENTIFIER, 'Expected property').value);\n        expr = new MemberExpression(expr, property, false);\n        console.log(`        [parsePostfix] Created MemberExpression: ${expr.object.name}.${expr.property.name}`);\n      } else if (this.isPunctuation('[')) {\n        console.log(`        [parsePostfix] Found [ computed access`);\n        this.advance();\n        const property = this.parseExpression();\n        this.consume(TokenType.PUNCTUATION, 'Expected ]');\n        expr = new MemberExpression(expr, property, true);\n      } else {\n        console.log(`        [parsePostfix] No more postfix ops, returning ${expr.type}`);\n        break;\n      }\n    }\n\n    return expr;\n  }\n\n\n  parseCall() {\n    console.log(`        [parseCall] Starting, calling parsePrimary`);\n    let expr = this.parsePrimary();\n    console.log(`        [parseCall] parsePrimary returned: ${expr.type || expr.name}`);\n    console.log(`        [parseCall] Next token: ${this.peek().value} (${this.peek().type})`);\n\n    while (this.isPunctuation('(')) {\n      console.log(`        [parseCall] Found (, parsing function call`);\n      this.advance();\n      const args = this.parseArguments();\n      console.log(`        [parseCall] Parsed ${args.length} arguments`);\n      this.consume(TokenType.PUNCTUATION, 'Expected )');\n      expr = new CallExpression(expr, args);\n      console.log(`        [parseCall] Created CallExpression`);\n    }\n\n    console.log(`        [parseCall] Returning: ${expr.type}`);\n    return expr;\n  }\n\n  parsePrimary() {\n    console.log(`      [parsePrimary] Current: ${this.peek().value} (${this.peek().type})`);\n\n    // Handle 'this' keyword FIRST\n    if (this.isKeyword('this')) {\n      this.advance();\n      console.log(`      [parsePrimary] \u2713 this keyword`);\n      return new Identifier('this');\n    }\n\n    if (this.check(TokenType.STRING)) {\n      const token = this.advance();\n      console.log(`      [parsePrimary] \u2713 string literal: ${token.value}`);\n      return new Literal(token.value, token.value, 'string');\n    }\n\n    if (this.check(TokenType.NUMBER)) {\n      const token = this.advance();\n      console.log(`      [parsePrimary] \u2713 number literal: ${token.value}`);\n      return new Literal(parseFloat(token.value), token.value, 'number');\n    }\n\n    if (this.check(TokenType.BOOLEAN)) {\n      const token = this.advance();\n      console.log(`      [parsePrimary] \u2713 boolean: ${token.value}`);\n      return new Literal(token.value === 'true', token.value, 'boolean');\n    }\n\n    if (this.check(TokenType.NULL)) {\n      this.advance();\n      console.log(`      [parsePrimary] \u2713 null`);\n      return new Literal(null, 'null', 'null');\n    }\n\n    if (this.check(TokenType.UNDEFINED)) {\n      this.advance();\n      console.log(`      [parsePrimary] \u2713 undefined`);\n      return new Literal(undefined, 'undefined', 'undefined');\n    }\n\n    if (this.isKeyword('null')) {\n      this.advance();\n      console.log(`      [parsePrimary] \u2713 null keyword`);\n      return new Literal(null, 'null', 'null');\n    }\n\n    if (this.isKeyword('undefined')) {\n      this.advance();\n      console.log(`      [parsePrimary] \u2713 undefined keyword`);\n      return new Literal(undefined, 'undefined', 'undefined');\n    }\n\n    if (this.isPunctuation('(')) {\n      console.log(`      [parsePrimary] Found ( - checking for arrow function or grouped expr`);\n      const savedPos = this.current;\n      this.advance();\n\n      if (this.isPunctuation(')')) {\n        const nextPos = this.current + 1;\n        if (nextPos < this.tokens.length &&\n          this.tokens[nextPos].type === TokenType.OPERATOR &&\n          this.tokens[nextPos].value === '=>') {\n          console.log(`      [parsePrimary] \u2713 arrow function with no params: () => ...`);\n          this.consume(TokenType.PUNCTUATION, 'Expected )');\n          this.consume(TokenType.OPERATOR, 'Expected =>');\n          const body = this.parseExpression();\n          return new ArrowFunctionExpression([], body);\n        }\n      }\n\n      const expr = this.parseExpression();\n      this.consume(TokenType.PUNCTUATION, 'Expected )');\n\n      if (this.isOperator('=>')) {\n        console.log(`      [parsePrimary] \u2713 arrow function: (x) => ...`);\n        this.advance();\n        const body = this.parseExpression();\n        let params = [];\n        if (expr.type === 'Identifier') {\n          params = [new Parameter(expr, false, null)];\n        }\n        return new ArrowFunctionExpression(params, body);\n      }\n\n      console.log(`      [parsePrimary] \u2713 grouped expression`);\n      return expr;\n    }\n\n    if (this.isPunctuation('{')) {\n      console.log(`      [parsePrimary] \u2713 object literal`);\n      this.advance();\n      return this.parseObjectLiteral();\n    }\n\n    if (this.isPunctuation('[')) {\n      console.log(`      [parsePrimary] \u2713 array literal`);\n      this.advance();\n      const elements = [];\n      while (!this.isPunctuation(']') && !this.isAtEnd()) {\n        elements.push(this.parseExpression());\n        if (!this.isPunctuation(',')) break;\n        this.advance();\n      }\n      this.consume(TokenType.PUNCTUATION, 'Expected ]');\n      return { type: 'ArrayLiteral', elements };\n    }\n\n    if (this.isKeyword('new')) {\n      console.log(`      [parsePrimary] \u2713 new expression`);\n      this.advance();\n      const callee = new Identifier(this.consume(TokenType.IDENTIFIER, 'Expected class name').value);\n      this.consume(TokenType.PUNCTUATION, 'Expected (');\n      const args = this.parseArguments();\n      this.consume(TokenType.PUNCTUATION, 'Expected )');\n      return new NewExpression(callee, args);\n    }\n\n    if (this.isKeyword('const')) {\n      const savedPos = this.current;\n      this.advance();\n      if (this.isKeyword('new')) {\n        console.log(`      [parsePrimary] \u2713 const new expression`);\n        this.advance();\n        const callee = new Identifier(this.consume(TokenType.IDENTIFIER, 'Expected class name').value);\n        this.consume(TokenType.PUNCTUATION, 'Expected (');\n        const args = this.parseArguments();\n        this.consume(TokenType.PUNCTUATION, 'Expected )');\n        const expr = new NewExpression(callee, args);\n        expr.isConst = true;\n        return expr;\n      }\n      this.current = savedPos;\n    }\n\n    if (this.check(TokenType.IDENTIFIER)) {\n      const token = this.advance();\n      const ident = new Identifier(token.value);\n      console.log(`      [parsePrimary] \u2713 identifier: ${token.value}`);\n\n      if (this.isOperator('=>')) {\n        console.log(`      [parsePrimary] \u2713 arrow function: x => ...`);\n        this.advance();\n        const body = this.parseExpression();\n        return new ArrowFunctionExpression([new Parameter(ident)], body);\n      }\n\n      return ident;\n    }\n\n    // If we get here, we couldn't parse anything\n    console.error(`      [parsePrimary] \u274C FAILED - Cannot parse token: ${this.peek().value} (${this.peek().type})`);\n    throw this.error('Expected expression');\n  }\n\n\n  enterMethod(methodName) {\n    if (!this.callStack) this.callStack = [];\n    this.callStack.push({\n      method: methodName,\n      line: this.peek().line,\n      column: this.peek().column,\n      token: this.peek().value,\n    });\n  }\n\n  parseObjectLiteral() {\n    this.enterMethod('parseObjectLiteral');\n    const properties = [];\n\n    try {\n      while (!this.isPunctuation('}') && !this.isAtEnd()) {\n        if (this.isPunctuation(',')) {\n          this.advance();\n          continue;\n        }\n\n        let key = null;\n        let shorthand = false;\n\n        if (this.isPunctuation('[')) {\n          this.advance();\n          key = this.parseExpression();\n          this.consume(TokenType.PUNCTUATION, 'Expected ]');\n        } else if (this.check(TokenType.IDENTIFIER)) {\n          const token = this.advance();\n          key = new Identifier(token.value);\n\n          if (this.isPunctuation(',') || this.isPunctuation('}')) {\n            shorthand = true;\n          }\n        } else if (this.check(TokenType.STRING)) {\n          const token = this.advance();\n          key = new Literal(token.value, token.value, 'string');\n        } else {\n          this.advance();\n          continue;\n        }\n\n        let value = key;\n        if (!shorthand && this.isPunctuation(':')) {\n          this.advance();\n\n          try {\n            value = this.parseTernary();\n          } catch (error) {\n            if (error.parserError) {\n              this.reportParserError(error.parserError);\n            }\n            value = key;\n\n            while (!this.isPunctuation(',') && !this.isPunctuation('}') && !this.isAtEnd()) {\n              this.advance();\n            }\n          }\n        }\n\n        const prop = new Property(key, value);\n        prop.shorthand = shorthand;\n        properties.push(prop);\n\n        if (this.isPunctuation(',')) {\n          this.advance();\n        }\n      }\n\n      if (this.isPunctuation('}')) {\n        this.advance();\n      }\n\n      this.exitMethod('parseObjectLiteral');\n      return new ObjectLiteral(properties);\n    } catch (e) {\n      this.exitMethod('parseObjectLiteral');\n      throw e;\n    }\n  }\n  parseArguments() {\n    const args = [];\n\n    while (!this.isPunctuation(')') && !this.isAtEnd()) {\n      try {\n        // \u2B50 KEY FIX: Use parseTernary() instead of parseLogicalOr()\n        // This allows all operators except assignment\n        args.push(this.parseTernary());\n      } catch (error) {\n        break;\n      }\n\n      if (!this.isPunctuation(',')) break;\n      this.advance();\n    }\n\n    return args;\n  }\n\n  check(type) {\n    if (this.isAtEnd()) return false;\n    return this.peek().type === type;\n  }\n\n  consume(type, message = '') {\n    if (this.check(type)) {\n      return this.advance();\n    }\n    throw this.error(message || `Expected ${type}`);\n  }\n\n  consumeStatementEnd() {\n    if (this.isPunctuation(';')) {\n      this.advance();\n    }\n  }\n\n  advance() {\n    if (!this.isAtEnd()) {\n      this.current++;\n    }\n    return this.previous();\n  }\n\n  peek() {\n    return this.tokens[this.current];\n  }\n\n  peekAhead(n = 1) {\n    const pos = this.current + n;\n    if (pos >= this.tokens.length) {\n      return this.tokens[this.tokens.length - 1];\n    }\n    return this.tokens[pos];\n  }\n\n  previous() {\n    return this.tokens[this.current - 1];\n  }\n\n  isAtEnd() {\n    return this.peek().type === TokenType.EOF;\n  }\n\n  getLocation() {\n    const token = this.peek();\n    return { line: token.line, column: token.column };\n  }\n  /**\n  * Enhanced error reporting with full call stack\n  */\n  error(message) {\n    const token = this.peek();\n    const errorObj = new Error(\n      `Parse error at line ${token.line}, column ${token.column}: ${message}`\n    );\n    errorObj.parserError = {\n      message: `Parse error at line ${token.line}, column ${token.column}: ${message}`,\n      line: token.line,\n      column: token.column,\n      token: { type: token.type, value: token.value },\n      callStack: this.callStack ? [...this.callStack] : [],\n    };\n    return errorObj;\n  }\n  /**\n   * Get context around current token (5 tokens before and after)\n   */\n  getContext() {\n    const start = Math.max(0, this.current - 5);\n    const end = Math.min(this.tokens.length, this.current + 6);\n\n    return {\n      before: this.tokens.slice(start, this.current).map(t => `${t.value}(${t.type})`).join(' '),\n      current: `\u2192 ${this.peek().value}(${this.peek().type}) \u2190`,\n      after: this.tokens.slice(this.current + 1, end).map(t => `${t.value}(${t.type})`).join(' '),\n    };\n  }\n  /**\n   * Track when exiting a parser method\n   */\n  exitMethod(methodName) {\n    if (!this.callStack) this.callStack = [];\n    if (this.callStack.length > 0) {\n      const last = this.callStack[this.callStack.length - 1];\n      if (last.method === methodName) {\n        this.callStack.pop();\n      }\n    }\n  }\n\n  getTokenContext() {\n    const start = Math.max(0, this.current - 5);\n    const end = Math.min(this.tokens.length, this.current + 6);\n\n    const before = this.tokens\n      .slice(start, this.current)\n      .map(t => `${t.value}`)\n      .join(' ');\n\n    const after = this.tokens\n      .slice(this.current + 1, end)\n      .map(t => `${t.value}`)\n      .join(' ');\n\n    return {\n      before: before,\n      current: `\u2192 ${this.peek().value} \u2190`,\n      after: after,\n    };\n  }\n\n  synchronize() {\n    this.advance();\n    while (!this.isAtEnd()) {\n      if (this.isPunctuation(';')) {\n        this.advance();\n        return;\n      }\n      if (this.isKeyword('class') || this.isKeyword('function') || this.isKeyword('import')) {\n        return;\n      }\n      this.advance();\n    }\n  }\n\n  getErrors() {\n    return this.errors;\n  }\n\n  /**\n   * Report error with full context\n   */\n  reportError(error) {\n    this.errors.push(error);\n\n    if (this.debugMode) {\n      console.error('\\n\u274C PARSER ERROR DETECTED:\\n');\n      console.error(`Message: ${error.message}\\n`);\n\n      console.error('\uD83D\uDCCD Token Context:');\n      console.error(`  Before:  ${error.context.before}`);\n      console.error(`  Current: ${error.context.current}`);\n      console.error(`  After:   ${error.context.after}\\n`);\n\n      console.error('\uD83D\uDCDA Call Stack (where error came from):');\n      if (error.callStack.length === 0) {\n        console.error('  (top level)\\n');\n      } else {\n        error.callStack.forEach((frame, idx) => {\n          const arrow = idx === error.callStack.length - 1 ? '\u2192' : ' ';\n          console.error(`  ${arrow} ${idx + 1}. ${frame.method}()`);\n          console.error(`     at token: \"${frame.token}\" (line ${frame.line}, col ${frame.column})`);\n        });\n        console.error('');\n      }\n    }\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport {\n  Parser,\n  Program,\n  ImportDeclaration,\n  ImportSpecifier,\n  ClassDeclaration,\n  ClassBody,\n  FieldDeclaration,\n  MethodDeclaration,\n  Parameter,\n  FunctionDeclaration,\n  BlockStatement,\n  ReturnStatement,\n  ExpressionStatement,\n  Identifier,\n  Literal,\n  CallExpression,\n  NewExpression,\n  ObjectLiteral,\n  Property,\n  ArrowFunctionExpression,\n  MemberExpression,\n  ASTNode,\n};", "/**\n * WidgetAnalyzer Enhancement - Track field references\n * \n * Understand that:\n *   _count = 0;        <- field declaration\n *   this._count        <- field reference\n * \n * These are the same thing!\n */\n\nimport { getLogger  } from './flutterjs_logger.js';\n\nclass WidgetAnalyzer {\n  constructor(ast, options = {}) {\n    this.ast = ast;\n    this.options = {\n      strict: false,\n      ...options,\n    };\n  this.logger = getLogger().createComponentLogger('WidgetAnalyzer');\n    this.widgets = new Map();        // key: className, value: Widget object\n    this.functions = new Map();      // key: functionName, value: Function object\n    this.imports = [];\n    this.externalDependencies = new Set();\n    this.entryPoint = null;\n    this.rootWidget = null;\n    this.widgetTree = null;\n    this.errors = [];\n  }\n\n  /**\n   * Main entry point - analyze entire AST\n   */\n  analyze() {\n    this.logger.startSession('WidgetAnalyzer');\n    if (!this.ast || !this.ast.body) {\n      throw new Error('Invalid AST provided');\n    }\n\n    this.logger.trace('[WidgetAnalyzer] Starting analysis...');\n\n    try {\n      // Phase 1: Extract all classes and functions\n      this.logger.trace('[WidgetAnalyzer] Phase 1: Extracting classes and functions...');\n      this.extractClassesAndFunctions();\n      this.logger.trace(`[WidgetAnalyzer]   Found ${this.widgets.size} classes in total`);\n\n      // Phase 2: Detect which classes are widgets\n      this.logger.trace('[WidgetAnalyzer] Phase 2: Detecting widgets...');\n      this.detectWidgets();\n      this.logger.trace(`[WidgetAnalyzer]   Detected widgets: ${Array.from(this.widgets.values()).filter(w => w.type !== 'class').length}`);\n\n      // Phase 3: Extract imports and dependencies\n      this.logger.trace('[WidgetAnalyzer] Phase 3: Extracting imports...');\n      this.extractImports();\n      this.logger.trace(`[WidgetAnalyzer]   Found ${this.imports.length} imports`);\n\n      // Phase 4: Find entry point\n      this.logger.trace('[WidgetAnalyzer] Phase 4: Finding entry point...');\n      this.findEntryPoint();\n      this.logger.trace(`[WidgetAnalyzer]   Entry point: ${this.entryPoint || 'NOT FOUND'}`);\n\n      // Phase 5: Build widget tree\n      this.logger.trace('[WidgetAnalyzer] Phase 5: Building widget tree...');\n      this.buildWidgetTree();\n      this.logger.trace(`[WidgetAnalyzer]   Tree root: ${this.rootWidget || 'NOT FOUND'}`);\n\n      this.logger.trace('[WidgetAnalyzer] Analysis complete\\n');\n\n      return this.getResults();\n    } catch (error) {\n      this.errors.push({\n        type: 'analysis-error',\n        message: error.message,\n        stack: error.stack,\n      });\n      return this.getResults();\n    }\n  }\n\n  /**\n   * Phase 1: Extract all classes and functions from AST\n   */\n  extractClassesAndFunctions() {\n    if (!this.ast.body) return;\n\n    for (const node of this.ast.body) {\n      if (node.type === 'ClassDeclaration') {\n        this.extractClassDeclaration(node);\n      } else if (node.type === 'FunctionDeclaration') {\n        this.extractFunctionDeclaration(node);\n      }\n    }\n  }\n\n  /**\n   * Extract a single class declaration\n   * Handles both field declarations and method declarations\n   */\n  extractClassDeclaration(classNode) {\n    const name = classNode.id?.name;\n    if (!name) return;\n\n    const superClass = classNode.superClass?.name || null;\n    const location = classNode.location;\n\n    const widget = {\n      name,\n      type: 'class',\n      location,\n      superClass,\n      constructor: null,\n      properties: [],      // Fields with their initial values\n      methods: [],\n      fieldReferences: {}, // Map of which methods use which fields\n      imports: [],\n      children: [],\n      linkedStateClass: null,\n    };\n\n    // Extract fields (declared with _count = 0; syntax)\n    if (classNode.body?.fields) {\n      classNode.body.fields.forEach((field) => {\n        const fieldName = field.key?.name;\n        const initialValue = field.initialValue ? this.expressionToString(field.initialValue) : null;\n\n        widget.properties.push({\n          name: fieldName,\n          initialValue: initialValue,\n          type: this.inferFieldType(field.initialValue),\n        });\n\n        // Track that this field exists\n        if (!widget.fieldReferences[fieldName]) {\n          widget.fieldReferences[fieldName] = [];\n        }\n      });\n    }\n\n    // Extract constructor\n    if (classNode.body?.methods) {\n      const constructorMethod = classNode.body.methods.find(\n        (m) => m.key?.name === 'constructor'\n      );\n      if (constructorMethod) {\n        widget.constructor = {\n          name: 'constructor',\n          params: constructorMethod.params || [],\n          location: constructorMethod.location,\n        };\n      }\n\n      // Extract other methods and track field usage\n      classNode.body.methods.forEach((method) => {\n        if (method.key?.name !== 'constructor') {\n          const methodName = method.key?.name;\n          const methodData = {\n            name: methodName,\n            params: method.params || [],\n            location: method.location,\n            hasBody: method.body !== null,\n            usesFields: [], // Which fields this method references\n          };\n\n          // Track field references in this method\n          if (method.body) {\n            const fieldRefs = this.findFieldReferencesInBody(method.body);\n            methodData.usesFields = fieldRefs;\n\n            // Update the field reference map\n            fieldRefs.forEach((fieldName) => {\n              if (widget.fieldReferences[fieldName]) {\n                widget.fieldReferences[fieldName].push(methodName);\n              }\n            });\n          }\n\n          widget.methods.push(methodData);\n        }\n      });\n    }\n\n    this.widgets.set(name, widget);\n    this.logger.trace(`[WidgetAnalyzer]     Extracted class: ${name} extends ${superClass}`);\n    if (widget.properties.length > 0) {\n      this.logger.trace(`[WidgetAnalyzer]       Fields: ${widget.properties.map(p => `${p.name}=${p.initialValue}`).join(', ')}`);\n    }\n  }\n\n  /**\n   * Find all field references (this._fieldName) in a method body\n   */\n  findFieldReferencesInBody(body) {\n    const fields = [];\n\n    // Simple traversal to find this.fieldName patterns\n    // This is a basic implementation - enhance as needed\n    const traverse = (node) => {\n      if (!node) return;\n\n      // Look for MemberExpression: this._fieldName\n      if (node.type === 'MemberExpression') {\n        if (node.object?.name === 'this' && node.property?.name) {\n          fields.push(node.property.name);\n        }\n      }\n\n      // Recursively traverse all node properties\n      for (const key in node) {\n        if (key !== 'location' && typeof node[key] === 'object') {\n          if (Array.isArray(node[key])) {\n            node[key].forEach(traverse);\n          } else {\n            traverse(node[key]);\n          }\n        }\n      }\n    };\n\n    traverse(body);\n    return [...new Set(fields)]; // Remove duplicates\n  }\n\n  /**\n   * Infer the type of a field from its initializer\n   */\n  inferFieldType(initialValue) {\n    if (!initialValue) return 'any';\n\n    if (initialValue.type === 'Literal') {\n      const val = initialValue.value;\n      if (typeof val === 'number') return 'int' | 'double';\n      if (typeof val === 'boolean') return 'bool';\n      if (typeof val === 'string') return 'String';\n      if (val === null) return 'null';\n    }\n\n    if (initialValue.type === 'Identifier') {\n      return initialValue.name;\n    }\n\n    if (initialValue.type === 'ArrayExpression') {\n      return 'List';\n    }\n\n    if (initialValue.type === 'ObjectExpression') {\n      return 'Map';\n    }\n\n    return 'dynamic';\n  }\n\n  /**\n   * Extract a function declaration\n   */\n  extractFunctionDeclaration(funcNode) {\n    const name = funcNode.id?.name || 'anonymous';\n    const location = funcNode.location;\n\n    const func = {\n      name,\n      type: 'function',\n      location,\n      params: funcNode.params?.map((p) => ({\n        name: p.name?.name || 'param',\n        optional: p.optional || false,\n      })) || [],\n      isAsync: funcNode.isAsync || false,\n      isEntryPoint: false,\n    };\n\n    this.functions.set(name, func);\n  }\n\n  /**\n   * Phase 2: Detect which classes are widgets\n   */\n  detectWidgets() {\n    this.widgets.forEach((widget) => {\n      if (!widget.superClass) {\n        widget.type = 'class';\n        return;\n      }\n\n      const superClass = widget.superClass;\n\n      if (superClass === 'StatelessWidget') {\n        widget.type = 'stateless';\n        this.logger.trace(`[WidgetAnalyzer]     ${widget.name} is StatelessWidget`);\n      } else if (superClass === 'StatefulWidget') {\n        widget.type = 'stateful';\n        this.logger.trace(`[WidgetAnalyzer]     ${widget.name} is StatefulWidget`);\n      } else if (superClass?.startsWith('State')) {\n        widget.type = 'state';\n        this.logger.trace(`[WidgetAnalyzer]     ${widget.name} is State class`);\n      } else {\n        widget.type = 'component';\n      }\n    });\n  }\n\n  /**\n   * Phase 3: Extract imports\n   */\n  extractImports() {\n    if (!this.ast.body) return;\n\n    this.ast.body.forEach((node) => {\n      if (node.type === 'ImportDeclaration') {\n        const source = node.source?.value;\n        const items = node.specifiers?.map((spec) => spec.imported?.name) || [];\n\n        this.imports.push({\n          source,\n          items,\n        });\n\n        this.externalDependencies.add(source);\n      }\n    });\n  }\n\n  /**\n   * Phase 4: Find entry point\n   */\n  findEntryPoint() {\n    if (this.functions.has('main')) {\n      this.entryPoint = 'main';\n      const mainFunc = this.functions.get('main');\n      mainFunc.isEntryPoint = true;\n\n      const mainAstNode = this.ast.body.find(\n        (n) => n.type === 'FunctionDeclaration' && n.id?.name === 'main'\n      );\n\n      if (mainAstNode?.body?.body) {\n        this.rootWidget = this.findRunAppWidget(mainAstNode.body.body);\n      }\n    }\n  }\n\n  /**\n   * Find which widget is passed to runApp()\n   */\n  findRunAppWidget(statements) {\n    for (const stmt of statements) {\n      if (stmt.type === 'ExpressionStatement' && stmt.expression?.type === 'CallExpression') {\n        const call = stmt.expression;\n        if (call.callee?.name === 'runApp' && call.args?.length > 0) {\n          return this.getWidgetNameFromExpression(call.args[0]);\n        }\n      }\n      if (stmt.type === 'ReturnStatement' && stmt.argument?.type === 'CallExpression') {\n        const call = stmt.argument;\n        if (call.callee?.name === 'runApp' && call.args?.length > 0) {\n          return this.getWidgetNameFromExpression(call.args[0]);\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Extract widget name from expression\n   */\n  getWidgetNameFromExpression(expr) {\n    if (!expr) return null;\n\n    if (expr.type === 'NewExpression') {\n      return expr.callee?.name;\n    }\n\n    if (expr.type === 'CallExpression') {\n      return expr.callee?.name;\n    }\n\n    if (expr.type === 'Identifier') {\n      return expr.name;\n    }\n\n    return null;\n  }\n\n  /**\n   * Phase 5: Build widget tree\n   */\n  buildWidgetTree() {\n    if (!this.rootWidget || !this.widgets.has(this.rootWidget)) {\n      return;\n    }\n\n    const rootWidget = this.widgets.get(this.rootWidget);\n    this.widgetTree = {\n      widget: rootWidget,\n      depth: 0,\n      children: [],\n    };\n  }\n\n  /**\n   * Convert expression to string representation\n   */\n  expressionToString(expr) {\n    if (!expr) return null;\n\n    if (expr.type === 'Literal') {\n      return expr.value;\n    }\n\n    if (expr.type === 'Identifier') {\n      const name = expr.name;\n      if (name === 'true' || name === 'false') return name === 'true';\n      if (name === 'null') return null;\n      if (name === 'undefined') return undefined;\n      return name;\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Get results\n   */\n  getResults() {\n    const widgetArray = Array.from(this.widgets.values()).filter(\n      (w) => w.type === 'stateless' || w.type === 'stateful' || w.type === 'state' || w.type === 'component'\n    );\n\n    this.logger.trace(`[WidgetAnalyzer] getResults() returning ${widgetArray.length} widgets`);\n\n    return {\n      widgets: widgetArray,\n      functions: Array.from(this.functions.values()),\n      imports: this.imports,\n      externalDependencies: Array.from(this.externalDependencies),\n      entryPoint: this.entryPoint,\n      rootWidget: this.rootWidget,\n      widgetTree: this.widgetTree,\n      errors: this.errors,\n    };\n  }\n\n  /**\n   * Get summary statistics\n   */\n  getSummary() {\n    const widgets = Array.from(this.widgets.values());\n    const statelessCount = widgets.filter((w) => w.type === 'stateless').length;\n    const statefulCount = widgets.filter((w) => w.type === 'stateful').length;\n    const stateCount = widgets.filter((w) => w.type === 'state').length;\n\n    return {\n      totalWidgets: widgets.length,\n      statelessWidgets: statelessCount,\n      statefulWidgets: statefulCount,\n      stateClasses: stateCount,\n      totalFunctions: this.functions.size,\n      totalImports: this.imports.length,\n      externalPackages: this.externalDependencies.size,\n      entryPoint: this.entryPoint,\n      rootWidget: this.rootWidget,\n    };\n  }\n\n  /**\n   * Get all errors\n   */\n  getErrors() {\n    return this.errors;\n  }\n}\n\nexport { WidgetAnalyzer };", "/**\n * FlutterJS State Analyzer\n * Phase 2 Implementation\n * \n * Extracts state management information from StatefulWidget/State classes\n * No external dependencies - pure Node.js\n */\n\n// ============================================================================\n// STATE ANALYZER CLASS\n// ============================================================================\n\nclass StateAnalyzer {\n  constructor(ast, widgets, options = {}) {\n    this.ast = ast;\n    this.widgets = widgets; // from Phase 1 WidgetAnalyzer\n    this.options = {\n      strict: false,\n      ...options,\n    };\n\n    // Results storage\n    this.stateClasses = new Map();\n    this.stateFields = new Map();\n    this.setStateCalls = [];\n    this.lifecycleMethods = [];\n    this.eventHandlers = [];\n    this.dependencyGraph = null;\n    this.validationResults = [];\n    this.errors = [];\n  }\n\n  /**\n   * Main entry point - analyze all state-related code\n   */\n  analyze() {\n    if (!this.ast || !this.ast.body) {\n      throw new Error('Invalid AST provided');\n    }\n\n    try {\n      // Phase 1: Find and link StatefulWidget/State pairs\n      this.linkStatefulToState();\n\n      // Phase 2: Extract state fields from State classes\n      this.extractStateFields();\n\n      // Phase 3: Find setState calls\n      this.findSetStateCalls();\n\n      // Phase 4: Extract lifecycle methods\n      this.extractLifecycleMethods();\n\n      // Phase 5: Extract event handlers\n      this.extractEventHandlers();\n\n      // Phase 6: Build dependency graph\n      this.buildDependencyGraph();\n\n      // Phase 7: Validate everything\n      this.validateState();\n\n      return this.getResults();\n    } catch (error) {\n      this.errors.push(error);\n      return this.getResults();\n    }\n  }\n\n  /**\n   * Phase 1: Link StatefulWidget to State class\n   * \n   * StatefulWidget.createState() returns State class instance\n   * We need to find the return value and match it with State class\n   */\n  linkStatefulToState() {\n    this.widgets.forEach((widget) => {\n      if (widget.type !== 'stateful') return;\n\n      // Find the createState method\n      const createStateMethod = widget.methods.find(\n        (m) => m.name === 'createState'\n      );\n\n      if (!createStateMethod) {\n        this.errors.push({\n          type: 'missing-create-state',\n          widget: widget.name,\n          message: `StatefulWidget \"${widget.name}\" has no createState() method`,\n        });\n        return;\n      }\n\n      // Find the corresponding class declaration in AST\n      const widgetNode = this.ast.body.find(\n        (n) => n.type === 'ClassDeclaration' && n.id.name === widget.name\n      );\n\n      if (!widgetNode) return;\n\n      // Find what createState returns\n      const createStateNode = widgetNode.body.methods.find(\n        (m) => m.key.name === 'createState'\n      );\n\n      if (!createStateNode) return;\n\n      // Extract the returned State class name\n      const stateClassName = this.extractReturnedClassName(createStateNode.body);\n\n      if (!stateClassName) {\n        this.errors.push({\n          type: 'cannot-parse-create-state',\n          widget: widget.name,\n          message: `Cannot determine which State class is returned by ${widget.name}.createState()`,\n        });\n        return;\n      }\n\n      // Find the State class\n      const stateClassNode = this.ast.body.find(\n        (n) => n.type === 'ClassDeclaration' && n.id.name === stateClassName\n      );\n\n      if (!stateClassNode) {\n        this.errors.push({\n          type: 'missing-state-class',\n          widget: widget.name,\n          stateClass: stateClassName,\n          message: `State class \"${stateClassName}\" not found`,\n        });\n        return;\n      }\n\n      // Check if it extends State<Widget>\n      if (!stateClassNode.superClass || !stateClassNode.superClass.name.startsWith('State')) {\n        this.errors.push({\n          type: 'invalid-state-class',\n          stateClass: stateClassName,\n          message: `Class \"${stateClassName}\" does not extend State`,\n        });\n        return;\n      }\n\n      // Create StateClassMetadata\n      const stateMetadata = new StateClassMetadata(\n        stateClassName,\n        stateClassNode.location,\n        widget.name\n      );\n\n      this.stateClasses.set(stateClassName, {\n        astNode: stateClassNode,\n        metadata: stateMetadata,\n      });\n\n      // Link bidirectional\n      widget.linkedStateClass = stateClassName;\n    });\n  }\n\n  /**\n   * Extract the class name returned from a method\n   * Looks for: return new ClassName(); or return new ClassName();\n   */\n  extractReturnedClassName(methodBody) {\n    if (!methodBody) return null;\n\n    // Handle BlockStatement: { return new ClassName(); }\n    if (methodBody.type === 'BlockStatement' && methodBody.body) {\n      for (const stmt of methodBody.body) {\n        if (stmt.type === 'ReturnStatement' && stmt.argument) {\n          const className = this.getClassNameFromExpression(stmt.argument);\n          if (className) return className;\n        }\n      }\n    }\n\n    // Handle direct expression: return new ClassName();\n    if (methodBody.type === 'NewExpression') {\n      return methodBody.callee.name;\n    }\n\n    return null;\n  }\n\n  /**\n   * Extract class name from expression (new ClassName or ClassName)\n   */\n  getClassNameFromExpression(expr) {\n    if (!expr) return null;\n\n    if (expr.type === 'NewExpression' && expr.callee) {\n      return expr.callee.name;\n    }\n\n    if (expr.type === 'Identifier') {\n      return expr.name;\n    }\n\n    if (expr.type === 'CallExpression' && expr.callee) {\n      if (expr.callee.type === 'Identifier') {\n        return expr.callee.name;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Phase 2: Extract state fields from State classes\n   * \n   * State fields are class properties that can be mutated\n   * Examples: _count = 0, _isLoading = false\n   */\n  extractStateFields() {\n    this.stateClasses.forEach(({ astNode, metadata }) => {\n      if (!astNode.body || !astNode.body.fields) return;\n\n      astNode.body.fields.forEach((field) => {\n        const fieldName = field.key.name;\n        const initialValue = field.initialValue;\n\n        // Infer type from initial value\n        const type = this.inferFieldType(initialValue);\n\n        const stateField = new StateField(\n          fieldName,\n          type,\n          this.expressionToValue(initialValue),\n          initialValue ? initialValue.location : field.location\n        );\n\n        // Track in global map and in metadata\n        this.stateFields.set(`${metadata.name}.${fieldName}`, stateField);\n        metadata.stateFields.push(stateField);\n      });\n    });\n  }\n\n  /**\n   * Infer field type from initial value expression\n   */\n  inferFieldType(expr) {\n    if (!expr) return 'any';\n\n    if (expr.type === 'Literal') {\n      if (typeof expr.value === 'number') return 'number';\n      if (typeof expr.value === 'string') return 'string';\n      if (typeof expr.value === 'boolean') return 'boolean';\n      if (expr.value === null) return 'null';\n    }\n\n    if (expr.type === 'Identifier') {\n      const name = expr.name;\n      if (name === 'true' || name === 'false') return 'boolean';\n      if (name === 'null') return 'null';\n      if (name === 'undefined') return 'undefined';\n    }\n\n    // Array literal\n    if (expr.type === 'ArrayLiteral') return 'array';\n\n    // Object literal\n    if (expr.type === 'ObjectLiteral') return 'object';\n\n    // Function call - unknown return type\n    if (expr.type === 'CallExpression') return 'any';\n\n    return 'any';\n  }\n\n  /**\n   * Convert expression to actual value (for initialization)\n   */\n  expressionToValue(expr) {\n    if (!expr) return undefined;\n\n    if (expr.type === 'Literal') {\n      return expr.value;\n    }\n\n    if (expr.type === 'Identifier') {\n      const name = expr.name;\n      if (name === 'true') return true;\n      if (name === 'false') return false;\n      if (name === 'null') return null;\n      if (name === 'undefined') return undefined;\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Phase 3: Find all setState() calls\n   */\n  findSetStateCalls() {\n    this.stateClasses.forEach(({ astNode, metadata }) => {\n      if (!astNode.body || !astNode.body.methods) return;\n\n      // Search all methods for setState calls\n      astNode.body.methods.forEach((method) => {\n        const setStateCalls = this.findSetStateInMethod(method, metadata.name);\n        this.setStateCalls.push(...setStateCalls);\n      });\n    });\n  }\n\n  /**\n   * Find setState calls within a method\n   */\n  findSetStateInMethod(method, stateClassName) {\n    const calls = [];\n    const methodName = method.key.name;\n\n    // Search method body for setState calls\n    if (method.body) {\n      const stmts = method.body.type === 'BlockStatement'\n        ? method.body.body\n        : [method.body];\n\n      stmts.forEach((stmt) => {\n        this.findSetStateInStatement(stmt, calls, methodName, stateClassName);\n      });\n    }\n\n    return calls;\n  }\n\n  /**\n   * Recursively find setState in statements\n   */\n  findSetStateInStatement(stmt, calls, methodName, stateClassName) {\n    if (!stmt) return;\n\n    // Handle expression statements\n    if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n      this.findSetStateInExpression(stmt.expression, calls, methodName, stateClassName);\n    }\n\n    // Handle return statements\n    if (stmt.type === 'ReturnStatement' && stmt.argument) {\n      this.findSetStateInExpression(stmt.argument, calls, methodName, stateClassName);\n    }\n\n    // Handle blocks\n    if (stmt.type === 'BlockStatement' && stmt.body) {\n      stmt.body.forEach((s) => {\n        this.findSetStateInStatement(s, calls, methodName, stateClassName);\n      });\n    }\n  }\n\n  /**\n   * Find setState in expression tree\n   */\n  findSetStateInExpression(expr, calls, methodName, stateClassName) {\n    if (!expr) return;\n\n    // Check if this is a setState call: this.setState(callback)\n    if (expr.type === 'CallExpression') {\n      // Check if it's this.setState(...)\n      const isSetState = this.isSetStateCall(expr);\n\n      if (isSetState) {\n        const updatedFields = this.extractSetStateUpdates(expr, stateClassName);\n        const call = new StateUpdateCall(\n          expr.location,\n          methodName,\n          updatedFields,\n          stateClassName\n        );\n        calls.push(call);\n      }\n\n      // Also check arguments for nested setState calls\n      expr.args.forEach((arg) => {\n        this.findSetStateInExpression(arg, calls, methodName, stateClassName);\n      });\n    }\n\n    // Recursively check nested expressions\n    if (expr.type === 'ObjectLiteral' && expr.properties) {\n      expr.properties.forEach((prop) => {\n        this.findSetStateInExpression(prop.value, calls, methodName, stateClassName);\n      });\n    }\n  }\n\n  /**\n   * Check if expression is this.setState(...)\n   */\n  isSetStateCall(expr) {\n    if (expr.type !== 'CallExpression') return false;\n    if (!expr.callee) return false;\n\n    // Check for member expression: this.setState\n    if (expr.callee.type === 'MemberExpression') {\n      const obj = expr.callee.object;\n      const prop = expr.callee.property;\n\n      // this.setState\n      if (obj.type === 'Identifier' && obj.name === 'this' &&\n        prop.type === 'Identifier' && prop.name === 'setState') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Extract which state fields are updated in setState\n   * setState(() => { this._count++; })\n   */\n  extractSetStateUpdates(setStateCall, stateClassName) {\n    const updated = [];\n\n    if (!setStateCall.args || setStateCall.args.length === 0) return updated;\n\n    // First argument is the callback: () => { ... }\n    const callback = setStateCall.args[0];\n\n    if (callback.type === 'ArrowFunctionExpression') {\n      // Extract body\n      const body = callback.body;\n\n      if (body.type === 'BlockStatement' && body.body) {\n        // Search for field mutations: this._field = value, this._field++, etc.\n        body.body.forEach((stmt) => {\n          const mutated = this.extractMutatedFields(stmt, stateClassName);\n          updated.push(...mutated);\n        });\n      } else if (body.type === 'UpdateExpression' || body.type === 'AssignmentExpression') {\n        // Direct mutation in arrow body\n        const mutated = this.extractMutatedFields(body, stateClassName);\n        updated.push(...mutated);\n      }\n    }\n\n    return [...new Set(updated)]; // Remove duplicates\n  }\n\n  /**\n   * Extract mutated fields from statement\n   * Looks for: this._field = x, this._field++, this._field += x\n   */\n  extractMutatedFields(stmt, stateClassName) {\n    const fields = [];\n\n    if (!stmt) return fields;\n\n    // Assignment: this._field = value\n    if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n      const expr = stmt.expression;\n\n      if (expr.type === 'AssignmentExpression') {\n        const fieldName = this.getFieldNameFromTarget(expr.left);\n        if (fieldName) fields.push(fieldName);\n      }\n\n      // Update expression: this._field++, this._field--\n      if (expr.type === 'UpdateExpression') {\n        const fieldName = this.getFieldNameFromTarget(expr.argument);\n        if (fieldName) fields.push(fieldName);\n      }\n    }\n\n    // Direct assignment/update (arrow body)\n    if (stmt.type === 'AssignmentExpression') {\n      const fieldName = this.getFieldNameFromTarget(stmt.left);\n      if (fieldName) fields.push(fieldName);\n    }\n\n    if (stmt.type === 'UpdateExpression') {\n      const fieldName = this.getFieldNameFromTarget(stmt.argument);\n      if (fieldName) fields.push(fieldName);\n    }\n\n    return fields;\n  }\n\n  /**\n   * Get field name from assignment target\n   * Handles: this._field, obj.field, etc.\n   */\n  getFieldNameFromTarget(target) {\n    if (!target) return null;\n\n    // this._field\n    if (target.type === 'MemberExpression') {\n      const obj = target.object;\n      const prop = target.property;\n\n      // this._field\n      if (obj.type === 'Identifier' && obj.name === 'this' &&\n        prop.type === 'Identifier') {\n        return prop.name;\n      }\n    }\n\n    // _field (direct identifier)\n    if (target.type === 'Identifier') {\n      return target.name;\n    }\n\n    return null;\n  }\n\n  /**\n   * Phase 4: Extract lifecycle methods\n   * \n   * Lifecycle methods: initState, dispose, didUpdateWidget, build\n   */\n  extractLifecycleMethods() {\n    const lifecycleNames = ['initState', 'dispose', 'didUpdateWidget', 'build'];\n\n    this.stateClasses.forEach(({ astNode, metadata }) => {\n      if (!astNode.body || !astNode.body.methods) return;\n\n      astNode.body.methods.forEach((method) => {\n        const methodName = method.key.name;\n\n        if (lifecycleNames.includes(methodName)) {\n          const lifecycle = new LifecycleMethod(\n            methodName,\n            method.location,\n            method.params || [],\n            this.checkCallsSuper(method),\n            this.checkHasSideEffects(method)\n          );\n\n          this.lifecycleMethods.push(lifecycle);\n          metadata.lifecycleMethods.push(lifecycle);\n        }\n      });\n    });\n  }\n\n  /**\n   * Check if method calls super.methodName()\n   */\n  checkCallsSuper(method) {\n    if (!method.body) return false;\n\n    const stmts = method.body.type === 'BlockStatement'\n      ? method.body.body\n      : [method.body];\n\n    for (const stmt of stmts) {\n      if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n        const expr = stmt.expression;\n\n        // super.initState() pattern\n        if (expr.type === 'CallExpression' && expr.callee.type === 'MemberExpression') {\n          const obj = expr.callee.object;\n          const prop = expr.callee.property;\n\n          if (obj.type === 'Identifier' && obj.name === 'super' &&\n            prop.type === 'Identifier' && prop.name === method.key.name) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if method has side effects (console.log, assignments, etc.)\n   */\n  checkHasSideEffects(method) {\n    if (!method.body) return false;\n\n    const stmts = method.body.type === 'BlockStatement'\n      ? method.body.body\n      : [method.body];\n\n    for (const stmt of stmts) {\n      // Assignment has side effect\n      if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n        const expr = stmt.expression;\n\n        if (expr.type === 'AssignmentExpression' || expr.type === 'UpdateExpression') {\n          return true;\n        }\n\n        // Function calls might have side effects\n        if (expr.type === 'CallExpression') {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Phase 5: Extract event handlers from build method\n   * \n   * Looks for: onPressed: () => handler(), onChange: handler, etc.\n   */\n  extractEventHandlers() {\n    this.stateClasses.forEach(({ astNode, metadata }) => {\n      if (!astNode.body || !astNode.body.methods) return;\n\n      // Find build method\n      const buildMethod = astNode.body.methods.find((m) => m.key.name === 'build');\n      if (!buildMethod) return;\n\n      // Extract event handlers from the build method body\n      const handlers = this.findEventHandlersInMethod(buildMethod, metadata.name);\n      this.eventHandlers.push(...handlers);\n    });\n  }\n\n  /**\n   * Find event handlers in method body\n   */\n  findEventHandlersInMethod(method, stateClassName) {\n    const handlers = [];\n\n    if (!method.body) return handlers;\n\n    const stmts = method.body.type === 'BlockStatement'\n      ? method.body.body\n      : [method.body];\n\n    stmts.forEach((stmt) => {\n      this.findEventHandlersInStatement(stmt, handlers, stateClassName);\n    });\n\n    return handlers;\n  }\n\n  /**\n   * Recursively find event handlers in statements\n   */\n  findEventHandlersInStatement(stmt, handlers, stateClassName) {\n    if (!stmt) return;\n\n    if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n      this.findEventHandlersInExpression(stmt.expression, handlers, stateClassName);\n    }\n\n    if (stmt.type === 'ReturnStatement' && stmt.argument) {\n      this.findEventHandlersInExpression(stmt.argument, handlers, stateClassName);\n    }\n\n    if (stmt.type === 'BlockStatement' && stmt.body) {\n      stmt.body.forEach((s) => {\n        this.findEventHandlersInStatement(s, handlers, stateClassName);\n      });\n    }\n  }\n\n  /**\n   * Find event handlers in expressions\n   * Looks for: { onPressed: () => handler(), onChange: handler }\n   */\n  findEventHandlersInExpression(expr, handlers, stateClassName) {\n    if (!expr) return;\n\n    // Check object literals for event properties\n    if (expr.type === 'ObjectLiteral' && expr.properties) {\n      expr.properties.forEach((prop) => {\n        // Property key is the event name (onPressed, onChange, etc.)\n        const eventName = this.getPropertyKey(prop.key);\n        const eventPattern = /^on[A-Z]/; // onPressed, onChange, etc.\n\n        if (eventPattern.test(eventName)) {\n          // Extract handler from property value\n          const handler = this.extractEventHandler(prop.value, stateClassName);\n\n          if (handler) {\n            handlers.push({\n              event: eventName,\n              handler: handler,\n              location: prop.location,\n              component: this.getComponentNameFromContext(expr),\n            });\n          }\n        }\n\n        // Also search nested values\n        this.findEventHandlersInExpression(prop.value, handlers, stateClassName);\n      });\n    }\n\n    // Check call expressions (widget calls)\n    if (expr.type === 'CallExpression' && expr.args) {\n      expr.args.forEach((arg) => {\n        this.findEventHandlersInExpression(arg, handlers, stateClassName);\n      });\n    }\n\n    // Check new expressions\n    if (expr.type === 'NewExpression' && expr.args) {\n      expr.args.forEach((arg) => {\n        this.findEventHandlersInExpression(arg, handlers, stateClassName);\n      });\n    }\n  }\n\n  /**\n   * Get property key from object property\n   */\n  getPropertyKey(keyExpr) {\n    if (!keyExpr) return null;\n\n    if (keyExpr.type === 'Identifier') {\n      return keyExpr.name;\n    }\n\n    if (keyExpr.type === 'Literal') {\n      return String(keyExpr.value);\n    }\n\n    return null;\n  }\n\n  /**\n   * Extract handler reference from property value\n   * Can be: () => handler(), handler, () => { ... }\n   */\n  extractEventHandler(value, stateClassName) {\n    if (!value) return null;\n\n    // Arrow function: () => handler()\n    if (value.type === 'ArrowFunctionExpression') {\n      if (value.body.type === 'CallExpression') {\n        const handlerName = this.getClassNameFromExpression(value.body.callee);\n        return handlerName;\n      }\n\n      // Check if body is identifier: () => handler\n      if (value.body.type === 'Identifier') {\n        return value.body.name;\n      }\n    }\n\n    // Direct identifier: handler\n    if (value.type === 'Identifier') {\n      return value.name;\n    }\n\n    // Member expression: this.handler\n    if (value.type === 'MemberExpression') {\n      if (value.property.type === 'Identifier') {\n        return value.property.name;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Get component name (for context, since we don't have full widget info here)\n   */\n  getComponentNameFromContext(expr) {\n    // This is simplified - in a real scenario you'd track which widget\n    // contains this object literal\n    if (expr.type === 'CallExpression' && expr.callee) {\n      return this.getClassNameFromExpression(expr.callee);\n    }\n\n    return 'Unknown';\n  }\n\n  /**\n   * Phase 6: Build state dependency graph\n   * \n   * Maps:\n   * - stateToMethods: which methods use which state\n   * - methodToState: which state each method uses\n   * - eventToState: which state each event updates\n   */\n  buildDependencyGraph() {\n    this.dependencyGraph = new DependencyGraph();\n\n    // State to methods\n    this.stateFields.forEach((field, key) => {\n      const methods = this.findMethodsUsingField(field.name);\n      if (methods.length > 0) {\n        this.dependencyGraph.stateToMethods.set(field.name, methods);\n      }\n    });\n\n    // Methods to state\n    this.stateClasses.forEach(({ metadata }) => {\n      metadata.stateFields.forEach((field) => {\n        const methodsUsing = this.findMethodsReadingField(metadata.name, field.name);\n        if (methodsUsing.length > 0) {\n          this.dependencyGraph.methodToState.set(field.name, methodsUsing);\n        }\n      });\n    });\n\n    // Event to state\n    this.eventHandlers.forEach((event) => {\n      const stateChanged = this.findStateChangedByMethod(event.handler);\n      if (stateChanged.length > 0) {\n        this.dependencyGraph.eventToState.set(event.event, stateChanged);\n      }\n    });\n  }\n\n  /**\n   * Find methods that use a state field\n   */\n  findMethodsUsingField(fieldName) {\n    const methods = new Set();\n\n    this.setStateCalls.forEach((call) => {\n      if (call.updates.includes(fieldName)) {\n        methods.add(call.method);\n      }\n    });\n\n    // Also check if field is used in build (for reading)\n    this.stateClasses.forEach(({ astNode, metadata }) => {\n      if (!astNode.body || !astNode.body.methods) return;\n\n      const buildMethod = astNode.body.methods.find((m) => m.key.name === 'build');\n      if (buildMethod && this.methodUsesField(buildMethod, fieldName)) {\n        methods.add('build');\n      }\n    });\n\n    return Array.from(methods);\n  }\n\n  /**\n   * Check if method uses a field\n   */\n  methodUsesField(method, fieldName) {\n    if (!method.body) return false;\n\n    const stmts = method.body.type === 'BlockStatement'\n      ? method.body.body\n      : [method.body];\n\n    for (const stmt of stmts) {\n      if (this.statementUsesField(stmt, fieldName)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if statement contains field reference\n   */\n  statementUsesField(stmt, fieldName) {\n    if (!stmt) return false;\n\n    // Simple search for this._fieldName pattern\n    const code = JSON.stringify(stmt);\n    return code.includes(fieldName);\n  }\n\n  /**\n   * Find methods that are triggered by reading state\n   */\n  findMethodsReadingField(stateClassName, fieldName) {\n    const methods = [];\n\n    this.stateClasses.forEach(({ metadata }) => {\n      if (metadata.name !== stateClassName) return;\n\n      metadata.stateFields.forEach((field) => {\n        if (field.name === fieldName) {\n          methods.push(...field.usedInMethods);\n        }\n      });\n    });\n\n    return methods;\n  }\n\n  /**\n   * Find state changed by a method\n   */\n  findStateChangedByMethod(methodName) {\n    const changed = new Set();\n\n    this.setStateCalls.forEach((call) => {\n      if (call.method === methodName) {\n        call.updates.forEach((update) => changed.add(update));\n      }\n    });\n\n    return Array.from(changed);\n  }\n\n  /**\n   * Phase 7: Validate all state patterns\n   */\n  validateState() {\n    this.validateSetStatePatterns();\n    this.validateStateFieldUsage();\n    this.validateLifecyclePatterns();\n    this.validateEventHandlers();\n  }\n\n  /**\n   * Validate setState usage patterns\n   */\n  validateSetStatePatterns() {\n    this.setStateCalls.forEach((call) => {\n      const issues = [];\n\n      // Check if called from valid context (State class method)\n      const stateClass = this.stateClasses.get(call.stateClassName);\n      if (!stateClass) {\n        issues.push({\n          type: 'invalid-context',\n          message: `setState called outside of ${call.stateClassName}`,\n        });\n      }\n\n      // Check if updates valid fields\n      if (call.updates.length === 0) {\n        issues.push({\n          type: 'empty-update',\n          message: 'setState called with no state updates',\n          severity: 'warning',\n        });\n      }\n\n      call.updates.forEach((field) => {\n        if (!this.stateFields.has(`${call.stateClassName}.${field}`)) {\n          issues.push({\n            type: 'unknown-field',\n            message: `setState updates unknown field \"${field}\"`,\n            field,\n          });\n        }\n      });\n\n      // Record validation\n      call.isValid = issues.length === 0;\n      call.issues = issues;\n    });\n  }\n\n  /**\n   * Validate state field usage\n   */\n  validateStateFieldUsage() {\n    this.stateFields.forEach((field, key) => {\n      const parts = key.split('.');\n      const stateClassName = parts[0];\n      const fieldName = parts[1];\n\n      // Check if field is used\n      if (!this.fieldIsUsed(fieldName, stateClassName)) {\n        this.validationResults.push({\n          type: 'unused-state-field',\n          severity: 'warning',\n          field: fieldName,\n          location: field.location,\n          message: `State field \"${fieldName}\" is defined but never used`,\n          suggestion: 'Remove unused field or implement its usage',\n        });\n      }\n\n      // Check if field is mutated outside setState\n      const mutationsOutsideSetState = this.findMutationsOutsideSetState(\n        fieldName,\n        stateClassName\n      );\n      if (mutationsOutsideSetState.length > 0) {\n        this.validationResults.push({\n          type: 'mutation-outside-setstate',\n          severity: 'error',\n          field: fieldName,\n          locations: mutationsOutsideSetState,\n          message: `State field \"${fieldName}\" is mutated outside setState()`,\n          suggestion: 'Always use setState() to update state fields',\n        });\n      }\n    });\n  }\n\n  /**\n   * Check if field is used anywhere\n   */\n  fieldIsUsed(fieldName, stateClassName) {\n    // Check if read in build\n    const stateClass = this.stateClasses.get(stateClassName);\n    if (!stateClass) return false;\n\n    const buildMethod = stateClass.astNode.body.methods.find(\n      (m) => m.key.name === 'build'\n    );\n\n    if (buildMethod && this.methodUsesField(buildMethod, fieldName)) {\n      return true;\n    }\n\n    // Check if modified in setState\n    return this.setStateCalls.some((call) => call.updates.includes(fieldName));\n  }\n\n  /**\n   * Find mutations outside setState\n   */\n  findMutationsOutsideSetState(fieldName, stateClassName) {\n    const locations = [];\n    const inSetState = new Set();\n\n    // Collect all fields modified in setState\n    this.setStateCalls.forEach((call) => {\n      call.updates.forEach((field) => {\n        inSetState.add(field);\n      });\n    });\n\n    // If field is only in setState, it's good\n    if (!inSetState.has(fieldName)) {\n      return locations;\n    }\n\n    // For now, we assume mutations are only through setState\n    // In a full implementation, you'd scan all methods for direct assignments\n    return locations;\n  }\n\n  /**\n   * Validate lifecycle patterns\n   */\n  validateLifecyclePatterns() {\n    this.stateClasses.forEach(({ metadata }) => {\n      const methodMap = {};\n\n      metadata.lifecycleMethods.forEach((method) => {\n        methodMap[method.name] = method;\n      });\n\n      // dispose should call super.dispose\n      if (methodMap.dispose && !methodMap.dispose.callsSuper) {\n        this.validationResults.push({\n          type: 'lifecycle-issue',\n          severity: 'error',\n          method: 'dispose',\n          location: methodMap.dispose.location,\n          message: 'dispose() should call super.dispose()',\n          suggestion: 'Add super.dispose() call at the end of dispose()',\n        });\n      }\n\n      // initState should call super.initState\n      if (methodMap.initState && !methodMap.initState.callsSuper) {\n        this.validationResults.push({\n          type: 'lifecycle-issue',\n          severity: 'warning',\n          method: 'initState',\n          location: methodMap.initState.location,\n          message: 'initState() should call super.initState()',\n          suggestion: 'Add super.initState() call',\n        });\n      }\n    });\n  }\n\n  /**\n   * Validate event handlers\n   */\n  validateEventHandlers() {\n    this.eventHandlers.forEach((handler) => {\n      // Check if handler method exists\n      const handlerExists = this.stateClasses.values().some((sc) => {\n        return sc.metadata.stateFields.some((f) => f.name === handler.handler) ||\n          sc.astNode.body.methods.some((m) => m.key.name === handler.handler);\n      });\n\n      if (!handlerExists && handler.handler) {\n        this.validationResults.push({\n          type: 'missing-handler',\n          severity: 'error',\n          handler: handler.handler,\n          event: handler.event,\n          location: handler.location,\n          message: `Event handler \"${handler.handler}\" not found`,\n          suggestion: `Create a method called ${handler.handler} in the State class`,\n        });\n      }\n    });\n  }\n\n  /**\n   * Get final results\n   */\n  getResults() {\n    return {\n      stateClasses: Array.from(this.stateClasses.entries()).map(([name, data]) => ({\n        name,\n        metadata: data.metadata,\n      })),\n      stateFields: Array.from(this.stateFields.values()),\n      setStateCalls: this.setStateCalls,\n      lifecycleMethods: this.lifecycleMethods,\n      eventHandlers: this.eventHandlers,\n      dependencyGraph: this.dependencyGraph,\n      validationResults: this.validationResults,\n      errors: this.errors,\n    };\n  }\n}\n\n// ============================================================================\n// DATA CLASSES\n// ============================================================================\n\nclass StateClassMetadata {\n  constructor(name, location, linkedStatefulWidget) {\n    this.name = name;\n    this.location = location;\n    this.linkedStatefulWidget = linkedStatefulWidget;\n    this.stateFields = [];\n    this.lifecycleMethods = [];\n    this.methods = [];\n  }\n}\n\nclass StateField {\n  constructor(name, type, initialValue, location) {\n    this.name = name;\n    this.type = type;\n    this.initialValue = initialValue;\n    this.location = location;\n    this.isMutable = true;\n    this.mutations = [];\n    this.usedInMethods = [];\n    this.usedInBuild = false;\n  }\n}\n\nclass LifecycleMethod {\n  constructor(name, location, params, callsSuper, hasSideEffects) {\n    this.name = name;\n    this.location = location;\n    this.params = params;\n    this.callsSuper = callsSuper;\n    this.hasSideEffects = hasSideEffects;\n  }\n}\n\nclass StateUpdateCall {\n  constructor(location, method, updates, stateClassName) {\n    this.location = location;\n    this.method = method;\n    this.updates = updates || [];\n    this.stateClassName = stateClassName;\n    this.isValid = true;\n    this.issues = [];\n  }\n}\n\nclass DependencyGraph {\n  constructor() {\n    this.stateToMethods = new Map();\n    this.methodToState = new Map();\n    this.eventToState = new Map();\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport {\n  StateAnalyzer,\n  StateClassMetadata,\n  StateField,\n  LifecycleMethod,\n  StateUpdateCall,\n  DependencyGraph,\n};", "/**\n * FlutterJS Context Analyzer - Data Classes\n * Phase 3 Implementation\n * \n * Represents context-related concepts:\n * - InheritedWidget classes and their properties\n * - ChangeNotifier implementations\n * - Provider patterns\n * - Context usage and dependencies\n * - SSR compatibility information\n */\n\n// ============================================================================\n// INHERITED WIDGET METADATA\n// ============================================================================\n\n/**\n * Metadata about an InheritedWidget class\n * \n * Represents:\n * class ThemeProvider extends InheritedWidget {\n *   final ThemeData theme;\n *   final Widget child;\n *   \n *   static ThemeData of(BuildContext context) {\n *     return context.dependOnInheritedWidgetOfExactType<ThemeProvider>()?.theme;\n *   }\n *   \n *   @override\n *   bool updateShouldNotify(ThemeProvider oldWidget) {\n *     return theme != oldWidget.theme;\n *   }\n * }\n */\nclass InheritedWidgetMetadata {\n  constructor(name, location, superClass = 'InheritedWidget') {\n    // Identity\n    this.name = name;\n    this.location = location;\n    this.superClass = superClass;\n\n    // Structure\n    this.properties = [];            // Required/provided properties\n    this.staticAccessors = [];       // of() methods, from() factory methods\n    this.methods = [];               // Other methods\n\n    // Implementation details\n    this.updateShouldNotifyImplemented = false;\n    this.hasChildProperty = false;\n\n    // Usage tracking\n    this.usageCount = 0;\n    this.usedIn = [];               // Widget names that use this provider\n    this.providedByWidgets = [];    // Widget names that instantiate this\n  }\n\n  /**\n   * Add a property to this inherited widget\n   * Example: theme (ThemeData), child (Widget)\n   */\n  addProperty(name, type, required = false) {\n    this.properties.push({\n      name,\n      type,\n      required,\n      description: null,\n    });\n\n    if (name === 'child') {\n      this.hasChildProperty = true;\n    }\n  }\n\n  /**\n   * Add a static accessor method\n   * Example: static ThemeData of(BuildContext context)\n   */\n  addStaticAccessor(name, signature, location, usesInheritedWidgetLookup = true) {\n    this.staticAccessors.push({\n      name,\n      signature,\n      usesInheritedWidgetLookup,\n      location,\n    });\n  }\n\n  /**\n   * Record that a widget uses this provider\n   */\n  recordUsage(widgetName) {\n    if (!this.usedIn.includes(widgetName)) {\n      this.usedIn.push(widgetName);\n      this.usageCount++;\n    }\n  }\n\n  /**\n   * Record that a widget provides (instantiates) this provider\n   */\n  recordProvider(widgetName) {\n    if (!this.providedByWidgets.includes(widgetName)) {\n      this.providedByWidgets.push(widgetName);\n    }\n  }\n\n  /**\n   * Validate the InheritedWidget pattern\n   */\n  validate() {\n    const issues = [];\n\n    // Should have child property\n    if (!this.hasChildProperty) {\n      issues.push({\n        type: 'missing-child-property',\n        severity: 'warning',\n        message: `InheritedWidget \"${this.name}\" should have a 'child' property`,\n      });\n    }\n\n    // Should have static of() accessor\n    if (this.staticAccessors.length === 0) {\n      issues.push({\n        type: 'missing-static-accessor',\n        severity: 'warning',\n        message: `InheritedWidget \"${this.name}\" should have a static of() method`,\n      });\n    }\n\n    // Should implement updateShouldNotify\n    if (!this.updateShouldNotifyImplemented) {\n      issues.push({\n        type: 'missing-update-notification',\n        severity: 'error',\n        message: `InheritedWidget \"${this.name}\" must implement updateShouldNotify()`,\n      });\n    }\n\n    return issues;\n  }\n\n  /**\n   * Get summary of this InheritedWidget\n   */\n  summary() {\n    return {\n      name: this.name,\n      superClass: this.superClass,\n      properties: this.properties.length,\n      staticAccessors: this.staticAccessors.length,\n      usageCount: this.usageCount,\n      usedIn: this.usedIn,\n      providedBy: this.providedByWidgets,\n      isValid: this.updateShouldNotifyImplemented,\n    };\n  }\n}\n\n// ============================================================================\n// CHANGE NOTIFIER ANALYSIS\n// ============================================================================\n\n/**\n * Analysis of a ChangeNotifier class\n * \n * Represents:\n * class CounterNotifier extends ChangeNotifier {\n *   int _count = 0;\n *   \n *   int get count => _count;\n *   \n *   void increment() {\n *     _count++;\n *     notifyListeners();\n *   }\n * }\n */\nclass ChangeNotifierAnalysis {\n  constructor(name, location) {\n    // Identity\n    this.name = name;\n    this.location = location;\n    this.type = 'ChangeNotifier';\n\n    // Structure\n    this.properties = [];            // _count, _isLoading, etc.\n    this.getters = [];               // get count => _count\n    this.methods = [];               // increment(), decrement(), etc.\n    this.setters = [];               // set property(value) => ...\n\n    // Usage tracking\n    this.isUsedWithProvider = false; // Is this used with Provider<T>?\n    this.providedType = null;        // The Provider<CounterNotifier> type\n    this.consumers = [];             // Widgets that consume this notifier\n    this.subscriptions = [];         // Where it's subscribed to\n  }\n\n  /**\n   * Add a property to this notifier\n   */\n  addProperty(name, type, initialValue = null) {\n    this.properties.push({\n      name,\n      type,\n      initialValue,\n      mutable: true,\n    });\n  }\n\n  /**\n   * Add a getter method\n   * Example: get count => _count\n   */\n  addGetter(name, returnType, location) {\n    this.getters.push({\n      name,\n      returnType,\n      location,\n      isComputed: false,\n    });\n  }\n\n  /**\n   * Add a method that mutates state\n   */\n  addMethod(name, location, callsNotify = false, mutations = []) {\n    this.methods.push({\n      name,\n      location,\n      callsNotifyListeners: callsNotify,\n      mutatesFields: mutations,\n      isAsync: false,\n      parameters: [],\n    });\n  }\n\n  /**\n   * Record that a widget consumes this notifier\n   */\n  recordConsumer(widgetName, accessPattern = 'watch') {\n    if (!this.consumers.includes(widgetName)) {\n      this.consumers.push(widgetName);\n    }\n\n    this.subscriptions.push({\n      consumer: widgetName,\n      accessPattern,  // 'watch', 'read', 'select'\n      timestamp: new Date(),\n    });\n  }\n\n  /**\n   * Check if this notifier is properly implemented\n   */\n  validate() {\n    const issues = [];\n\n    // Should have at least one method that calls notifyListeners\n    const hasNotifyCall = this.methods.some((m) => m.callsNotifyListeners);\n    if (!hasNotifyCall && this.methods.length > 0) {\n      issues.push({\n        type: 'missing-notify-listeners',\n        severity: 'warning',\n        message: `ChangeNotifier \"${this.name}\" has methods but none call notifyListeners()`,\n      });\n    }\n\n    // Methods that mutate should call notifyListeners\n    this.methods.forEach((method) => {\n      if (method.mutatesFields.length > 0 && !method.callsNotifyListeners) {\n        issues.push({\n          type: 'mutation-without-notification',\n          severity: 'warning',\n          message: `Method \"${method.name}\" mutates state but doesn't call notifyListeners()`,\n        });\n      }\n    });\n\n    // Should have getters for public access\n    if (this.properties.length > 0 && this.getters.length === 0) {\n      issues.push({\n        type: 'missing-getters',\n        severity: 'info',\n        message: `ChangeNotifier \"${this.name}\" has properties but no getters. Consider adding getters for encapsulation.`,\n      });\n    }\n\n    return issues;\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      name: this.name,\n      properties: this.properties.length,\n      getters: this.getters.length,\n      methods: this.methods.length,\n      consumers: this.consumers.length,\n      consumedBy: this.consumers,\n      isValid: this.methods.some((m) => m.callsNotifyListeners),\n    };\n  }\n}\n\n// ============================================================================\n// PROVIDER ANALYSIS\n// ============================================================================\n\n/**\n * Analysis of a Provider<T> pattern\n * \n * Represents:\n * Provider<CounterNotifier>(\n *   create: (context) => CounterNotifier(),\n *   child: MaterialApp(...)\n * )\n */\nclass ProviderAnalysis {\n  constructor(providerType, location, valueType) {\n    // Identity\n    this.providerType = providerType;           // 'Provider<CounterNotifier>'\n    this.location = location;\n    this.valueType = valueType;                 // 'CounterNotifier'\n\n    // Configuration\n    this.createFunction = null;                 // (context) => CounterNotifier()\n    this.lazy = true;                           // Is it lazy-initialized?\n    this.dispose = null;                        // Cleanup function\n    this.child = null;                          // Child widget\n\n    // Usage tracking\n    this.consumers = [];                        // Widgets that consume\n    this.accessPatterns = [];                   // 'watch', 'read', 'select'\n    this.flowPath = null;                       // Provider \u2192 ... \u2192 Consumer\n  }\n\n  /**\n   * Set the create function\n   */\n  setCreateFunction(func) {\n    this.createFunction = func;\n  }\n\n  /**\n   * Set the dispose function\n   */\n  setDispose(func) {\n    this.dispose = func;\n  }\n\n  /**\n   * Record a consumer widget\n   */\n  addConsumer(widgetName) {\n    if (!this.consumers.includes(widgetName)) {\n      this.consumers.push(widgetName);\n    }\n  }\n\n  /**\n   * Record an access pattern\n   */\n  addAccessPattern(pattern) {\n    // pattern: 'watch', 'read', 'select'\n    if (!this.accessPatterns.includes(pattern)) {\n      this.accessPatterns.push(pattern);\n    }\n  }\n\n  /**\n   * Validate the provider configuration\n   */\n  validate() {\n    const issues = [];\n\n    // Should have a create function\n    if (!this.createFunction) {\n      issues.push({\n        type: 'missing-create',\n        severity: 'error',\n        message: `Provider<${this.valueType}> must have a create function`,\n      });\n    }\n\n    // Should have at least one consumer\n    if (this.consumers.length === 0) {\n      issues.push({\n        type: 'unused-provider',\n        severity: 'info',\n        message: `Provider<${this.valueType}> is defined but not consumed by any widget`,\n      });\n    }\n\n    // Check for access pattern consistency\n    if (this.accessPatterns.includes('watch') && !this.accessPatterns.includes('read')) {\n      // watch should probably have read as fallback\n      issues.push({\n        type: 'watch-without-read',\n        severity: 'info',\n        message: `Provider uses context.watch() but not context.read(). Consider both patterns.`,\n      });\n    }\n\n    return issues;\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      type: this.providerType,\n      valueType: this.valueType,\n      consumers: this.consumers.length,\n      consumedBy: this.consumers,\n      accessPatterns: this.accessPatterns,\n      hasCreateFunction: !!this.createFunction,\n      hasDisposeFunction: !!this.dispose,\n    };\n  }\n}\n\n// ============================================================================\n// CONTEXT DEPENDENCY\n// ============================================================================\n\n/**\n * Represents a widget and its context dependencies\n */\nclass ContextDependency {\n  constructor(dependent, method = 'build') {\n    this.dependent = dependent;                 // Widget name\n    this.method = method;                       // 'build', 'initState', etc.\n    this.contextUsage = [];                     // Array of ContextUsagePattern\n    this.location = null;\n  }\n\n  /**\n   * Add a context usage pattern\n   */\n  addUsage(pattern) {\n    if (pattern instanceof ContextUsagePattern) {\n      this.contextUsage.push(pattern);\n    }\n  }\n\n  /**\n   * Get all SSR-safe usages\n   */\n  getSsrSafeUsages() {\n    return this.contextUsage.filter((u) => u.ssrSafe);\n  }\n\n  /**\n   * Get all SSR-unsafe usages\n   */\n  getSsrUnsafeUsages() {\n    return this.contextUsage.filter((u) => !u.ssrSafe);\n  }\n\n  /**\n   * Check if widget can be rendered on server\n   */\n  isSsrCompatible() {\n    return this.getSsrUnsafeUsages().length === 0;\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      dependent: this.dependent,\n      method: this.method,\n      totalUsages: this.contextUsage.length,\n      ssrSafeUsages: this.getSsrSafeUsages().length,\n      ssrUnsafeUsages: this.getSsrUnsafeUsages().length,\n      isSsrCompatible: this.isSsrCompatible(),\n      usagePatterns: this.contextUsage.map((u) => u.pattern),\n    };\n  }\n}\n\n// ============================================================================\n// CONTEXT USAGE PATTERN\n// ============================================================================\n\n/**\n * Represents a single context usage pattern in code\n * \n * Examples:\n * - Theme.of(context)\n * - context.watch<CounterNotifier>()\n * - context.read<CounterNotifier>()\n * - context.mediaQuery()\n */\nclass ContextUsagePattern {\n  constructor(pattern, type, location, returns = 'T', ssrSafe = true, reason = '') {\n    // Pattern identification\n    this.pattern = pattern;                     // 'Theme.of(context)', 'context.watch<T>()'\n    this.type = type;                           // 'inherited-widget-lookup', 'provider-watch', etc.\n    this.location = location;                   // { line, column }\n\n    // What it returns\n    this.returns = returns;                     // Return type\n\n    // SSR compatibility\n    this.ssrSafe = ssrSafe;\n    this.reason = reason;                       // Why safe/unsafe for SSR\n\n    // Metadata\n    this.depth = 0;                             // Nesting depth in widget tree\n    this.frequency = 1;                         // How often called\n  }\n\n  /**\n   * Explain why this pattern is or isn't SSR safe\n   */\n  explain() {\n    if (this.ssrSafe) {\n      return `\u2713 SSR Safe: ${this.reason}`;\n    } else {\n      return `\u2717 SSR Unsafe: ${this.reason}`;\n    }\n  }\n\n  /**\n   * Get migration advice for SSR\n   */\n  getMigrationAdvice() {\n    if (this.ssrSafe) return null;\n\n    const advice = {\n      'provider-watch': 'Replace with context.read() for initial SSR render, use watch() in didChangeDependencies() on client',\n      'global-state-mutation': 'Move mutations to client-only code, wrap in if (!kIsWeb) or similar server check',\n      'event-handler': 'Event handlers don\\'t exist during SSR, only attach after hydration on client',\n    };\n\n    return advice[this.type] || null;\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      pattern: this.pattern,\n      type: this.type,\n      returns: this.returns,\n      ssrSafe: this.ssrSafe,\n      reason: this.reason,\n      advice: this.getMigrationAdvice(),\n    };\n  }\n}\n\n// ============================================================================\n// HYDRATION REQUIREMENT\n// ============================================================================\n\n/**\n * Represents something that needs to be re-initialized on the client\n * after server-side rendering\n */\nclass HydrationRequirement {\n  constructor(dependency, reason, order = 0) {\n    this.dependency = dependency;               // What needs hydration (e.g., 'CounterNotifier')\n    this.reason = reason;                       // Why it needs hydration\n    this.order = order;                         // Execution order (lower = earlier)\n    this.requiredProviders = [];                // Providers needed before this hydrates\n    this.requiredState = [];                    // State needed for this to work\n  }\n\n  /**\n   * Add a required provider\n   */\n  requiresProvider(providerType) {\n    if (!this.requiredProviders.includes(providerType)) {\n      this.requiredProviders.push(providerType);\n    }\n  }\n\n  /**\n   * Add required state\n   */\n  requiresState(stateProperty) {\n    if (!this.requiredState.includes(stateProperty)) {\n      this.requiredState.push(stateProperty);\n    }\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      dependency: this.dependency,\n      reason: this.reason,\n      order: this.order,\n      requiredProviders: this.requiredProviders,\n      requiredState: this.requiredState,\n    };\n  }\n}\n\n// ============================================================================\n// LAZY LOADING OPPORTUNITY\n// ============================================================================\n\n/**\n * Represents a widget or notifier that could be lazy-loaded\n */\nclass LazyLoadOpportunity {\n  constructor(target, reason, estimatedSize = 'unknown', type = 'widget') {\n    this.target = target;                       // Widget or ChangeNotifier name\n    this.reason = reason;                       // Why lazy load it\n    this.estimatedSize = estimatedSize;         // Bundle size if lazy loaded\n    this.type = type;                           // 'widget' or 'notifier'\n    this.recommendation = null;                 // How to lazy load\n    this.priority = 'medium';                   // 'high', 'medium', 'low'\n  }\n\n  /**\n   * Set the recommendation\n   */\n  setRecommendation(recommendation) {\n    this.recommendation = recommendation;\n  }\n\n  /**\n   * Set priority based on size\n   */\n  calculatePriority(sizeKb) {\n    if (sizeKb > 50) {\n      this.priority = 'high';\n    } else if (sizeKb > 20) {\n      this.priority = 'medium';\n    } else {\n      this.priority = 'low';\n    }\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      target: this.target,\n      type: this.type,\n      reason: this.reason,\n      estimatedSize: this.estimatedSize,\n      priority: this.priority,\n      recommendation: this.recommendation,\n    };\n  }\n}\n\n// ============================================================================\n// CONTEXT REQUIREMENTS SUMMARY\n// ============================================================================\n\n/**\n * Summary of all context requirements for the app\n */\nclass ContextRequirementsSummary {\n  constructor() {\n    this.requiresThemeProvider = false;\n    this.requiresMediaQuery = false;\n    this.requiresNavigator = false;\n    this.requiresChangeNotifierProvider = false;\n    this.customInheritedWidgets = [];           // Custom providers defined\n    this.requiredProviders = [];                // Provider<T> patterns used\n    this.hydrationRequired = false;\n    this.hydrationDependencies = [];            // What needs hydration\n\n    this.ssrCompatibility = 'unknown';          // 'full', 'partial', 'none'\n    this.ssrIssues = [];                        // What breaks SSR\n    this.ssrMigrationPath = [];                 // Steps to fix SSR\n  }\n\n  /**\n   * Add a custom inherited widget\n   */\n  addCustomInheritedWidget(name) {\n    if (!this.customInheritedWidgets.includes(name)) {\n      this.customInheritedWidgets.push(name);\n    }\n  }\n\n  /**\n   * Add a required provider\n   */\n  addRequiredProvider(type) {\n    if (!this.requiredProviders.includes(type)) {\n      this.requiredProviders.push(type);\n    }\n  }\n\n  /**\n   * Add a hydration dependency\n   */\n  addHydrationDependency(dep) {\n    if (dep instanceof HydrationRequirement) {\n      this.hydrationDependencies.push(dep);\n      this.hydrationRequired = true;\n    }\n  }\n\n  /**\n   * Calculate SSR compatibility\n   */\n  calculateSsrCompatibility() {\n    if (this.ssrIssues.length === 0) {\n      this.ssrCompatibility = 'full';\n    } else if (this.ssrIssues.length <= 3) {\n      this.ssrCompatibility = 'partial';\n    } else {\n      this.ssrCompatibility = 'none';\n    }\n  }\n\n  /**\n   * Get summary\n   */\n  summary() {\n    return {\n      requiresThemeProvider: this.requiresThemeProvider,\n      requiresMediaQuery: this.requiresMediaQuery,\n      requiresNavigator: this.requiresNavigator,\n      requiresChangeNotifierProvider: this.requiresChangeNotifierProvider,\n      customInheritedWidgets: this.customInheritedWidgets,\n      requiredProviders: this.requiredProviders,\n      hydrationRequired: this.hydrationRequired,\n      hydrationCount: this.hydrationDependencies.length,\n      ssrCompatibility: this.ssrCompatibility,\n      ssrIssueCount: this.ssrIssues.length,\n    };\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport {\n  InheritedWidgetMetadata,\n  ChangeNotifierAnalysis,\n  ProviderAnalysis,\n  ContextDependency,\n  ContextUsagePattern,\n  HydrationRequirement,\n  LazyLoadOpportunity,\n  ContextRequirementsSummary,\n};\n", "/**\n * FlutterJS Context Analyzer - Phase 3\n * Detects InheritedWidget, Provider, BuildContext usage patterns\n * Analyzes context flow and SSR compatibility\n * \n * Phase 3 focuses on: Context detection, Provider patterns, SSR analysis\n * Does NOT implement actual context providers (that's Phase 4+)\n */\nimport { getLogger } from './flutterjs_logger.js';\n\nimport {  InheritedWidgetMetadata,\n  ChangeNotifierAnalysis,\n  ProviderAnalysis,\n  ContextUsagePattern, } from  './context_analyzer_data.js';\nclass ContextAnalyzer {\n  constructor(ast, widgets = [], options = {}) {\n    this.ast = ast;\n    this.widgets = widgets;\n     this.logger = getLogger().createComponentLogger('ContextAnalyzer');\n    this.options = {\n      strict: false,\n      ...options,\n    };\n\n    // Results storage\n    this.inheritedWidgets = new Map();     // name -> InheritedWidgetMetadata\n    this.changeNotifiers = new Map();      // name -> ChangeNotifierAnalysis\n    this.providers = new Map();            // type -> ProviderAnalysis\n    this.contextAccessPoints = [];         // All places context is used\n    this.inheritedWidgetGraph = {};        // Inheritance relationships\n    this.providerGraph = {};               // Provider relationships\n    this.errors = [];\n  }\n\n  /**\n   * Main entry point - analyze context patterns\n   */\n  analyze() {\n      this.logger.startSession('ContextAnalysis');\n    this.logger.trace('[ContextAnalyzer] Starting analysis...\\n');\n      this.logger.startSession('WidgetAnalyzer');\n     this.logger.trace('[ContextAnalyzer] Starting analysis...\\n');\n\n    try {\n      // Phase 1: Detect InheritedWidget classes\n      this.detectInheritedWidgets();\n       this.logger.trace(`[ContextAnalyzer] Found ${this.inheritedWidgets.size} InheritedWidgets\\n`);\n\n      // Phase 2: Detect ChangeNotifier classes\n      this.detectChangeNotifiers();\n       this.logger.trace(`[ContextAnalyzer] Found ${this.changeNotifiers.size} ChangeNotifiers\\n`);\n\n      // Phase 3: Detect Provider patterns\n      this.detectProviders();\n       this.logger.trace(`[ContextAnalyzer] Found ${this.providers.size} Providers\\n`);\n\n      // Phase 4: Find context access points\n      this.findContextAccessPoints();\n       this.logger.trace(`[ContextAnalyzer] Found ${this.contextAccessPoints.length} context usage points\\n`);\n\n      // Phase 5: Build graphs\n      this.buildInheritedWidgetGraph();\n      this.buildProviderGraph();\n       this.logger.trace('[ContextAnalyzer] Built dependency graphs\\n');\n\n      return this.getResults();\n    } catch (error) {\n      this.errors.push(error);\n      console.error('[ContextAnalyzer] Error:', error.message);\n      return this.getResults();\n    }\n  }\n\n  /**\n   * Phase 1: Detect InheritedWidget classes\n   * \n   * Looks for:\n   * - class MyProvider extends InheritedWidget\n   * - Properties: data, child\n   * - Methods: of(), updateShouldNotify()\n   */\n  detectInheritedWidgets() {\n    if (!this.ast || !this.ast.body) return;\n\n    this.ast.body.forEach((node) => {\n      if (node.type !== 'ClassDeclaration') return;\n\n      const className = node.id?.name;\n      const superClass = node.superClass?.name;\n\n      // Check if extends InheritedWidget\n      if (!superClass || !superClass.includes('InheritedWidget')) return;\n\n       this.logger.trace(`[ContextAnalyzer.detectInheritedWidgets] Found: ${className}`);\n\n      const metadata = new InheritedWidgetMetadata(\n        className,\n        node.location,\n        superClass\n      );\n\n      // Extract properties\n      if (node.body?.fields) {\n        node.body.fields.forEach((field) => {\n          const fieldName = field.key?.name;\n          metadata.properties.push({\n            name: fieldName,\n            type: this.inferType(field.initialValue),\n            required: !this.hasDefaultValue(field),\n          });\n        });\n      }\n\n      // Extract static accessors (of() method)\n      if (node.body?.methods) {\n        node.body.methods.forEach((method) => {\n          const methodName = method.key?.name;\n\n          // Check for static accessor pattern\n          if (methodName === 'of' && this.isStaticAccessor(method)) {\n            metadata.staticAccessors.push({\n              name: methodName,\n              signature: `static ${methodName}(BuildContext context)`,\n              usesInheritedWidgetLookup: this.checksInheritedWidgetLookup(method),\n              location: method.location,\n            });\n          }\n\n          // Check for updateShouldNotify\n          if (methodName === 'updateShouldNotify') {\n            metadata.updateShouldNotifyImplemented = true;\n          }\n        });\n      }\n\n      this.inheritedWidgets.set(className, metadata);\n    });\n  }\n\n  /**\n   * Check if method is static (phase 3 simplified - assumes 'of' is usually static)\n   */\n  isStaticAccessor(method) {\n    // In a real implementation, check for @static decorator or static keyword\n    return method.key?.name === 'of';\n  }\n\n  /**\n   * Check if method body contains dependOnInheritedWidgetOfExactType call\n   */\n  checksInheritedWidgetLookup(method) {\n    if (!method.body) return false;\n\n    const code = JSON.stringify(method.body);\n    return code.includes('dependOnInheritedWidgetOfExactType') ||\n           code.includes('inheritedWidgetOfExactType');\n  }\n\n  /**\n   * Phase 2: Detect ChangeNotifier classes\n   * \n   * Looks for:\n   * - class MyNotifier extends ChangeNotifier\n   * - Methods that call notifyListeners()\n   * - Properties that get/set\n   */\n  detectChangeNotifiers() {\n    if (!this.ast || !this.ast.body) return;\n\n    this.ast.body.forEach((node) => {\n      if (node.type !== 'ClassDeclaration') return;\n\n      const className = node.id?.name;\n      const superClass = node.superClass?.name;\n\n      // Check if extends ChangeNotifier\n      if (!superClass || superClass !== 'ChangeNotifier') return;\n\n       this.logger.trace(`[ContextAnalyzer.detectChangeNotifiers] Found: ${className}`);\n\n      const analysis = new ChangeNotifierAnalysis(\n        className,\n        node.location\n      );\n\n      // Extract properties\n      if (node.body?.fields) {\n        node.body.fields.forEach((field) => {\n          const fieldName = field.key?.name;\n          analysis.properties.push({\n            name: fieldName,\n            type: this.inferType(field.initialValue),\n            initialValue: this.expressionToString(field.initialValue),\n          });\n        });\n      }\n\n      // Extract getters, methods, and notifyListeners calls\n      if (node.body?.methods) {\n        node.body.methods.forEach((method) => {\n          const methodName = method.key?.name;\n\n          // Check for getter pattern (get count => _count)\n          if (methodName && !method.params?.length && method.body) {\n            const isGetter = JSON.stringify(method).includes('return');\n            if (isGetter) {\n              analysis.getters.push({\n                name: methodName,\n                returnType: this.inferReturnType(method.body),\n                location: method.location,\n              });\n            }\n          }\n\n          // Check for notifyListeners call\n          const callsNotify = this.callsNotifyListeners(method.body);\n          if (callsNotify || methodName === 'increment' || methodName === 'decrement') {\n            const mutations = this.extractMutationsInMethod(method.body);\n            analysis.methods.push({\n              name: methodName,\n              callsNotifyListeners: callsNotify,\n              location: method.location,\n              mutations: mutations,\n            });\n          }\n        });\n      }\n\n      this.changeNotifiers.set(className, analysis);\n    });\n  }\n\n  /**\n   * Check if method calls notifyListeners()\n   */\n  callsNotifyListeners(body) {\n    if (!body) return false;\n    const code = JSON.stringify(body);\n    return code.includes('notifyListeners');\n  }\n\n  /**\n   * Extract field mutations in method (this._field = x, this._field++, etc.)\n   */\n  extractMutationsInMethod(body) {\n    const mutations = [];\n    if (!body) return mutations;\n\n    const code = JSON.stringify(body);\n    \n    // Simple pattern matching for mutations\n    const patterns = [\n      /this\\._(\\w+)\\s*[=+\\-*]/g,  // this._field = or +=, -=, etc.\n      /this\\.(\\w+)\\s*[=+\\-*]/g,   // this.field = or +=, -=, etc.\n    ];\n\n    patterns.forEach((pattern) => {\n      let match;\n      while ((match = pattern.exec(code)) !== null) {\n        mutations.push(match[1]);\n      }\n    });\n\n    return [...new Set(mutations)]; // Remove duplicates\n  }\n\n  /**\n   * Phase 3: Detect Provider<T> patterns\n   * \n   * Looks for:\n   * - Provider<CounterNotifier>(create: ..., child: ...)\n   * - Detects consumer patterns: context.watch(), context.read()\n   */\n  detectProviders() {\n    if (!this.ast || !this.ast.body) return;\n\n    this.ast.body.forEach((node) => {\n      if (node.type === 'ClassDeclaration') {\n        // Check if class contains Provider creation in build()\n        const buildMethod = node.body?.methods?.find((m) => m.key?.name === 'build');\n        if (buildMethod) {\n          this.findProvidersInMethod(buildMethod, node);\n        }\n      }\n\n      // Also check in function bodies\n      if (node.type === 'FunctionDeclaration') {\n        this.findProvidersInMethod(node, null);\n      }\n    });\n  }\n\n  /**\n   * Find Provider instantiations in a method\n   */\n  findProvidersInMethod(method, classNode) {\n    if (!method.body) return;\n\n    const body = method.body.type === 'BlockStatement' ? method.body.body : [method.body];\n\n    body.forEach((stmt) => {\n      this.findProvidersInStatement(stmt);\n    });\n  }\n\n  /**\n   * Recursively find Provider patterns in statements\n   */\n  findProvidersInStatement(stmt) {\n    if (!stmt) return;\n\n    if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n      this.findProvidersInExpression(stmt.expression);\n    }\n\n    if (stmt.type === 'ReturnStatement' && stmt.argument) {\n      this.findProvidersInExpression(stmt.argument);\n    }\n\n    if (stmt.type === 'BlockStatement' && stmt.body) {\n      stmt.body.forEach((s) => this.findProvidersInStatement(s));\n    }\n  }\n\n  /**\n   * Find Provider patterns in expressions\n   * Looks for: new Provider<CounterNotifier>(...)\n   */\n  findProvidersInExpression(expr) {\n    if (!expr) return;\n\n    // Check for NewExpression: new Provider<T>(...)\n    if (expr.type === 'NewExpression') {\n      const calleeName = expr.callee?.name;\n\n      if (calleeName === 'Provider' || calleeName?.startsWith('Provider')) {\n        // Extract generic type: Provider<CounterNotifier>\n        const genericType = this.extractGenericType(expr);\n\n        if (genericType) {\n           this.logger.trace(`[ContextAnalyzer.detectProviders] Found Provider<${genericType}>`);\n\n          const analysis = new ProviderAnalysis(\n            `Provider<${genericType}>`,\n            expr.location,\n            genericType\n          );\n\n          // Extract create function\n          if (expr.args) {\n            expr.args.forEach((arg) => {\n              if (arg.type === 'ObjectLiteral') {\n                arg.properties?.forEach((prop) => {\n                  if (prop.key?.name === 'create') {\n                    analysis.createFunction = this.expressionToString(prop.value);\n                  }\n                  if (prop.key?.name === 'child') {\n                    // Child widget - may use this provider\n                  }\n                });\n              }\n            });\n          }\n\n          // Identify access patterns (watch, read, select)\n          this.identifyAccessPatterns(genericType, analysis);\n\n          this.providers.set(`Provider<${genericType}>`, analysis);\n        }\n      }\n    }\n\n    // Check call expressions\n    if (expr.type === 'CallExpression' && expr.args) {\n      expr.args.forEach((arg) => {\n        this.findProvidersInExpression(arg);\n      });\n    }\n\n    // Check object literals\n    if (expr.type === 'ObjectLiteral' && expr.properties) {\n      expr.properties.forEach((prop) => {\n        this.findProvidersInExpression(prop.value);\n      });\n    }\n  }\n\n  /**\n   * Extract generic type from Provider<T>\n   * In simplified version, returns T or null\n   */\n  extractGenericType(expr) {\n    // In real implementation, parse the full generic syntax\n    // For now, look for the callee name pattern\n    const code = JSON.stringify(expr.callee);\n\n    // Simple heuristic: if it mentions Provider and contains type info\n    if (code.includes('Provider')) {\n      // Try to find type in expression string representation\n      const exprStr = this.expressionToString(expr.callee);\n      const match = exprStr.match(/Provider<(\\w+)>/);\n      return match ? match[1] : null;\n    }\n\n    return null;\n  }\n\n  /**\n   * Identify how this provider is consumed\n   */\n  identifyAccessPatterns(providerType, analysis) {\n    if (!this.ast || !this.ast.body) return;\n\n    // Search for context.watch(), context.read(), context.select()\n    this.ast.body.forEach((node) => {\n      if (node.type === 'ClassDeclaration') {\n        const buildMethod = node.body?.methods?.find((m) => m.key?.name === 'build');\n        if (buildMethod) {\n          this.scanForAccessPatterns(buildMethod, providerType, analysis);\n        }\n      }\n    });\n  }\n\n  /**\n   * Scan method for watch/read/select patterns\n   */\n  scanForAccessPatterns(method, providerType, analysis) {\n    if (!method.body) return;\n\n    const code = JSON.stringify(method.body);\n\n    // Check for access patterns\n    if (code.includes('context.watch')) {\n      analysis.accessPatterns.push('watch');\n    }\n    if (code.includes('context.read')) {\n      analysis.accessPatterns.push('read');\n    }\n    if (code.includes('context.select')) {\n      analysis.accessPatterns.push('select');\n    }\n\n    // Find consumer widgets\n    if (code.includes('Consumer')) {\n      analysis.accessPatterns.push('Consumer');\n    }\n  }\n\n  /**\n   * Phase 4: Find all context access points\n   * \n   * Maps:\n   * - Which widgets use context\n   * - How they access it (context.theme(), context.mediaQuery(), etc.)\n   * - SSR compatibility\n   */\n  findContextAccessPoints() {\n    if (!this.ast || !this.ast.body) return;\n\n    this.ast.body.forEach((node) => {\n      if (node.type !== 'ClassDeclaration') return;\n\n      const className = node.id?.name;\n      const buildMethod = node.body?.methods?.find((m) => m.key?.name === 'build');\n\n      if (buildMethod) {\n        const usagePoints = this.extractContextUsageInMethod(buildMethod, className);\n        this.contextAccessPoints.push(...usagePoints);\n      }\n    });\n  }\n\n  /**\n   * Extract all context.X() calls in a method\n   */\n  extractContextUsageInMethod(method, className) {\n    const usages = [];\n\n    if (!method.body) return usages;\n\n    const stmts = method.body.type === 'BlockStatement' ? method.body.body : [method.body];\n\n    stmts.forEach((stmt) => {\n      const foundUsages = this.findContextUsageInStatement(stmt, className);\n      usages.push(...foundUsages);\n    });\n\n    return usages;\n  }\n\n  /**\n   * Recursively find context usage patterns\n   */\n  findContextUsageInStatement(stmt, className) {\n    const usages = [];\n\n    if (!stmt) return usages;\n\n    if (stmt.type === 'ExpressionStatement' && stmt.expression) {\n      const stmtUsages = this.findContextUsageInExpression(stmt.expression, className);\n      usages.push(...stmtUsages);\n    }\n\n    if (stmt.type === 'ReturnStatement' && stmt.argument) {\n      const retUsages = this.findContextUsageInExpression(stmt.argument, className);\n      usages.push(...retUsages);\n    }\n\n    if (stmt.type === 'BlockStatement' && stmt.body) {\n      stmt.body.forEach((s) => {\n        const blockUsages = this.findContextUsageInStatement(s, className);\n        usages.push(...blockUsages);\n      });\n    }\n\n    return usages;\n  }\n\n  /**\n   * Find context usage in expressions\n   * Looks for: Theme.of(context), context.watch(), context.read(), etc.\n   */\n  findContextUsageInExpression(expr, className) {\n    const usages = [];\n\n    if (!expr) return usages;\n\n    const exprStr = JSON.stringify(expr);\n\n    // Pattern 1: Theme.of(context)\n    if (exprStr.includes('Theme.of') && exprStr.includes('context')) {\n      usages.push(new ContextUsagePattern(\n        'Theme.of(context)',\n        'inherited-widget-lookup',\n        expr.location,\n        'ThemeData',\n        true,\n        'Pure value access, no subscription required'\n      ));\n    }\n\n    // Pattern 2: context.theme()\n    if (exprStr.includes('context.theme')) {\n      usages.push(new ContextUsagePattern(\n        'context.theme()',\n        'context-service',\n        expr.location,\n        'ThemeData',\n        true,\n        'Service access during build'\n      ));\n    }\n\n    // Pattern 3: context.watch<T>()\n    if (exprStr.includes('context.watch')) {\n      usages.push(new ContextUsagePattern(\n        'context.watch<T>()',\n        'provider-watch',\n        expr.location,\n        'T',\n        false,\n        'Requires reactive subscription - not SSR safe'\n      ));\n    }\n\n    // Pattern 4: context.read<T>()\n    if (exprStr.includes('context.read')) {\n      usages.push(new ContextUsagePattern(\n        'context.read<T>()',\n        'provider-read',\n        expr.location,\n        'T',\n        true,\n        'Single read at render time - SSR safe'\n      ));\n    }\n\n    // Pattern 5: context.mediaQuery()\n    if (exprStr.includes('context.mediaQuery') || exprStr.includes('MediaQuery.of')) {\n      usages.push(new ContextUsagePattern(\n        'context.mediaQuery()',\n        'context-service',\n        expr.location,\n        'MediaQueryData',\n        true,\n        'Read-only responsive info'\n      ));\n    }\n\n    // Pattern 6: State mutations in handlers\n    if (exprStr.includes('notifyListeners') || exprStr.includes('increment')) {\n      usages.push(new ContextUsagePattern(\n        'notifyListeners()',\n        'global-state-mutation',\n        expr.location,\n        'void',\n        false,\n        'Mutations do not trigger re-render in SSR'\n      ));\n    }\n\n    // Recursively search nested expressions\n    if (expr.type === 'CallExpression' && expr.args) {\n      expr.args.forEach((arg) => {\n        const argUsages = this.findContextUsageInExpression(arg, className);\n        usages.push(...argUsages);\n      });\n    }\n\n    if (expr.type === 'ObjectLiteral' && expr.properties) {\n      expr.properties.forEach((prop) => {\n        const propUsages = this.findContextUsageInExpression(prop.value, className);\n        usages.push(...propUsages);\n      });\n    }\n\n    if (expr.type === 'MemberExpression') {\n      const memberUsages = this.findContextUsageInExpression(expr.object, className);\n      usages.push(...memberUsages);\n    }\n\n    return usages;\n  }\n\n  /**\n   * Phase 5a: Build InheritedWidget graph\n   * Maps provider -> consumer relationships\n   */\n  buildInheritedWidgetGraph() {\n    this.inheritedWidgets.forEach((widget) => {\n      this.inheritedWidgetGraph[widget.name] = {\n        providedBy: this.findWhoProvides(widget.name),\n        consumedBy: this.findWhoConsumes(widget.name),\n        providedValue: widget.properties[0]?.type || 'unknown',\n        flowPath: this.traceContextFlow(widget.name),\n      };\n    });\n  }\n\n  /**\n   * Phase 5b: Build Provider graph\n   * Maps provider -> consumer relationships\n   */\n  buildProviderGraph() {\n    this.providers.forEach((provider) => {\n      const key = provider.providerType;\n      this.providerGraph[key] = {\n        providedBy: this.findWhoCreatesProvider(provider.providerType),\n        providedType: provider.valueType,\n        consumedBy: this.findWhoConsumesProvider(provider.providerType),\n        accessPatterns: provider.accessPatterns,\n        flowPath: this.traceProviderFlow(provider.providerType),\n      };\n    });\n  }\n\n  /**\n   * Find which widget provides this inherited widget\n   */\n  findWhoProvides(widgetName) {\n    // Simplified: return widget name of class that instantiates it\n    // In real implementation, search AST for instantiation\n    return 'MyApp';\n  }\n\n  /**\n   * Find which widgets consume this inherited widget\n   */\n  findWhoConsumes(widgetName) {\n    const consumers = [];\n    // Search for calls to widgetName.of()\n    this.contextAccessPoints.forEach((usage) => {\n      if (usage.pattern.includes(widgetName)) {\n        consumers.push(usage.dependent);\n      }\n    });\n    return consumers;\n  }\n\n  /**\n   * Find where this inherited widget's context flows\n   */\n  traceContextFlow(widgetName) {\n    // Simplified path tracing\n    return `${this.findWhoProvides(widgetName)} -> ${widgetName} -> ${this.findWhoConsumes(widgetName).join(', ')}`;\n  }\n\n  /**\n   * Find who creates this provider\n   */\n  findWhoCreatesProvider(providerType) {\n    // Simplified: return app root\n    return 'MyApp';\n  }\n\n  /**\n   * Find who consumes this provider\n   */\n  findWhoConsumesProvider(providerType) {\n    const consumers = [];\n    this.contextAccessPoints.forEach((usage) => {\n      if (usage.pattern.includes('watch') || usage.pattern.includes('read')) {\n        consumers.push(usage.dependent);\n      }\n    });\n    return consumers;\n  }\n\n  /**\n   * Find provider flow path through widget tree\n   */\n  traceProviderFlow(providerType) {\n    return `MyApp -> Provider -> MaterialApp -> [consumers]`;\n  }\n\n  /**\n   * Helper: Infer type from expression\n   */\n  inferType(expr) {\n    if (!expr) return 'any';\n    if (expr.type === 'Literal') {\n      const val = expr.value;\n      if (typeof val === 'string') return 'string';\n      if (typeof val === 'number') return 'number';\n      if (typeof val === 'boolean') return 'boolean';\n    }\n    return 'any';\n  }\n\n  /**\n   * Helper: Infer return type from method body\n   */\n  inferReturnType(body) {\n    // Simplified\n    return 'any';\n  }\n\n  /**\n   * Helper: Check if field has default value\n   */\n  hasDefaultValue(field) {\n    return field.initialValue !== null && field.initialValue !== undefined;\n  }\n\n  /**\n   * Helper: Convert expression to string\n   */\n  expressionToString(expr) {\n    if (!expr) return 'null';\n    if (expr.type === 'Identifier') return expr.name;\n    if (expr.type === 'Literal') return String(expr.value);\n    return JSON.stringify(expr).substring(0, 50);\n  }\n\n  /**\n   * Get analysis results\n   */\n  getResults() {\n    return {\n      inheritedWidgets: Array.from(this.inheritedWidgets.values()),\n      changeNotifiers: Array.from(this.changeNotifiers.values()),\n      providers: Array.from(this.providers.values()),\n      contextAccessPoints: this.contextAccessPoints,\n      inheritedWidgetGraph: this.inheritedWidgetGraph,\n      providerGraph: this.providerGraph,\n      errors: this.errors,\n    };\n  }\n}\n\nexport { ContextAnalyzer };\n", "/**\n * FlutterJS SSR Analyzer - Phase 3 (FIXED)\n * Analyzes Server-Side Rendering (SSR) compatibility\n * Detects SSR-safe and unsafe patterns\n * Generates migration path for SSR compliance\n */\n\nimport {\n  HydrationRequirement,\n  LazyLoadOpportunity,\n} from './context_analyzer_data.js';\nimport { getLogger } from './flutterjs_logger.js';\n\nclass SSRAnalyzer {\n  constructor(contextAnalysisResults, stateAnalysisResults = null, options = {}) {\n    // Input from Phase 2 & 3\n    this.contextResults = contextAnalysisResults;\n    this.stateResults = stateAnalysisResults;\n\n    this.options = {\n      strict: false,\n      targetPlatform: 'node',\n      ...options,\n    };\n\n    // Initialize logger\n     this.logger = getLogger().createComponentLogger('SSRAnalyzer');\n\n    // Results storage\n    this.ssrSafePatterns = [];\n    this.ssrUnsafePatterns = [];\n    this.hydrationRequirements = [];\n    this.lazyLoadOpportunities = [];\n    this.ssrMigrationPath = [];\n    this.validationIssues = [];\n\n    // Metrics\n    this.ssrCompatibilityScore = 0;\n    this.hydrationCount = 0;\n    this.errors = [];\n  }\n\n  /**\n   * Main entry point - analyze SSR compatibility\n   */\n  analyze() {\n    this.logger.startSession('SSRAnalysis');\n    this.logger.info('Starting SSR compatibility analysis');\n\n    try {\n      // Phase 1: Detect SSR-safe patterns\n      this.detectSsrSafePatterns();\n      this.logger.count('SSR-safe patterns found', this.ssrSafePatterns.length);\n\n      // Phase 2: Detect SSR-unsafe patterns\n      this.detectSsrUnsafePatterns();\n      this.logger.count('SSR-unsafe patterns found', this.ssrUnsafePatterns.length);\n\n      // Phase 3: Identify hydration needs\n      this.identifyHydrationNeeds();\n      this.logger.count('Hydration dependencies', this.hydrationRequirements.length);\n\n      // Phase 4: Detect lazy load opportunities\n      this.detectLazyLoadOpportunities();\n      this.logger.count('Lazy load opportunities', this.lazyLoadOpportunities.length);\n\n      // Phase 5: Generate migration path\n      this.generateMigrationPath();\n      this.logger.count('Migration steps', this.ssrMigrationPath.length);\n\n      // Phase 6: Validate and score\n      this.validateSsrRequirements();\n      this.calculateCompatibilityScore();\n      this.logger.count('SSR Compatibility Score', this.ssrCompatibilityScore);\n\n      this.logger.success('SSR analysis complete');\n      this.logger.endSession('SSRAnalysis');\n\n      return this.getResults();\n    } catch (error) {\n      this.logger.failure('SSR analysis failed', error.message);\n      this.errors.push(error);\n      this.logger.endSession('SSRAnalysis');\n      return this.getResults();\n    }\n  }\n\n  /**\n   * Phase 1: Detect SSR-safe patterns\n   */\n  detectSsrSafePatterns() {\n    const patterns = [];\n\n    // Pattern 1: InheritedWidget static accessors\n    patterns.push({\n      pattern: 'InheritedWidget static accessors',\n      example: 'ThemeProvider.of(context)',\n      safeFor: 'SSR',\n      why: 'Pure value access, no subscription required',\n      confidence: 1.0,\n      category: 'context-access',\n      frequency: 0,\n    });\n\n    // Pattern 2: context.read<T>() in build()\n    patterns.push({\n      pattern: 'context.read<T>() in build()',\n      example: 'context.read<CounterNotifier>()',\n      safeFor: 'SSR',\n      why: 'Single read at render time, no re-subscription needed',\n      confidence: 0.95,\n      category: 'provider-access',\n      frequency: 0,\n    });\n\n    // Pattern 3: Static property access\n    patterns.push({\n      pattern: 'Theme data access',\n      example: 'theme.primaryColor',\n      safeFor: 'SSR',\n      why: 'Read-only during rendering',\n      confidence: 1.0,\n      category: 'value-access',\n      frequency: 0,\n    });\n\n    // Pattern 4: MediaQuery for initial layout\n    patterns.push({\n      pattern: 'MediaQuery.of() for responsive layout',\n      example: 'MediaQuery.of(context).size.width',\n      safeFor: 'SSR',\n      why: 'Server can set default viewport; client hydrates with actual size',\n      confidence: 0.85,\n      category: 'responsive-design',\n      frequency: 0,\n    });\n\n    // Pattern 5: One-time async operations\n    patterns.push({\n      pattern: 'Async data in FutureBuilder (with cached data)',\n      example: 'FutureBuilder with pre-fetched data',\n      safeFor: 'SSR',\n      why: 'Server can execute async, pass pre-rendered HTML to client',\n      confidence: 0.80,\n      category: 'async-operation',\n      frequency: 0,\n    });\n\n    // Scan context results for actual safe patterns\n    if (this.contextResults && this.contextResults.contextAccessPoints) {\n      this.contextResults.contextAccessPoints.forEach((usage) => {\n        if (usage.ssrSafe) {\n          const pattern = patterns.find((p) => p.example.includes(usage.pattern.split('(')[0]));\n          if (pattern) {\n            pattern.frequency++;\n          }\n\n          this.ssrSafePatterns.push({\n            pattern: usage.pattern,\n            type: usage.type,\n            location: usage.location,\n            example: usage.pattern,\n            why: usage.reason,\n            confidence: 0.95,\n          });\n        }\n      });\n    }\n\n    // Add framework patterns\n    this.ssrSafePatterns.push(...patterns);\n  }\n\n  /**\n   * Phase 2: Detect SSR-unsafe patterns\n   */\n  detectSsrUnsafePatterns() {\n    const basePatterns = [\n      {\n        pattern: 'context.watch<T>() subscriptions',\n        example: 'context.watch<CounterNotifier>()',\n        unsafeFor: 'SSR',\n        why: 'Requires reactive subscription & listeners on client, not available during server render',\n        confidence: 1.0,\n        category: 'provider-subscription',\n        severity: 'error',\n        frequency: 0,\n      },\n      {\n        pattern: 'State mutations in event handlers',\n        example: 'counter.increment() in onPressed',\n        unsafeFor: 'SSR',\n        why: 'Event handlers don\\'t exist on server, mutations have no effect',\n        confidence: 1.0,\n        category: 'state-mutation',\n        severity: 'error',\n        frequency: 0,\n      },\n      {\n        pattern: 'ChangeNotifier.notifyListeners() calls',\n        example: 'notifyListeners() in method',\n        unsafeFor: 'SSR',\n        why: 'Listeners don\\'t exist during initial SSR render',\n        confidence: 0.95,\n        category: 'notification',\n        severity: 'error',\n        frequency: 0,\n      },\n      {\n        pattern: 'Browser APIs',\n        example: 'window.localStorage, document.getElementById()',\n        unsafeFor: 'SSR',\n        why: 'window and document objects don\\'t exist on Node.js server',\n        confidence: 1.0,\n        category: 'browser-api',\n        severity: 'critical',\n        frequency: 0,\n      },\n      {\n        pattern: 'Timers and intervals',\n        example: 'setTimeout, setInterval, setImmediate',\n        unsafeFor: 'SSR',\n        why: 'Can cause unexpected behavior and performance issues during server render',\n        confidence: 0.90,\n        category: 'async-operation',\n        severity: 'warning',\n        frequency: 0,\n      },\n      {\n        pattern: 'Random values without seeding',\n        example: 'Math.random()',\n        unsafeFor: 'SSR',\n        why: 'Different values on server vs client cause hydration mismatch',\n        confidence: 0.99,\n        category: 'determinism',\n        severity: 'error',\n        frequency: 0,\n      },\n      {\n        pattern: 'Navigator and route access',\n        example: 'Navigator.of(context).push()',\n        unsafeFor: 'SSR',\n        why: 'Navigation happens on client, not on server',\n        confidence: 1.0,\n        category: 'navigation',\n        severity: 'warning',\n        frequency: 0,\n      },\n      {\n        pattern: 'GestureDetector and event handlers',\n        example: 'GestureDetector, onTap, onLongPress',\n        unsafeFor: 'SSR',\n        why: 'User interactions don\\'t exist on server',\n        confidence: 1.0,\n        category: 'user-interaction',\n        severity: 'warning',\n        frequency: 0,\n      },\n      {\n        pattern: 'setState in initState or build',\n        example: 'this.setState(() => {...}) in build()',\n        unsafeFor: 'SSR',\n        why: 'Triggers re-render during render cycle, can cause infinite loops',\n        confidence: 0.95,\n        category: 'state-management',\n        severity: 'critical',\n        frequency: 0,\n      },\n    ];\n\n    // Scan context results for actual unsafe patterns\n    if (this.contextResults && this.contextResults.contextAccessPoints) {\n      this.contextResults.contextAccessPoints.forEach((usage) => {\n        if (!usage.ssrSafe) {\n          const pattern = basePatterns.find((p) => p.example.includes(usage.pattern.split('(')[0]));\n          if (pattern) {\n            pattern.frequency++;\n          }\n\n          this.ssrUnsafePatterns.push({\n            pattern: usage.pattern,\n            type: usage.type,\n            location: usage.location,\n            example: usage.pattern,\n            why: usage.reason,\n            confidence: 0.95,\n            severity: 'error',\n            suggestion: usage.getMigrationAdvice?.() || 'Refactor to SSR-safe pattern',\n          });\n        }\n      });\n    }\n\n    // Add base patterns with frequencies\n    this.ssrUnsafePatterns.push(...basePatterns);\n  }\n\n  /**\n   * Phase 3: Identify hydration needs\n   */\n  identifyHydrationNeeds() {\n    const hydrationNeeds = [];\n\n    // Need 1: ChangeNotifier instances\n    if (this.contextResults && this.contextResults.changeNotifiers) {\n      this.contextResults.changeNotifiers.forEach((notifier) => {\n        if (notifier.consumers && notifier.consumers.length > 0) {\n          const requirement = new HydrationRequirement(\n            notifier.name,\n            `State needs to be re-created and listeners re-attached post-hydration for ${notifier.consumers.length} consumer(s)`,\n            0\n          );\n\n          notifier.consumers.forEach((consumer) => {\n            requirement.requiredState.push(`${consumer}.state`);\n          });\n\n          hydrationNeeds.push(requirement);\n          this.hydrationCount++;\n        }\n      });\n    }\n\n    // Need 2: Provider subscriptions\n    if (this.contextResults && this.contextResults.providers) {\n      this.contextResults.providers.forEach((provider) => {\n        if (provider.accessPatterns && provider.accessPatterns.includes('watch')) {\n          const requirement = new HydrationRequirement(\n            `Provider<${provider.valueType}>`,\n            `context.watch() subscriptions need to be re-established on client for reactive updates`,\n            1\n          );\n\n          requirement.requiresProvider(provider.providerType);\n          hydrationNeeds.push(requirement);\n          this.hydrationCount++;\n        }\n      });\n    }\n\n    // Need 3: Event handlers\n    if (this.stateResults && this.stateResults.eventHandlers) {\n      this.stateResults.eventHandlers.forEach((handler) => {\n        if (!hydrationNeeds.some((h) => h.dependency === handler.handler)) {\n          const requirement = new HydrationRequirement(\n            handler.handler,\n            `Event handler \"${handler.handler}\" must be attached to DOM after hydration`,\n            2\n          );\n          hydrationNeeds.push(requirement);\n          this.hydrationCount++;\n        }\n      });\n    }\n\n    hydrationNeeds.sort((a, b) => a.order - b.order);\n    this.hydrationRequirements = hydrationNeeds;\n  }\n\n  /**\n   * Phase 4: Detect lazy load opportunities\n   */\n  detectLazyLoadOpportunities() {\n    const opportunities = [];\n\n    // Opportunity 1: Pages not rendered initially\n    if (this.contextResults && this.contextResults.inheritedWidgets) {\n      this.contextResults.inheritedWidgets.forEach((widget) => {\n        if (widget.usageCount === 0 || (widget.usageCount && widget.usageCount <= 1)) {\n          const opp = new LazyLoadOpportunity(\n            widget.name,\n            `${widget.name} is not needed until user navigates to it`,\n            '15KB',\n            'widget'\n          );\n          opp.setRecommendation('Use LazyRoute or dynamic import: import(widgetPath)');\n          opp.calculatePriority(15);\n          opportunities.push(opp);\n        }\n      });\n    }\n\n    // Opportunity 2: Heavy ChangeNotifiers\n    if (this.contextResults && this.contextResults.changeNotifiers) {\n      this.contextResults.changeNotifiers.forEach((notifier) => {\n        if (notifier.methods && notifier.methods.length > 10) {\n          const opp = new LazyLoadOpportunity(\n            notifier.name,\n            `${notifier.name} is complex and only needed if feature is used`,\n            '8KB',\n            'notifier'\n          );\n          opp.setRecommendation('Lazy create in Provider: create: (context) => Provider.lazy(() => import(...))');\n          opp.calculatePriority(8);\n          opportunities.push(opp);\n        }\n      });\n    }\n\n    this.lazyLoadOpportunities = opportunities;\n  }\n\n  /**\n   * Phase 5: Generate migration path\n   */\n  generateMigrationPath() {\n    const steps = [];\n\n    // Step 1: Replace context.watch()\n    const watchUnsafe = this.ssrUnsafePatterns.filter((p) => p.pattern?.includes('watch'));\n    if (watchUnsafe.length > 0) {\n      steps.push({\n        step: 1,\n        action: 'Replace context.watch() with context.read() for SSR',\n        locations: watchUnsafe.map((p) => p.location),\n        description: `Found ${watchUnsafe.length} context.watch() calls that need refactoring`,\n        example: `\n// Before (not SSR safe):\nfinal counter = context.watch<CounterNotifier>();\n\n// After (SSR safe):\nfinal counter = context.read<CounterNotifier>();\n// Subscribe to changes in didChangeDependencies() instead (client-only)`,\n        effort: 'medium',\n        priority: 'high',\n        files: watchUnsafe.length,\n      });\n    }\n\n    // Step 2: Move state mutations\n    const mutationUnsafe = this.ssrUnsafePatterns.filter((p) => p.pattern?.includes('mutation'));\n    if (mutationUnsafe.length > 0) {\n      steps.push({\n        step: 2,\n        action: 'Move notifyListeners() calls to client-only code',\n        locations: mutationUnsafe.map((p) => p.location),\n        description: `Found ${mutationUnsafe.length} state mutations that don't work in SSR`,\n        example: `\n// Before (not SSR safe):\ncounter.increment();\n\n// After (SSR safe):\nif (kIsWeb) {  // Only on client\n  counter.increment();\n}`,\n        effort: 'low',\n        priority: 'high',\n        files: mutationUnsafe.length,\n      });\n    }\n\n    // Step 3: Implement hydration layer\n    if (this.hydrationRequirements.length > 0) {\n      steps.push({\n        step: 3,\n        action: 'Create hydration layer to re-subscribe listeners post-render',\n        description: `App requires hydration for ${this.hydrationRequirements.length} dependencies`,\n        example: `\n// In main.js or app.dart after runApp():\nif (kIsWeb) {\n  // Re-create listeners, reattach subscriptions\n  hydrate(flutterApp);\n}`,\n        effort: 'high',\n        priority: 'critical',\n        dependencies: this.hydrationRequirements.length,\n      });\n    }\n\n    // Step 4: Add browser API checks\n    const browserApiUnsafe = this.ssrUnsafePatterns.filter((p) => p.category === 'browser-api');\n    if (browserApiUnsafe.length > 0) {\n      steps.push({\n        step: 4,\n        action: 'Wrap browser-specific APIs in kIsWeb checks',\n        description: `Found ${browserApiUnsafe.length} browser API calls`,\n        example: `\n// Before:\nfinal stored = window.localStorage.getItem('key');\n\n// After:\nfinal stored = kIsWeb ? window.localStorage.getItem('key') : null;`,\n        effort: 'low',\n        priority: 'medium',\n        files: browserApiUnsafe.length,\n      });\n    }\n\n    // Step 5: Implement lazy loading\n    if (this.lazyLoadOpportunities.length > 0) {\n      steps.push({\n        step: 5,\n        action: 'Implement code splitting for lazy-loaded widgets',\n        description: `${this.lazyLoadOpportunities.length} opportunities identified`,\n        example: `\n// Use dynamic routes\nfinal route = await LazyRoute.create(\n  () => import('pages/DetailPage.dart')\n);`,\n        effort: 'medium',\n        priority: 'low',\n        opportunities: this.lazyLoadOpportunities.length,\n      });\n    }\n\n    // Step 6: Test SSR rendering\n    steps.push({\n      step: steps.length + 1,\n      action: 'Set up SSR testing pipeline',\n      description: 'Render app on server, verify HTML structure',\n      example: `\n// Test SSR output matches CSR:\nconst serverHtml = await renderAppOnServer();\nconst clientHtml = await renderAppOnClient();\nassert(serverHtml === clientHtml, 'SSR/CSR mismatch');`,\n      effort: 'medium',\n      priority: 'critical',\n    });\n\n    this.ssrMigrationPath = steps;\n  }\n\n  /**\n   * Phase 6: Validate SSR requirements\n   */\n  validateSsrRequirements() {\n    // Check 1: Browser APIs\n    this.ssrUnsafePatterns.forEach((pattern) => {\n      if (pattern.category === 'browser-api') {\n        this.validationIssues.push({\n          type: 'browser-api-usage',\n          severity: 'critical',\n          pattern: pattern.pattern,\n          location: pattern.location,\n          message: `Browser API \"${pattern.pattern}\" is not available on server`,\n          suggestion: 'Wrap in kIsWeb check or use platform-agnostic alternative',\n        });\n      }\n    });\n\n    // Check 2: Non-deterministic operations\n    this.ssrUnsafePatterns.forEach((pattern) => {\n      if (pattern.category === 'determinism') {\n        this.validationIssues.push({\n          type: 'non-deterministic',\n          severity: 'error',\n          pattern: pattern.pattern,\n          location: pattern.location,\n          message: `Non-deterministic operation \"${pattern.pattern}\" causes hydration mismatch`,\n          suggestion: 'Use seeded random or remove randomness from render path',\n        });\n      }\n    });\n\n    // Check 3: Event handlers in build\n    const eventHandlersInBuild = this.ssrUnsafePatterns.filter(\n      (p) => p.category === 'user-interaction'\n    );\n    if (eventHandlersInBuild.length > 0) {\n      this.validationIssues.push({\n        type: 'event-handlers-in-build',\n        severity: 'warning',\n        count: eventHandlersInBuild.length,\n        message: `${eventHandlersInBuild.length} event handlers defined in build() - they'll be recreated on every render`,\n        suggestion: 'Move event handler definitions to initState or class level',\n      });\n    }\n\n    // Check 4: Hydration completeness\n    if (this.hydrationRequirements.length > 0 && this.ssrMigrationPath.length === 0) {\n      this.validationIssues.push({\n        type: 'incomplete-hydration',\n        severity: 'error',\n        message: `App has ${this.hydrationRequirements.length} hydration needs but no hydration layer implemented`,\n        suggestion: 'Add hydration step to migration path',\n      });\n    }\n  }\n\n  /**\n   * Calculate SSR compatibility score (0-100)\n   * FIXED: criticalIssues is now defined properly\n   */\n  calculateCompatibilityScore() {\n    let score = 100;\n\n    // Deduct for unsafe patterns\n    const unsafeCount = this.ssrUnsafePatterns.length;\n    score -= Math.min(unsafeCount * 5, 40);\n\n    // Deduct for critical issues\n    const criticalIssues = this.validationIssues.filter((i) => i.severity === 'critical');\n    score -= criticalIssues.length * 15;\n\n    // Deduct for browser APIs\n    const browserApiIssues = this.validationIssues.filter((i) => i.type === 'browser-api-usage');\n    score -= browserApiIssues.length * 10;\n\n    // Add bonus for SSR-safe patterns\n    const safeCount = this.ssrSafePatterns.length;\n    if (safeCount > 0) {\n      score += Math.min(safeCount * 2, 15);\n    }\n\n    // Add bonus for successful hydration setup\n    if (this.ssrMigrationPath.length > 3) {\n      score += 10;\n    }\n\n    // Ensure score is in valid range\n    this.ssrCompatibilityScore = Math.max(0, Math.min(100, score));\n  }\n\n  /**\n   * Determine overall SSR compatibility\n   */\n  getOverallCompatibility() {\n    if (this.ssrCompatibilityScore >= 85) {\n      return 'full';\n    } else if (this.ssrCompatibilityScore >= 60) {\n      return 'partial';\n    } else if (this.ssrCompatibilityScore >= 30) {\n      return 'limited';\n    } else {\n      return 'none';\n    }\n  }\n\n  /**\n   * Get estimated migration effort\n   */\n  getEstimatedEffort() {\n    const totalEffort = this.ssrMigrationPath.reduce((sum, step) => {\n      const effortMap = { low: 1, medium: 2, high: 3 };\n      return sum + (effortMap[step.effort] || 0);\n    }, 0);\n\n    if (totalEffort <= 3) {\n      return 'minimal';\n    } else if (totalEffort <= 6) {\n      return 'moderate';\n    } else if (totalEffort <= 9) {\n      return 'significant';\n    } else {\n      return 'major-rewrite';\n    }\n  }\n\n  /**\n   * Get results - FIXED: criticalIssues defined locally\n   */\n  getResults() {\n    // FIXED: Define criticalIssues locally\n    const criticalIssues = this.validationIssues.filter((i) => i.severity === 'critical');\n\n    return {\n      overallCompatibility: this.getOverallCompatibility(),\n      ssrCompatibilityScore: this.ssrCompatibilityScore,\n      ssrReadinessScore: this.ssrCompatibilityScore,\n\n      // Patterns\n      ssrSafePatterns: this.ssrSafePatterns,\n      ssrUnsafePatterns: this.ssrUnsafePatterns,\n\n      // Hydration & Optimization\n      hydrationRequirements: this.hydrationRequirements,\n      hydrationCount: this.hydrationCount,\n      lazyLoadOpportunities: this.lazyLoadOpportunities,\n\n      // Migration Path\n      ssrMigrationPath: this.ssrMigrationPath,\n      estimatedEffort: this.getEstimatedEffort(),\n\n      // Validation & Issues\n      validationIssues: this.validationIssues,\n      criticalIssues: criticalIssues,\n      warningIssues: this.validationIssues.filter((i) => i.severity === 'warning'),\n\n      // Summary\n      summary: {\n        compatibility: this.getOverallCompatibility(),\n        score: this.ssrCompatibilityScore,\n        safePatterns: this.ssrSafePatterns.length,\n        unsafePatterns: this.ssrUnsafePatterns.length,\n        hydrationNeeded: this.hydrationCount,\n        migrationSteps: this.ssrMigrationPath.length,\n        criticalIssues: criticalIssues.length,\n        effort: this.getEstimatedEffort(),\n      },\n\n      errors: this.errors,\n    };\n  }\n}\n\nexport { SSRAnalyzer };", "/**\n * FlutterJS Report Generator - Enhanced Phase 3 (FIXED)\n * Generates JSON, Markdown, and Console reports from analysis results\n * \n * Integrates Phase 1 (Widget Analysis), Phase 2 (State Analysis),\n * and Phase 3 (Context + SSR Analysis)\n */\n\nimport { getLogger } from './flutterjs_logger.js';\n\n// ============================================================================\n// REPORT GENERATOR CLASS\n// ============================================================================\n\nclass ReportGenerator {\n  constructor(widgetResults, stateResults, contextResults = null, ssrResults = null, options = {}) {\n    this.widgetResults = widgetResults;\n    this.stateResults = stateResults;\n    this.contextResults = contextResults;\n    this.ssrResults = ssrResults;\n\n    this.options = {\n      format: 'json',\n      includeMetrics: true,\n      includeTree: true,\n      includeValidation: true,\n      includeSuggestions: true,\n      includeContext: true,\n      includeSsr: true,\n      prettyPrint: true,\n      ...options,\n    };\n\n    // Initialize logger\n    this.logger = getLogger().createComponentLogger('ReportGenerator');\n\n    this.metadata = {};\n    this.report = {};\n  }\n\n  /**\n   * Main entry point - generate report\n   */\n  generate() {\n    this.logger.startSession('ReportGeneration');\n    this.logger.info('Generating report');\n\n    try {\n      this.calculateMetrics();\n      this.buildReport();\n\n      let output;\n      switch (this.options.format) {\n        case 'json':\n          output = this.toJSON();\n          break;\n        case 'markdown':\n          output = this.toMarkdown();\n          break;\n        case 'console':\n          output = this.toConsole();\n          break;\n        default:\n          output = this.toJSON();\n      }\n\n      this.logger.success('Report generation complete');\n      this.logger.endSession('ReportGeneration');\n      return output;\n    } catch (error) {\n      this.logger.failure('Report generation failed', error.message);\n      this.logger.endSession('ReportGeneration');\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate metrics from analysis results\n   */\n  calculateMetrics() {\n    const widgets = this.widgetResults.widgets || [];\n    const functions = this.widgetResults.functions || [];\n    const imports = this.widgetResults.imports || [];\n    const stateClasses = this.stateResults.stateClasses || [];\n    const stateFields = this.stateResults.stateFields || [];\n    const setStateCalls = this.stateResults.setStateCalls || [];\n    const lifecycleMethods = this.stateResults.lifecycleMethods || [];\n    const eventHandlers = this.stateResults.eventHandlers || [];\n\n    // Phase 3: Context metrics\n    const inheritedWidgets = this.contextResults?.inheritedWidgets || [];\n    const changeNotifiers = this.contextResults?.changeNotifiers || [];\n    const providers = this.contextResults?.providers || [];\n    const contextAccessPoints = this.contextResults?.contextAccessPoints || [];\n\n    // Phase 3: SSR metrics\n    const ssrScore = this.ssrResults?.ssrCompatibilityScore || 0;\n    const ssrSafePatterns = this.ssrResults?.ssrSafePatterns || [];\n    const ssrUnsafePatterns = this.ssrResults?.ssrUnsafePatterns || [];\n    const hydrationRequirements = this.ssrResults?.hydrationRequirements || [];\n\n    this.metadata = {\n      // Widget metrics (Phase 1)\n      totalWidgets: widgets.length,\n      statelessWidgets: widgets.filter((w) => w.type === 'stateless').length,\n      statefulWidgets: widgets.filter((w) => w.type === 'stateful').length,\n      componentWidgets: widgets.filter((w) => w.type === 'component').length,\n      stateClasses: stateClasses.length,\n\n      // State metrics (Phase 2)\n      totalStateFields: stateFields.length,\n      setStateCallCount: setStateCalls.length,\n      lifecycleMethodCount: lifecycleMethods.length,\n      eventHandlerCount: eventHandlers.length,\n\n      // Context metrics (Phase 3)\n      inheritedWidgets: inheritedWidgets.length,\n      changeNotifiers: changeNotifiers.length,\n      providers: providers.length,\n      contextAccessPoints: contextAccessPoints.length,\n\n      // SSR metrics (Phase 3)\n      ssrCompatibilityScore: ssrScore,\n      ssrCompatibility: this.ssrResults?.overallCompatibility || 'unknown',\n      ssrSafePatterns: ssrSafePatterns.length,\n      ssrUnsafePatterns: ssrUnsafePatterns.length,\n      hydrationRequired: hydrationRequirements.length > 0,\n      hydrationCount: hydrationRequirements.length,\n\n      // Function metrics\n      totalFunctions: functions.length,\n      entryPoint: this.widgetResults.entryPoint,\n      rootWidget: this.widgetResults.rootWidget,\n\n      // Import metrics\n      totalImports: imports.length,\n      externalPackages: new Set(imports.map((imp) => imp.source)).size,\n\n      // Widget tree metrics\n      treeDepth: this.calculateTreeDepth(this.widgetResults.widgetTree),\n\n      // Validation metrics\n      errorCount: this.countValidationIssues(this.stateResults.validationResults, 'error'),\n      warningCount: this.countValidationIssues(this.stateResults.validationResults, 'warning'),\n      infoCount: this.countValidationIssues(this.stateResults.validationResults, 'info'),\n    };\n\n    // Calculate scores\n    this.metadata.healthScore = this.calculateHealthScore();\n    this.metadata.complexityScore = this.calculateComplexityScore();\n  }\n\n  /**\n   * Calculate tree depth\n   */\n  calculateTreeDepth(node, depth = 1) {\n    if (!node || !node.children || node.children.length === 0) {\n      return depth;\n    }\n    return 1 + Math.max(...node.children.map((child) => this.calculateTreeDepth(child, depth + 1)));\n  }\n\n  /**\n   * Count validation issues by severity\n   */\n  countValidationIssues(results, severity) {\n    if (!results) return 0;\n    return results.filter((r) => r.severity === severity).length;\n  }\n\n  /**\n   * Calculate health score (0-100)\n   */\n  calculateHealthScore() {\n    let score = 100;\n\n    score -= this.metadata.errorCount * 10;\n    score -= this.metadata.warningCount * 2;\n\n    if (this.metadata.entryPoint) {\n      score += 5;\n    }\n\n    if (this.metadata.statefulWidgets > this.metadata.statelessWidgets) {\n      score -= 10;\n    }\n\n    if (this.metadata.treeDepth > 5) {\n      score -= 5;\n    }\n\n    if (this.metadata.ssrCompatibilityScore < 50) {\n      score -= 15;\n    }\n\n    return Math.max(0, Math.min(100, score));\n  }\n\n  /**\n   * Calculate complexity score (0-100)\n   */\n  calculateComplexityScore() {\n    let score = 0;\n\n    score += Math.min(this.metadata.totalStateFields * 10, 40);\n    score += Math.min(this.metadata.setStateCallCount * 5, 30);\n    score += Math.min(this.metadata.eventHandlerCount * 2, 20);\n\n    if (this.metadata.treeDepth > 5) {\n      score += 10;\n    }\n\n    score += Math.min(this.metadata.contextAccessPoints * 3, 15);\n\n    return Math.min(100, score);\n  }\n\n  /**\n   * Build comprehensive report object\n   */\n  buildReport() {\n    const widgets = this.widgetResults.widgets || [];\n    const stateClasses = this.stateResults.stateClasses || [];\n    const validationResults = this.stateResults.validationResults || [];\n\n    this.report = {\n      analysis: {\n        file: this.widgetResults.file || 'analysis',\n        timestamp: new Date().toISOString(),\n        status: validationResults.some((r) => r.severity === 'error') ? 'warning' : 'success',\n        phase: 'phase1+phase2+phase3',\n      },\n\n      summary: {\n        widgets: {\n          total: this.metadata.totalWidgets,\n          stateless: this.metadata.statelessWidgets,\n          stateful: this.metadata.statefulWidgets,\n          components: this.metadata.componentWidgets,\n        },\n        state: {\n          stateClasses: this.metadata.stateClasses,\n          stateFields: this.metadata.totalStateFields,\n          setStateCalls: this.metadata.setStateCallCount,\n          lifecycleMethods: this.metadata.lifecycleMethodCount,\n          eventHandlers: this.metadata.eventHandlerCount,\n        },\n        context: this.options.includeContext ? {\n          inheritedWidgets: this.metadata.inheritedWidgets,\n          changeNotifiers: this.metadata.changeNotifiers,\n          providers: this.metadata.providers,\n          contextAccessPoints: this.metadata.contextAccessPoints,\n        } : null,\n        ssr: this.options.includeSsr ? {\n          compatibility: this.metadata.ssrCompatibility,\n          compatibilityScore: this.metadata.ssrCompatibilityScore,\n          safePatterns: this.metadata.ssrSafePatterns,\n          unsafePatterns: this.metadata.ssrUnsafePatterns,\n          hydrationRequired: this.metadata.hydrationRequired,\n          hydrationCount: this.metadata.hydrationCount,\n        } : null,\n        functions: this.metadata.totalFunctions,\n        imports: this.metadata.totalImports,\n        externalPackages: this.metadata.externalPackages,\n        entryPoint: this.metadata.entryPoint,\n        rootWidget: this.metadata.rootWidget,\n        treeDepth: this.metadata.treeDepth,\n        healthScore: this.metadata.healthScore,\n        complexityScore: this.metadata.complexityScore,\n      },\n\n      widgets: this.formatWidgets(),\n      stateClasses: this.formatStateClasses(),\n      imports: this.formatImports(),\n      functions: this.formatFunctions(),\n\n      context: this.options.includeContext ? this.formatContext() : null,\n      ssr: this.options.includeSsr ? this.formatSsr() : null,\n\n      widgetTree: this.options.includeTree ? this.formatWidgetTree() : null,\n      dependencyGraph: this.formatDependencyGraph(),\n      validation: this.options.includeValidation ? this.formatValidation() : null,\n      suggestions: this.options.includeSuggestions ? this.generateSuggestions() : null,\n\n      metrics: this.options.includeMetrics ? this.getDetailedMetrics() : null,\n    };\n  }\n\n  /**\n   * Phase 3: Format context analysis results\n   */\n  formatContext() {\n    if (!this.contextResults) {\n      return {\n        inheritedWidgets: [],\n        changeNotifiers: [],\n        providers: [],\n        contextFlow: {},\n      };\n    }\n\n    return {\n      inheritedWidgets: this.contextResults.inheritedWidgets?.map((widget) => ({\n        name: widget.name,\n        properties: widget.properties,\n        staticAccessors: widget.staticAccessors?.map((a) => a.name),\n        updateShouldNotifyImplemented: widget.updateShouldNotifyImplemented,\n        usedIn: widget.usedIn,\n        usageCount: widget.usageCount,\n      })) || [],\n\n      changeNotifiers: this.contextResults.changeNotifiers?.map((notifier) => ({\n        name: notifier.name,\n        properties: notifier.properties?.length || 0,\n        getters: notifier.getters?.map((g) => g.name) || [],\n        methods: notifier.methods?.map((m) => ({\n          name: m.name,\n          callsNotifyListeners: m.callsNotifyListeners,\n          mutations: m.mutations,\n        })) || [],\n        consumers: notifier.consumers || [],\n      })) || [],\n\n      providers: this.contextResults.providers?.map((provider) => ({\n        type: provider.providerType,\n        valueType: provider.valueType,\n        consumers: provider.consumers || [],\n        accessPatterns: provider.accessPatterns || [],\n      })) || [],\n\n      contextFlow: {\n        inheritedWidgetGraph: this.contextResults.inheritedWidgetGraph || {},\n        providerGraph: this.contextResults.providerGraph || {},\n      },\n\n      contextAccessPoints: this.contextResults.contextAccessPoints?.map((usage) => ({\n        pattern: usage.pattern,\n        type: usage.type,\n        location: usage.location,\n        ssrSafe: usage.ssrSafe,\n        reason: usage.reason,\n      })) || [],\n    };\n  }\n\n  /**\n   * Phase 3: Format SSR analysis results\n   */\n  formatSsr() {\n    if (!this.ssrResults) {\n      return {\n        compatibility: 'unknown',\n        score: 0,\n        patterns: { safe: [], unsafe: [] },\n        hydration: [],\n        migration: [],\n      };\n    }\n\n    return {\n      overallCompatibility: this.ssrResults.overallCompatibility,\n      compatibilityScore: this.ssrResults.ssrCompatibilityScore,\n      readinessScore: this.ssrResults.ssrReadinessScore || this.ssrResults.ssrCompatibilityScore,\n      estimatedEffort: this.ssrResults.estimatedEffort,\n\n      patterns: {\n        safe: this.ssrResults.ssrSafePatterns?.map((p) => ({\n          pattern: p.pattern,\n          example: p.example,\n          why: p.why,\n          confidence: p.confidence,\n        })) || [],\n\n        unsafe: this.ssrResults.ssrUnsafePatterns?.map((p) => ({\n          pattern: p.pattern,\n          example: p.example,\n          why: p.why,\n          severity: p.severity,\n          suggestion: p.suggestion,\n          location: p.location,\n        })) || [],\n      },\n\n      hydration: {\n        required: this.ssrResults.hydrationCount > 0,\n        count: this.ssrResults.hydrationCount,\n        requirements: this.ssrResults.hydrationRequirements?.map((r) => ({\n          dependency: r.dependency,\n          reason: r.reason,\n          order: r.order,\n          requiredProviders: r.requiredProviders,\n          requiredState: r.requiredState,\n        })) || [],\n      },\n\n      lazyLoadingOpportunities: this.ssrResults.lazyLoadOpportunities?.map((opp) => ({\n        target: opp.target,\n        reason: opp.reason,\n        estimatedSize: opp.estimatedSize,\n        priority: opp.priority,\n        recommendation: opp.recommendation,\n      })) || [],\n\n      migrationPath: this.ssrResults.ssrMigrationPath?.map((step) => ({\n        step: step.step,\n        action: step.action,\n        description: step.description,\n        example: step.example,\n        effort: step.effort,\n        priority: step.priority,\n        locations: step.locations,\n      })) || [],\n\n      validationIssues: {\n        critical: this.ssrResults.criticalIssues?.map((i) => ({\n          type: i.type,\n          message: i.message,\n          suggestion: i.suggestion,\n          location: i.location,\n        })) || [],\n\n        warnings: this.ssrResults.warningIssues?.map((i) => ({\n          type: i.type,\n          message: i.message,\n          suggestion: i.suggestion,\n        })) || [],\n      },\n    };\n  }\n\n  /**\n   * Format widgets for report\n   */\n  formatWidgets() {\n    const widgets = {};\n\n    (this.widgetResults.widgets || []).forEach((widget) => {\n      widgets[widget.name] = {\n        type: widget.type,\n        superClass: widget.superClass || null,\n        location: widget.location,\n        constructor: widget.constructor\n          ? {\n            params: widget.constructor.params || [],\n          }\n          : null,\n        methods: widget.methods.map((m) => ({\n          name: m.name,\n          params: m.params || [],\n        })),\n        properties: widget.properties || [],\n        linkedStateClass: widget.linkedStateClass || null,\n        imports: widget.imports || [],\n      };\n    });\n\n    return widgets;\n  }\n\n  /**\n   * FIXED: Format state classes for report\n   * Properly handle StateField objects which may or may not have isUsed method\n   */\n  formatStateClasses() {\n    const stateClasses = {};\n\n    (this.stateResults.stateClasses || []).forEach((sc) => {\n      const metadata = sc.metadata || sc;  // Handle both wrapped and unwrapped formats\n      \n      stateClasses[metadata.name] = {\n        name: metadata.name,\n        linkedStatefulWidget: metadata.linkedStatefulWidget,\n        location: metadata.location,\n\n        stateFields: (metadata.stateFields || []).map((field) => {\n          // FIXED: Check if isUsed is a function before calling it\n          const isUsed = typeof field.isUsed === 'function' \n            ? field.isUsed() \n            : (field.usedInMethods && field.usedInMethods.length > 0);\n\n          return {\n            name: field.name,\n            type: field.type || 'any',\n            initialValue: field.initialValueString || field.initialValue?.toString() || 'undefined',\n            isUsed: isUsed,\n            usedInMethods: field.usedInMethods || [],\n            mutatedInMethods: field.mutatedInMethods || [],\n            mutationCount: (field.mutations && field.mutations.length) || 0,\n          };\n        }),\n\n        lifecycleMethods: (metadata.lifecycleMethods || []).map((lc) => {\n          // FIXED: Check if isValid is a function\n          const isValid = typeof lc.isValid === 'function' \n            ? lc.isValid() \n            : true;\n\n          return {\n            name: lc.name,\n            callsSuper: lc.callsSuper || false,\n            hasSideEffects: lc.hasSideEffects || false,\n            isValid: isValid,\n            issues: lc.validationIssues || [],\n          };\n        }),\n\n        otherMethods: (metadata.otherMethods || []).map((m) => ({\n          name: m.name,\n          params: m.params || [],\n        })),\n      };\n    });\n\n    return stateClasses;\n  }\n\n  /**\n   * Format imports for report\n   */\n  formatImports() {\n    const imports = {};\n\n    (this.widgetResults.imports || []).forEach((imp) => {\n      imports[imp.source] = imp.items || [];\n    });\n\n    return imports;\n  }\n\n  /**\n   * Format functions for report\n   */\n  formatFunctions() {\n    const functions = {};\n\n    (this.widgetResults.functions || []).forEach((func) => {\n      functions[func.name] = {\n        type: func.type,\n        location: func.location,\n        params: (func.params || []).map((p) => ({\n          name: p.name,\n          optional: p.optional,\n        })),\n        isEntryPoint: func.isEntryPoint || false,\n      };\n    });\n\n    return functions;\n  }\n\n  /**\n   * Format widget tree for report\n   */\n  formatWidgetTree() {\n    if (!this.widgetResults.widgetTree) {\n      return null;\n    }\n\n    return this.treeNodeToObject(this.widgetResults.widgetTree);\n  }\n\n  /**\n   * Convert tree node to object recursively\n   */\n  treeNodeToObject(node) {\n    if (!node) return null;\n\n    return {\n      name: node.widget?.name || 'Unknown',\n      type: node.widget?.type || 'unknown',\n      depth: node.depth || 0,\n      children: (node.children || []).map((child) => this.treeNodeToObject(child)),\n    };\n  }\n\n  /**\n   * Format dependency graph for report\n   */\n  formatDependencyGraph() {\n    const graph = this.stateResults.dependencyGraph;\n    if (!graph) return null;\n\n    return {\n      stateToMethods: Object.fromEntries(graph.stateToMethods || []),\n      methodToState: Object.fromEntries(graph.methodToState || []),\n      eventToState: Object.fromEntries(graph.eventToState || []),\n    };\n  }\n\n  /**\n   * Format validation results for report\n   */\n  formatValidation() {\n    const results = this.stateResults.validationResults || [];\n\n    return {\n      totalIssues: results.length,\n      errors: results.filter((r) => r.severity === 'error'),\n      warnings: results.filter((r) => r.severity === 'warning'),\n      info: results.filter((r) => r.severity === 'info'),\n    };\n  }\n\n  /**\n   * Generate suggestions based on analysis\n   */\n  generateSuggestions() {\n    const suggestions = [];\n\n    // Phase 1 & 2 Suggestions\n    if (this.metadata.statefulWidgets > this.metadata.statelessWidgets) {\n      suggestions.push({\n        type: 'structure',\n        severity: 'info',\n        message: 'More stateful than stateless widgets',\n        suggestion: 'Consider using stateless widgets where possible for better performance',\n      });\n    }\n\n    if (this.metadata.treeDepth > 5) {\n      suggestions.push({\n        type: 'structure',\n        severity: 'warning',\n        message: 'Deep widget tree detected',\n        suggestion: 'Consider refactoring to reduce nesting depth (aim for < 5 levels)',\n      });\n    }\n\n    // Phase 3: SSR Suggestions\n    if (this.options.includeSsr && this.ssrResults) {\n      if (this.metadata.ssrCompatibilityScore < 50) {\n        suggestions.push({\n          type: 'ssr-compatibility',\n          severity: 'warning',\n          message: `Low SSR compatibility score (${this.metadata.ssrCompatibilityScore}/100)`,\n          suggestion: `Follow the ${this.ssrResults.ssrMigrationPath?.length || 0} migration steps to improve SSR support`,\n          migrationSteps: this.ssrResults.ssrMigrationPath?.length || 0,\n        });\n      }\n\n      if (this.metadata.ssrUnsafePatterns > 5) {\n        suggestions.push({\n          type: 'ssr-patterns',\n          severity: 'warning',\n          message: `Found ${this.metadata.ssrUnsafePatterns} SSR-unsafe patterns`,\n          suggestion: 'Refactor unsafe patterns to enable server-side rendering',\n          unsafePatterns: this.metadata.ssrUnsafePatterns,\n        });\n      }\n\n      if (this.metadata.hydrationRequired) {\n        suggestions.push({\n          type: 'hydration',\n          severity: 'info',\n          message: `App requires hydration for ${this.metadata.hydrationCount} dependencies`,\n          suggestion: 'Implement hydration layer to re-attach listeners after server render',\n          hydrationDependencies: this.metadata.hydrationCount,\n        });\n      }\n\n      if (this.ssrResults.lazyLoadOpportunities?.length > 0) {\n        suggestions.push({\n          type: 'optimization',\n          severity: 'info',\n          message: `Found ${this.ssrResults.lazyLoadOpportunities.length} lazy-load opportunities`,\n          suggestion: 'Implement code splitting to reduce initial bundle size',\n          opportunities: this.ssrResults.lazyLoadOpportunities.length,\n        });\n      }\n    }\n\n    // Phase 3: Context Suggestions\n    if (this.options.includeContext && this.contextResults) {\n      if (this.metadata.inheritedWidgets > 3) {\n        suggestions.push({\n          type: 'context-hierarchy',\n          severity: 'info',\n          message: `Multiple InheritedWidgets detected (${this.metadata.inheritedWidgets})`,\n          suggestion: 'Consider consolidating context providers to reduce nesting',\n          inheritedWidgets: this.metadata.inheritedWidgets,\n        });\n      }\n\n      if (this.metadata.providers > 0) {\n        suggestions.push({\n          type: 'state-management',\n          severity: 'info',\n          message: `Using Provider pattern (${this.metadata.providers} providers)`,\n          suggestion: 'Ensure providers are properly organized and lazy-initialized where possible',\n          providers: this.metadata.providers,\n        });\n      }\n    }\n\n    return suggestions;\n  }\n\n  /**\n   * Get detailed metrics\n   */\n  getDetailedMetrics() {\n    return {\n      widgetMetrics: {\n        total: this.metadata.totalWidgets,\n        byType: {\n          stateless: this.metadata.statelessWidgets,\n          stateful: this.metadata.statefulWidgets,\n          component: this.metadata.componentWidgets,\n          state: this.metadata.stateClasses,\n        },\n      },\n\n      stateMetrics: {\n        stateClasses: this.metadata.stateClasses,\n        totalFields: this.metadata.totalStateFields,\n        setStateCalls: this.metadata.setStateCallCount,\n        lifecycleMethods: this.metadata.lifecycleMethodCount,\n        eventHandlers: this.metadata.eventHandlerCount,\n      },\n\n      contextMetrics: this.options.includeContext ? {\n        inheritedWidgets: this.metadata.inheritedWidgets,\n        changeNotifiers: this.metadata.changeNotifiers,\n        providers: this.metadata.providers,\n        contextAccessPoints: this.metadata.contextAccessPoints,\n      } : null,\n\n      ssrMetrics: this.options.includeSsr ? {\n        compatibilityScore: this.metadata.ssrCompatibilityScore,\n        compatibility: this.metadata.ssrCompatibility,\n        safePatterns: this.metadata.ssrSafePatterns,\n        unsafePatterns: this.metadata.ssrUnsafePatterns,\n        hydrationRequired: this.metadata.hydrationRequired,\n        hydrationCount: this.metadata.hydrationCount,\n      } : null,\n\n      functionMetrics: {\n        total: this.metadata.totalFunctions,\n        entryPoint: this.metadata.entryPoint || 'none',\n      },\n\n      dependencyMetrics: {\n        totalImports: this.metadata.totalImports,\n        externalPackages: this.metadata.externalPackages,\n      },\n\n      structureMetrics: {\n        widgetTreeDepth: this.metadata.treeDepth,\n        rootWidget: this.metadata.rootWidget || 'none',\n      },\n\n      healthMetrics: {\n        healthScore: this.metadata.healthScore,\n        complexityScore: this.metadata.complexityScore,\n        errors: this.metadata.errorCount,\n        warnings: this.metadata.warningCount,\n      },\n    };\n  }\n\n  /**\n   * Generate JSON report\n   */\n  toJSON() {\n    if (this.options.prettyPrint) {\n      return JSON.stringify(this.report, null, 2);\n    } else {\n      return JSON.stringify(this.report);\n    }\n  }\n\n  /**\n   * Generate Markdown report\n   */\n  toMarkdown() {\n    let md = '# FlutterJS Code Analysis Report (Phase 1 + 2 + 3)\\n\\n';\n\n    md += `**Generated:** ${new Date().toISOString()}\\n\\n`;\n\n    // Summary Table\n    md += '## Summary\\n\\n';\n    md += `| Metric | Count |\\n`;\n    md += `|--------|-------|\\n`;\n    md += `| Total Widgets | ${this.metadata.totalWidgets} |\\n`;\n    md += `| Stateless | ${this.metadata.statelessWidgets} |\\n`;\n    md += `| Stateful | ${this.metadata.statefulWidgets} |\\n`;\n    md += `| State Classes | ${this.metadata.stateClasses} |\\n`;\n    md += `| State Fields | ${this.metadata.totalStateFields} |\\n`;\n    md += `| Health Score | ${this.metadata.healthScore}/100 |\\n`;\n    md += `| Complexity Score | ${this.metadata.complexityScore}/100 |\\n`;\n\n    if (this.options.includeContext) {\n      md += `| InheritedWidgets | ${this.metadata.inheritedWidgets} |\\n`;\n      md += `| ChangeNotifiers | ${this.metadata.changeNotifiers} |\\n`;\n      md += `| Providers | ${this.metadata.providers} |\\n`;\n    }\n\n    if (this.options.includeSsr) {\n      md += `| SSR Compatibility | ${this.metadata.ssrCompatibility} |\\n`;\n      md += `| SSR Score | ${this.metadata.ssrCompatibilityScore}/100 |\\n`;\n      md += `| Hydration Required | ${this.metadata.hydrationRequired ? 'Yes' : 'No'} |\\n`;\n    }\n\n    md += '\\n';\n\n    // Context Section\n    if (this.options.includeContext && this.contextResults) {\n      md += '## Context Analysis (Phase 3)\\n\\n';\n\n      if (this.metadata.inheritedWidgets > 0) {\n        md += '### InheritedWidgets\\n\\n';\n        (this.contextResults.inheritedWidgets || []).forEach((widget) => {\n          md += `- **${widget.name}**\\n`;\n          if (widget.properties && widget.properties.length > 0) {\n            md += `  - Properties: ${widget.properties.map((p) => p.name).join(', ')}\\n`;\n          }\n          if (widget.usedIn && widget.usedIn.length > 0) {\n            md += `  - Used in: ${widget.usedIn.join(', ')}\\n`;\n          }\n        });\n        md += '\\n';\n      }\n\n      if (this.metadata.changeNotifiers > 0) {\n        md += '### ChangeNotifiers\\n\\n';\n        (this.contextResults.changeNotifiers || []).forEach((notifier) => {\n          md += `- **${notifier.name}**\\n`;\n          if (notifier.consumers && notifier.consumers.length > 0) {\n            md += `  - Consumed by: ${notifier.consumers.join(', ')}\\n`;\n          }\n        });\n        md += '\\n';\n      }\n    }\n\n    // SSR Section\n    if (this.options.includeSsr && this.ssrResults) {\n      md += '## SSR Compatibility Analysis (Phase 3)\\n\\n';\n      md += `**Overall Compatibility:** ${this.metadata.ssrCompatibility}\\n`;\n      md += `**Score:** ${this.metadata.ssrCompatibilityScore}/100\\n`;\n      md += `**Effort to fix:** ${this.ssrResults.estimatedEffort}\\n\\n`;\n\n      if (this.metadata.ssrUnsafePatterns > 0) {\n        md += `### Unsafe Patterns (${this.metadata.ssrUnsafePatterns})\\n\\n`;\n        (this.ssrResults.ssrUnsafePatterns || []).slice(0, 10).forEach((pattern) => {\n          md += `- **${pattern.pattern}**: ${pattern.why}\\n`;\n        });\n        if (this.metadata.ssrUnsafePatterns > 10) {\n          md += `- ... and ${this.metadata.ssrUnsafePatterns - 10} more\\n`;\n        }\n        md += '\\n';\n      }\n\n      if (this.ssrResults.hydrationCount > 0) {\n        md += `### Hydration Requirements (${this.ssrResults.hydrationCount})\\n\\n`;\n        (this.ssrResults.hydrationRequirements || []).forEach((req) => {\n          md += `- **${req.dependency}**: ${req.reason}\\n`;\n        });\n        md += '\\n';\n      }\n\n      if (this.ssrResults.ssrMigrationPath && this.ssrResults.ssrMigrationPath.length > 0) {\n        md += `### Migration Path (${this.ssrResults.ssrMigrationPath.length} steps)\\n\\n`;\n        (this.ssrResults.ssrMigrationPath || []).forEach((step) => {\n          md += `**Step ${step.step}: ${step.action}**\\n`;\n          if (step.description) {\n            md += `${step.description}\\n`;\n          }\n          if (step.effort) {\n            md += `- Effort: ${step.effort}\\n`;\n          }\n          md += '\\n';\n        });\n      }\n    }\n\n    md += '\\n';\n\n    // Suggestions\n    if (this.options.includeSuggestions) {\n      const suggestions = this.generateSuggestions();\n      if (suggestions.length > 0) {\n        md += '## Suggestions\\n\\n';\n        suggestions.forEach((sug) => {\n          md += `- **${sug.message}**: ${sug.suggestion}\\n`;\n        });\n        md += '\\n';\n      }\n    }\n\n    return md;\n  }\n\n  /**\n   * Generate Console report\n   */\n  toConsole() {\n    const lines = [];\n\n    lines.push('\\n' + '='.repeat(80));\n    lines.push('FlutterJS CODE ANALYSIS REPORT (Phase 1 + 2 + 3)');\n    lines.push('='.repeat(80) + '\\n');\n\n    // Summary\n    lines.push('SUMMARY');\n    lines.push('-'.repeat(80));\n    lines.push(`  Widgets: ${this.metadata.totalWidgets} (${this.metadata.statelessWidgets} stateless, ${this.metadata.statefulWidgets} stateful)`);\n    lines.push(`  State Classes: ${this.metadata.stateClasses}`);\n    lines.push(`  State Fields: ${this.metadata.totalStateFields}`);\n    lines.push(`  Health Score: ${this.metadata.healthScore}/100`);\n    lines.push(`  Complexity: ${this.metadata.complexityScore}/100`);\n\n    if (this.options.includeContext) {\n      lines.push(`  InheritedWidgets: ${this.metadata.inheritedWidgets}`);\n      lines.push(`  ChangeNotifiers: ${this.metadata.changeNotifiers}`);\n      lines.push(`  Providers: ${this.metadata.providers}`);\n    }\n\n    if (this.options.includeSsr) {\n      lines.push(`  SSR Compatibility: ${this.metadata.ssrCompatibility}`);\n      lines.push(`  SSR Score: ${this.metadata.ssrCompatibilityScore}/100`);\n      lines.push(`  Migration Steps: ${this.ssrResults?.ssrMigrationPath?.length || 0}`);\n    }\n\n    lines.push('');\n\n    // Context Section\n    if (this.options.includeContext && this.contextResults && this.metadata.inheritedWidgets > 0) {\n      lines.push('CONTEXT ANALYSIS (Phase 3)');\n      lines.push('-'.repeat(80));\n\n      if (this.metadata.inheritedWidgets > 0) {\n        lines.push('  InheritedWidgets:');\n        (this.contextResults.inheritedWidgets || []).forEach((widget) => {\n          lines.push(`    - ${widget.name}`);\n          if (widget.usedIn && widget.usedIn.length > 0) {\n            lines.push(`      Used in: ${widget.usedIn.join(', ')}`);\n          }\n        });\n      }\n\n      if (this.metadata.changeNotifiers > 0) {\n        lines.push('  ChangeNotifiers:');\n        (this.contextResults.changeNotifiers || []).forEach((notifier) => {\n          lines.push(`    - ${notifier.name}`);\n          if (notifier.consumers && notifier.consumers.length > 0) {\n            lines.push(`      Consumers: ${notifier.consumers.join(', ')}`);\n          }\n        });\n      }\n\n      lines.push('');\n    }\n\n    // SSR Section\n    if (this.options.includeSsr && this.ssrResults) {\n      lines.push('SSR COMPATIBILITY ANALYSIS (Phase 3)');\n      lines.push('-'.repeat(80));\n      lines.push(`  Overall: ${this.metadata.ssrCompatibility} (${this.metadata.ssrCompatibilityScore}/100)`);\n      lines.push(`  Safe Patterns: ${this.metadata.ssrSafePatterns}`);\n      lines.push(`  Unsafe Patterns: ${this.metadata.ssrUnsafePatterns}`);\n\n      if (this.ssrResults.hydrationCount > 0) {\n        lines.push(`  Hydration Required: Yes (${this.ssrResults.hydrationCount} dependencies)`);\n      }\n\n      if (this.ssrResults.ssrMigrationPath && this.ssrResults.ssrMigrationPath.length > 0) {\n        lines.push(`  Migration Steps: ${this.ssrResults.ssrMigrationPath.length}`);\n        lines.push(`  Estimated Effort: ${this.ssrResults.estimatedEffort}`);\n      }\n\n      lines.push('');\n    }\n\n    // Validation\n    if (this.stateResults && this.stateResults.validationResults && this.stateResults.validationResults.length > 0) {\n      lines.push('VALIDATION ISSUES');\n      lines.push('-'.repeat(80));\n      (this.stateResults.validationResults || []).forEach((result) => {\n        const icon = result.severity === 'error' ? '\u274C' : result.severity === 'warning' ? '\u26A0\uFE0F ' : '\u2139\uFE0F ';\n        lines.push(`  ${icon} [${result.severity.toUpperCase()}] ${result.message}`);\n        if (result.suggestion) {\n          lines.push(`     \u2192 ${result.suggestion}`);\n        }\n      });\n      lines.push('');\n    }\n\n    lines.push('='.repeat(80) + '\\n');\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Save report to file\n   */\n  saveToFile(filePath, fs) {\n    const content = this.generate();\n    fs.writeFileSync(filePath, content, 'utf-8');\n    return filePath;\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport { ReportGenerator };", "/**\n * Import Resolver Configuration\n * \n * Define your custom package mappings and resolver settings here\n */\n\nexport const resolverConfig = {\n  // Framework type\n  frameworkType: 'flutter-js',\n\n  // Project root (usually process.cwd())\n  // projectRoot: '/path/to/project',\n\n  // Fail on unresolved imports?\n  ignoreUnresolved: false,\n\n  // Enable package cache checking (future feature)\n  cacheEnabled: false,\n\n  // Custom package mappings (@package:xyz -> actual path)\n  customPackageMappings: {\n    '@package:ui': './packages/ui',\n    '@package:models': './packages/models',\n    '@package:utils': './packages/utils',\n    '@package:services': './packages/services',\n    '@package:theme': './packages/theme',\n    '@package:constants': './packages/constants',\n  },\n\n  // Local search paths (where to look for local imports)\n  // Order matters - first match wins\n  localSearchPaths: [\n    'src',\n    'lib',\n    'packages',\n    'modules',\n    'components',\n    'screens',\n    'widgets',\n    '.',\n  ],\n\n  // Package aliases (alternatives to @package:)\n  packageAliases: {\n    'flutter': '@package:flutter',\n    'material': '@package:material',\n    'cupertino': '@package:cupertino',\n  },\n\n  // Strict mode options\n  strict: {\n    // Fail if import doesn't match expected pattern\n    enforceNamingConventions: false,\n\n    // Require explicit versions\n    requireVersions: false,\n\n    // Warn about circular imports\n    detectCircularImports: true,\n  },\n};\n\n/**\n * Create and configure resolver\n */\nexport function createResolver(options = {}){\n  const { ImportResolver } = import('./flutter_import_resolver.js');\n\n  const resolver = new ImportResolver({\n    projectRoot: process.cwd(),\n    ...resolverConfig,\n    ...options,\n  });\n\n  // Add all custom mappings\n  if (resolverConfig.customPackageMappings) {\n    resolver.addPackageMappings(resolverConfig.customPackageMappings);\n  }\n\n  // Set local search paths\n  if (resolverConfig.localSearchPaths) {\n    resolver.setLocalSearchPaths(resolverConfig.localSearchPaths);\n  }\n\n  return resolver;\n}\n\n/**\n * Preset configurations for different project types\n */\nexport const presets = {\n  // Simple web app\n  web: {\n    localSearchPaths: ['src', 'lib', 'components', '.'],\n    customPackageMappings: {},\n  },\n\n  // Monorepo structure\n  monorepo: {\n    localSearchPaths: [\n      'packages/ui',\n      'packages/core',\n      'packages/models',\n      'packages/utils',\n      'src',\n      '.',\n    ],\n    customPackageMappings: {\n      '@package:ui': './packages/ui',\n      '@package:core': './packages/core',\n      '@package:models': './packages/models',\n      '@package:utils': './packages/utils',\n    },\n  },\n\n  // Flutter-style structure\n  flutter: {\n    localSearchPaths: [\n      'lib',\n      'lib/screens',\n      'lib/widgets',\n      'lib/models',\n      'lib/services',\n      'lib/utils',\n      '.',\n    ],\n    customPackageMappings: {\n      '@package:flutter': 'flutter-js-framework/core',\n      '@package:material': 'flutter-js-framework/material',\n      '@package:ui': './lib/widgets',\n      '@package:models': './lib/models',\n      '@package:services': './lib/services',\n      '@package:utils': './lib/utils',\n    },\n  },\n};\n"],
  "mappings": "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",
  "names": ["fs", "path", "ImportResolver", "init_flutter_import_resolver", "__esmMin", "options", "importPath", "importedItems", "cacheKey", "result", "stepResult", "searchedLocations", "fullPath", "searchPath", "indexPath", "filePath", "fallbacks", "message", "step", "loc", "imports", "imp", "packageName", "actualPath", "mappings", "pkg", "paths", "total", "resolved", "unresolved", "r", "summary", "err", "fs", "Token", "type", "value", "line", "column", "types", "TokenType", "Lexer", "source", "options", "ch", "startColumn", "whitespaceStr", "startLine", "content", "quoteChar", "escaped", "tokenType", "twoChar", "threeChar", "offset", "pos", "token", "index", "fs", "path", "Logger", "options", "component", "level", "message", "data", "timestamp", "indent", "levelStr", "componentStr", "entry", "filePath", "error", "backupPath", "name", "duration", "methodName", "params", "result", "label", "count", "componentName", "msg", "err", "method", "allLogsPath", "files", "file", "report", "log", "f", "globalLogger", "initLogger", "getLogger", "ASTNode", "type", "location", "Program", "body", "ImportDeclaration", "specifiers", "source", "ImportSpecifier", "imported", "local", "ClassDeclaration", "id", "superClass", "ClassBody", "fields", "methods", "FieldDeclaration", "key", "initialValue", "MethodDeclaration", "params", "Parameter", "name", "optional", "defaultValue", "FunctionDeclaration", "isAsync", "BlockStatement", "ReturnStatement", "argument", "ExpressionStatement", "expression", "Identifier", "Literal", "value", "raw", "CallExpression", "callee", "args", "NewExpression", "ObjectLiteral", "properties", "Property", "ArrowFunctionExpression", "MemberExpression", "object", "property", "computed", "Parser", "tokens", "options", "stmt", "error", "expr", "token", "TokenType", "startLocation", "localName", "logger", "getLogger", "nameToken", "superName", "itemCount", "currentPos", "fieldName", "e", "methodName", "paramLocation", "paramName", "braceDepth", "statements", "result", "consequent", "alternate", "right", "operator", "savedPos", "nextPos", "elements", "ident", "shorthand", "prop", "message", "n", "pos", "errorObj", "start", "end", "t", "before", "after", "frame", "idx", "arrow", "WidgetAnalyzer", "ast", "options", "getLogger", "w", "error", "node", "classNode", "_a", "_b", "_c", "_d", "name", "superClass", "location", "widget", "field", "fieldName", "initialValue", "constructorMethod", "m", "method", "methodName", "methodData", "fieldRefs", "p", "body", "fields", "traverse", "key", "val", "funcNode", "func", "source", "items", "spec", "mainFunc", "mainAstNode", "n", "statements", "_e", "_f", "stmt", "call", "expr", "rootWidget", "widgetArray", "widgets", "statelessCount", "statefulCount", "stateCount", "StateAnalyzer", "ast", "widgets", "options", "error", "widget", "m", "widgetNode", "n", "createStateNode", "stateClassName", "stateClassNode", "stateMetadata", "StateClassMetadata", "methodBody", "stmt", "className", "expr", "astNode", "metadata", "field", "fieldName", "initialValue", "type", "stateField", "StateField", "name", "method", "setStateCalls", "calls", "methodName", "s", "updatedFields", "call", "StateUpdateCall", "arg", "prop", "obj", "setStateCall", "updated", "callback", "body", "mutated", "fields", "target", "lifecycleNames", "lifecycle", "LifecycleMethod", "stmts", "buildMethod", "handlers", "eventName", "handler", "keyExpr", "value", "DependencyGraph", "key", "methods", "methodsUsing", "event", "stateChanged", "changed", "update", "issues", "parts", "mutationsOutsideSetState", "stateClass", "locations", "inSetState", "methodMap", "sc", "f", "data", "location", "linkedStatefulWidget", "params", "callsSuper", "hasSideEffects", "updates", "InheritedWidgetMetadata", "name", "location", "superClass", "type", "required", "signature", "usesInheritedWidgetLookup", "widgetName", "issues", "ChangeNotifierAnalysis", "initialValue", "returnType", "callsNotify", "mutations", "accessPattern", "m", "method", "ProviderAnalysis", "providerType", "valueType", "func", "pattern", "ContextUsagePattern", "pattern", "type", "location", "returns", "ssrSafe", "reason", "HydrationRequirement", "dependency", "order", "providerType", "stateProperty", "LazyLoadOpportunity", "target", "estimatedSize", "recommendation", "sizeKb", "ContextAnalyzer", "ast", "widgets", "options", "getLogger", "error", "node", "_a", "_b", "_c", "_d", "className", "superClass", "metadata", "InheritedWidgetMetadata", "field", "fieldName", "method", "methodName", "code", "analysis", "ChangeNotifierAnalysis", "callsNotify", "mutations", "body", "pattern", "match", "buildMethod", "m", "classNode", "stmt", "s", "expr", "calleeName", "genericType", "ProviderAnalysis", "arg", "prop", "providerType", "usagePoints", "usages", "foundUsages", "stmtUsages", "retUsages", "blockUsages", "exprStr", "ContextUsagePattern", "argUsages", "propUsages", "memberUsages", "widget", "provider", "key", "widgetName", "consumers", "usage", "val", "SSRAnalyzer", "contextAnalysisResults", "stateAnalysisResults", "options", "getLogger", "error", "patterns", "usage", "pattern", "p", "basePatterns", "_a", "hydrationNeeds", "notifier", "requirement", "HydrationRequirement", "consumer", "provider", "handler", "h", "a", "b", "opportunities", "widget", "opp", "LazyLoadOpportunity", "steps", "watchUnsafe", "mutationUnsafe", "browserApiUnsafe", "eventHandlersInBuild", "score", "unsafeCount", "criticalIssues", "i", "browserApiIssues", "safeCount", "totalEffort", "sum", "step", "ReportGenerator", "widgetResults", "stateResults", "contextResults", "ssrResults", "options", "getLogger", "output", "error", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "_i", "widgets", "functions", "imports", "stateClasses", "stateFields", "setStateCalls", "lifecycleMethods", "eventHandlers", "inheritedWidgets", "changeNotifiers", "providers", "contextAccessPoints", "ssrScore", "ssrSafePatterns", "ssrUnsafePatterns", "hydrationRequirements", "w", "imp", "node", "depth", "child", "results", "severity", "r", "score", "validationResults", "widget", "a", "notifier", "g", "m", "provider", "usage", "p", "opp", "step", "i", "sc", "metadata", "field", "isUsed", "lc", "isValid", "func", "graph", "suggestions", "md", "pattern", "req", "sug", "lines", "result", "icon", "filePath", "fs", "content", "init_flutter_import_resolver", "resolverConfig", "Analyzer", "options", "initLogger", "loggerInstance", "ImportResolver", "resolverConfig", "_a", "_b", "logger", "summary", "error", "start", "imports", "resolution", "imp", "fs", "lexer", "Lexer", "err", "parser", "Parser", "analyzer", "WidgetAnalyzer", "StateAnalyzer", "ContextAnalyzer", "SSRAnalyzer", "generator", "ReportGenerator", "_c", "_d", "_e", "_f", "_g", "_h", "_i", "_j", "_k", "_l", "_m", "_n", "_o", "_p", "_q", "_r", "_s", "_t", "_u", "_v", "_w", "_x", "_y", "_z", "_A", "_B", "_C", "_D", "_E", "_F", "_G", "_H", "_I", "_J", "_K", "_L", "_M", "_N", "_O", "_P", "_Q", "_R", "_S", "allWidgets", "statelessWidgets", "w", "statefulWidgets", "stateWidgets", "statelessNames", "statefulNames", "stateClasses", "stateWidget", "widgetName", "stateFields", "f", "statefulWidget", "expectedStateName", "analyzeCode", "sourceCode", "analyzeFile", "sourceFile", "analyzeAndSave", "outputFile", "runCLI", "args", "printUsage", "outputFormat", "verbose", "includeImports", "includeContext", "includeSsr", "debugLevel", "i", "arg", "results", "runCLI"]
}
