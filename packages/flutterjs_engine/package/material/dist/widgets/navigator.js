import{StatefulWidget as h,State as a}from"../core/widget_element.js";import"@flutterjs/vdom/vnode";class n{constructor({settings:t={},builder:e=null}={}){this.settings=t,this.builder=e}}class l extends h{constructor({key:t=null,initialRoute:e="/",onGenerateRoute:i=null,onUnknownRoute:o=null,routes:u={}}={}){super(t),this.initialRoute=e,this.onGenerateRoute=i,this.onUnknownRoute=o,this.routes=u}createState(){return new r}static of(t){if(t&&typeof t.findAncestorStateOfType=="function"){const i=t.findAncestorStateOfType(r);if(i)return i}let e=t;for(;e;){if(e instanceof r)return e;if(e.state instanceof r)return e.state;e=e.parent}return null}}class r extends a{constructor(){super(),this._history=[]}initState(){super.initState(),this.pushNamed(this.widget.initialRoute)}push(t){return this._history.push(t),this.setState(()=>{}),Promise.resolve()}pushNamed(t,{arguments:e=null}={}){const i=this._routeNamed(t,e);i?this.push(i):console.warn(`Navigator: No route defined for "${t}"`)}pop(t){return this.canPop()?(this._history.pop(),this.setState(()=>{}),!0):!1}canPop(){return this._history.length>1}_routeNamed(t,e){const i={name:t,arguments:e};return this.widget.routes&&this.widget.routes[t]?new n({settings:i,builder:this.widget.routes[t]}):this.widget.onGenerateRoute?this.widget.onGenerateRoute(i):this.widget.onUnknownRoute?this.widget.onUnknownRoute(i):null}build(t){if(this._history.length===0)return null;const e=this._history[this._history.length-1];return e.builder?e.builder(t):null}}export{l as Navigator,r as NavigatorState,n as Route};
//# sourceMappingURL=navigator.js.map
