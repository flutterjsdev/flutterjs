import{StatefulWidget as h,State as a}from"../core/widget_element.js";import"@flutterjs/vdom/vnode";class n{constructor({settings:e={},builder:t=null}={}){this.settings=e,this.builder=t}}class l extends h{constructor({key:e=null,initialRoute:t="/",onGenerateRoute:s=null,onUnknownRoute:o=null,routes:u={}}={}){super(e),this.initialRoute=t,this.onGenerateRoute=s,this.onUnknownRoute=o,this.routes=u}createState(){return new i}static of(e){if(e&&typeof e.findAncestorStateOfType=="function"){const s=e.findAncestorStateOfType(i);if(s)return s}let t=e;for(;t;){if(t instanceof i)return t;if(t.state instanceof i)return t.state;t=t.parent}return null}}class i extends a{constructor(){super(),this._history=[]}initState(){super.initState(),this.pushNamed(this.widget.initialRoute)}push(e){return this._history.push(e),this.setState(()=>{}),Promise.resolve()}pushNamed(e,{arguments:t=null}={}){const s=this._routeNamed(e,t);s?this.push(s):console.warn(`Navigator: No route defined for "${e}"`)}pop(e){return this.canPop()?(this._history.pop(),this.setState(()=>{}),!0):!1}canPop(){return this._history.length>1}_routeNamed(e,t){const s={name:e,arguments:t};return this.widget.routes&&this.widget.routes[e]?new n({settings:s,builder:this.widget.routes[e]}):this.widget.onGenerateRoute?this.widget.onGenerateRoute(s):this.widget.onUnknownRoute?this.widget.onUnknownRoute(s):null}build(e){if(this._history.length===0)return null;const t=this._history[this._history.length-1];if(t.builder){const s=t.builder(e);return s&&t.settings&&t.settings.name&&(s.key||(s.key=`route_${t.settings.name}_${this._history.length}_${Date.now()}`)),s}return null}}export{l as Navigator,i as NavigatorState,n as Route};
//# sourceMappingURL=navigator.js.map
