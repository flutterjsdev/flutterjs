{
  "version": 3,
  "sources": ["../../../src/widgets/compoment/list_body.js"],
  "sourcesContent": ["import {Element} from \"@flutterjs/runtime\"\r\nimport { Widget, } from '../../core/widget_element.js';\r\nimport { VNode } from '@flutterjs/vdom/vnode';\r\n\r\n// ============================================================================\r\n// AXIS ENUM\r\n// ============================================================================\r\n\r\nconst Axis = {\r\n  horizontal: 'horizontal',\r\n  vertical: 'vertical'\r\n};\r\n\r\n// ============================================================================\r\n// AXIS DIRECTION ENUM\r\n// ============================================================================\r\n\r\nconst AxisDirection = {\r\n  up: 'up',\r\n  right: 'right',\r\n  down: 'down',\r\n  left: 'left'\r\n};\r\n\r\n// ============================================================================\r\n// HELPER FUNCTION - Get axis direction from axis, reverse, and directionality\r\n// ============================================================================\r\n\r\nfunction getAxisDirectionFromAxisReverseAndDirectionality(\r\n  context,\r\n  axis,\r\n  reverse\r\n) {\r\n  // Get text direction from context (default LTR)\r\n  const isRTL = context?.isRTL || false;\r\n\r\n  if (axis === Axis.horizontal) {\r\n    if (reverse) {\r\n      return isRTL ? AxisDirection.right : AxisDirection.left;\r\n    } else {\r\n      return isRTL ? AxisDirection.left : AxisDirection.right;\r\n    }\r\n  } else {\r\n    // Axis.vertical\r\n    return reverse ? AxisDirection.up : AxisDirection.down;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// RENDER LIST BODY\r\n// Handles the actual layout and rendering logic\r\n// ============================================================================\r\n\r\nclass RenderListBody {\r\n  constructor({ axisDirection = AxisDirection.down } = {}) {\r\n    this.axisDirection = axisDirection;\r\n    this._children = [];\r\n    this._containerElement = null;\r\n    this._resizeObserver = null;\r\n  }\r\n\r\n  /**\r\n   * Add child render object\r\n   */\r\n  addChild(child) {\r\n    this._children.push(child);\r\n  }\r\n\r\n  /**\r\n   * Remove child render object\r\n   */\r\n  removeChild(child) {\r\n    const index = this._children.indexOf(child);\r\n    if (index > -1) {\r\n      this._children.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get main axis (horizontal or vertical)\r\n   */\r\n  get mainAxis() {\r\n    return [AxisDirection.left, AxisDirection.right].includes(this.axisDirection)\r\n      ? Axis.horizontal\r\n      : Axis.vertical;\r\n  }\r\n\r\n  /**\r\n   * Check if direction is reversed\r\n   */\r\n  get isReverse() {\r\n    return [AxisDirection.up, AxisDirection.left].includes(this.axisDirection);\r\n  }\r\n\r\n  /**\r\n   * Debug info\r\n   */\r\n  debugInfo() {\r\n    return {\r\n      type: 'RenderListBody',\r\n      axisDirection: this.axisDirection,\r\n      mainAxis: this.mainAxis,\r\n      isReverse: this.isReverse,\r\n      childCount: this._children.length\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// LIST BODY ELEMENT\r\n// Element for managing ListBody lifecycle\r\n// ============================================================================\r\n\r\nclass ListBodyElement extends Element {\r\n  constructor(widget) {\r\n    super(widget);\r\n    this._renderObject = null;\r\n  }\r\n\r\n  /**\r\n   * Mount element\r\n   */\r\n  mount(parent = null) {\r\n    super.mount(parent);\r\n\r\n    // Create render object\r\n    this._renderObject = this.widget.createRenderObject(this.context);\r\n  }\r\n\r\n  /**\r\n   * Update render object on widget change\r\n   */\r\n  updateWidget(newWidget) {\r\n    const oldWidget = this.widget;\r\n    super.updateWidget(newWidget);\r\n\r\n    if (oldWidget.mainAxis !== newWidget.mainAxis ||\r\n        oldWidget.reverse !== newWidget.reverse) {\r\n      this.widget.updateRenderObject(this.context, this._renderObject);\r\n      this.markNeedsBuild();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Perform rebuild\r\n   */\r\n  performRebuild() {\r\n    return this.widget.build(this.context);\r\n  }\r\n\r\n  /**\r\n   * Visit children\r\n   */\r\n  visitChildren(visitor) {\r\n    if (this._children) {\r\n      for (const child of this._children) {\r\n        visitor(child);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// LIST BODY WIDGET\r\n// Multi-child widget that arranges children in a list\r\n// ============================================================================\r\n\r\nclass ListBody extends Widget {\r\n  constructor({\r\n    key = null,\r\n    mainAxis = Axis.vertical,\r\n    reverse = false,\r\n    children = []\r\n  } = {}) {\r\n    super(key);\r\n\r\n    if (!Object.values(Axis).includes(mainAxis)) {\r\n      throw new Error(`Invalid mainAxis: ${mainAxis}`);\r\n    }\r\n\r\n    this.mainAxis = mainAxis;\r\n    this.reverse = reverse;\r\n    this.children = children || [];\r\n    this._renderObject = null;\r\n    this._containerElement = null;\r\n    this._childElements = [];\r\n    this._resizeObserver = null;\r\n  }\r\n\r\n  /**\r\n   * Get axis direction based on axis, reverse, and directionality\r\n   * @private\r\n   */\r\n  _getDirection(context) {\r\n    return getAxisDirectionFromAxisReverseAndDirectionality(\r\n      context,\r\n      this.mainAxis,\r\n      this.reverse\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Create render object\r\n   */\r\n  createRenderObject(context) {\r\n    return new RenderListBody({\r\n      axisDirection: this._getDirection(context)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update render object\r\n   */\r\n  updateRenderObject(context, renderObject) {\r\n    renderObject.axisDirection = this._getDirection(context);\r\n  }\r\n\r\n  /**\r\n   * Build the widget tree\r\n   */\r\n  build(context) {\r\n    if (!this._renderObject) {\r\n      this._renderObject = this.createRenderObject(context);\r\n    } else {\r\n      this.updateRenderObject(context, this._renderObject);\r\n    }\r\n\r\n    const elementId = context.element.getElementId();\r\n    const widgetPath = context.element.getWidgetPath();\r\n\r\n    // Determine layout direction\r\n    const isHorizontal = this.mainAxis === Axis.horizontal;\r\n    const isReverse = this.reverse;\r\n\r\n    // Build CSS styles\r\n    const style = {\r\n      display: 'flex',\r\n      flexDirection: isHorizontal\r\n        ? isReverse ? 'row-reverse' : 'row'\r\n        : isReverse ? 'column-reverse' : 'column',\r\n      width: isHorizontal ? 'auto' : '100%',\r\n      height: isHorizontal ? 'auto' : 'auto',\r\n      alignItems: 'stretch',\r\n      justifyContent: 'flex-start'\r\n    };\r\n\r\n    // Build child VNodes\r\n    const childVNodes = this.children.map((childWidget) => {\r\n      const childElement = childWidget.createElement(context.element, context.element.runtime);\r\n      childElement.mount(context.element);\r\n      const childVNode = childElement.performRebuild();\r\n\r\n      return new VNode({\r\n        tag: 'div',\r\n        props: {\r\n          style: {\r\n            flexShrink: 0,\r\n            width: isHorizontal ? 'auto' : '100%'\r\n          }\r\n        },\r\n        children: [childVNode]\r\n      });\r\n    });\r\n\r\n    return new VNode({\r\n      tag: 'div',\r\n      props: {\r\n        style,\r\n        'data-element-id': elementId,\r\n        'data-widget-path': widgetPath,\r\n        'data-widget': 'ListBody',\r\n        'data-main-axis': this.mainAxis,\r\n        'data-reverse': this.reverse,\r\n        'data-axis-direction': this._getDirection(context),\r\n        ref: (el) => this._onContainerMount(el, context)\r\n      },\r\n      children: childVNodes,\r\n      key: this.key\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Mount container element\r\n   * @private\r\n   */\r\n  _onContainerMount(el, context) {\r\n    if (!el) return;\r\n\r\n    this._containerElement = el;\r\n\r\n    // Set up resize observer for responsive layout\r\n    if (window.ResizeObserver) {\r\n      this._resizeObserver = new ResizeObserver(() => {\r\n        this._onResize();\r\n      });\r\n      this._resizeObserver.observe(el);\r\n    }\r\n\r\n    // Listen to window resize\r\n    const resizeHandler = () => this._onResize();\r\n    window.addEventListener('resize', resizeHandler);\r\n\r\n    el._cleanupResize = () => {\r\n      window.removeEventListener('resize', resizeHandler);\r\n      if (this._resizeObserver) {\r\n        this._resizeObserver.disconnect();\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle resize event\r\n   * @private\r\n   */\r\n  _onResize() {\r\n    if (!this._containerElement) return;\r\n\r\n    try {\r\n      // Perform any necessary layout adjustments\r\n      const rect = this._containerElement.getBoundingClientRect();\r\n\r\n      if (process.env.NODE_ENV === 'development') {\r\n        // Debug: log resize info\r\n      }\r\n    } catch (error) {\r\n      console.error('Error during ListBody resize:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Debug properties\r\n   */\r\n  debugFillProperties(properties) {\r\n    super.debugFillProperties(properties);\r\n    properties.push({ name: 'mainAxis', value: this.mainAxis });\r\n    properties.push({ name: 'reverse', value: this.reverse });\r\n    properties.push({ name: 'childCount', value: this.children.length });\r\n  }\r\n\r\n  /**\r\n   * Create element\r\n   */\r\n  createElement(parent, runtime) {\r\n    return new ListBodyElement(this,parent, runtime);\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport {\r\n  ListBody,\r\n  RenderListBody,\r\n  ListBodyElement,\r\n  Axis,\r\n  AxisDirection,\r\n  getAxisDirectionFromAxisReverseAndDirectionality\r\n};"],
  "mappings": "AAAA,OAAQ,WAAAA,MAAc,qBACtB,OAAS,UAAAC,MAAe,+BACxB,OAAS,SAAAC,MAAa,wBAMtB,MAAMC,EAAO,CACX,WAAY,aACZ,SAAU,UACZ,EAMMC,EAAgB,CACpB,GAAI,KACJ,MAAO,QACP,KAAM,OACN,KAAM,MACR,EAMA,SAASC,EACPC,EACAC,EACAC,EACA,CAEA,MAAMC,EAAQH,GAAS,OAAS,GAEhC,OAAIC,IAASJ,EAAK,WACZK,EACKC,EAAQL,EAAc,MAAQA,EAAc,KAE5CK,EAAQL,EAAc,KAAOA,EAAc,MAI7CI,EAAUJ,EAAc,GAAKA,EAAc,IAEtD,CAOA,MAAMM,CAAe,CACnB,YAAY,CAAE,cAAAC,EAAgBP,EAAc,IAAK,EAAI,CAAC,EAAG,CACvD,KAAK,cAAgBO,EACrB,KAAK,UAAY,CAAC,EAClB,KAAK,kBAAoB,KACzB,KAAK,gBAAkB,IACzB,CAKA,SAASC,EAAO,CACd,KAAK,UAAU,KAAKA,CAAK,CAC3B,CAKA,YAAYA,EAAO,CACjB,MAAMC,EAAQ,KAAK,UAAU,QAAQD,CAAK,EACtCC,EAAQ,IACV,KAAK,UAAU,OAAOA,EAAO,CAAC,CAElC,CAKA,IAAI,UAAW,CACb,MAAO,CAACT,EAAc,KAAMA,EAAc,KAAK,EAAE,SAAS,KAAK,aAAa,EACxED,EAAK,WACLA,EAAK,QACX,CAKA,IAAI,WAAY,CACd,MAAO,CAACC,EAAc,GAAIA,EAAc,IAAI,EAAE,SAAS,KAAK,aAAa,CAC3E,CAKA,WAAY,CACV,MAAO,CACL,KAAM,iBACN,cAAe,KAAK,cACpB,SAAU,KAAK,SACf,UAAW,KAAK,UAChB,WAAY,KAAK,UAAU,MAC7B,CACF,CACF,CAOA,MAAMU,UAAwBd,CAAQ,CACpC,YAAYe,EAAQ,CAClB,MAAMA,CAAM,EACZ,KAAK,cAAgB,IACvB,CAKA,MAAMC,EAAS,KAAM,CACnB,MAAM,MAAMA,CAAM,EAGlB,KAAK,cAAgB,KAAK,OAAO,mBAAmB,KAAK,OAAO,CAClE,CAKA,aAAaC,EAAW,CACtB,MAAMC,EAAY,KAAK,OACvB,MAAM,aAAaD,CAAS,GAExBC,EAAU,WAAaD,EAAU,UACjCC,EAAU,UAAYD,EAAU,WAClC,KAAK,OAAO,mBAAmB,KAAK,QAAS,KAAK,aAAa,EAC/D,KAAK,eAAe,EAExB,CAKA,gBAAiB,CACf,OAAO,KAAK,OAAO,MAAM,KAAK,OAAO,CACvC,CAKA,cAAcE,EAAS,CACrB,GAAI,KAAK,UACP,UAAWP,KAAS,KAAK,UACvBO,EAAQP,CAAK,CAGnB,CACF,CAOA,MAAMQ,UAAiBnB,CAAO,CAC5B,YAAY,CACV,IAAAoB,EAAM,KACN,SAAAC,EAAWnB,EAAK,SAChB,QAAAK,EAAU,GACV,SAAAe,EAAW,CAAC,CACd,EAAI,CAAC,EAAG,CAGN,GAFA,MAAMF,CAAG,EAEL,CAAC,OAAO,OAAOlB,CAAI,EAAE,SAASmB,CAAQ,EACxC,MAAM,IAAI,MAAM,qBAAqBA,CAAQ,EAAE,EAGjD,KAAK,SAAWA,EAChB,KAAK,QAAUd,EACf,KAAK,SAAWe,GAAY,CAAC,EAC7B,KAAK,cAAgB,KACrB,KAAK,kBAAoB,KACzB,KAAK,eAAiB,CAAC,EACvB,KAAK,gBAAkB,IACzB,CAMA,cAAcjB,EAAS,CACrB,OAAOD,EACLC,EACA,KAAK,SACL,KAAK,OACP,CACF,CAKA,mBAAmBA,EAAS,CAC1B,OAAO,IAAII,EAAe,CACxB,cAAe,KAAK,cAAcJ,CAAO,CAC3C,CAAC,CACH,CAKA,mBAAmBA,EAASkB,EAAc,CACxCA,EAAa,cAAgB,KAAK,cAAclB,CAAO,CACzD,CAKA,MAAMA,EAAS,CACR,KAAK,cAGR,KAAK,mBAAmBA,EAAS,KAAK,aAAa,EAFnD,KAAK,cAAgB,KAAK,mBAAmBA,CAAO,EAKtD,MAAMmB,EAAYnB,EAAQ,QAAQ,aAAa,EACzCoB,EAAapB,EAAQ,QAAQ,cAAc,EAG3CqB,EAAe,KAAK,WAAaxB,EAAK,WACtCyB,EAAY,KAAK,QAGjBC,EAAQ,CACZ,QAAS,OACT,cAAeF,EACXC,EAAY,cAAgB,MAC5BA,EAAY,iBAAmB,SACnC,MAAOD,EAAe,OAAS,OAC/B,OAAuB,OACvB,WAAY,UACZ,eAAgB,YAClB,EAGMG,EAAc,KAAK,SAAS,IAAKC,GAAgB,CACrD,MAAMC,EAAeD,EAAY,cAAczB,EAAQ,QAASA,EAAQ,QAAQ,OAAO,EACvF0B,EAAa,MAAM1B,EAAQ,OAAO,EAClC,MAAM2B,EAAaD,EAAa,eAAe,EAE/C,OAAO,IAAI9B,EAAM,CACf,IAAK,MACL,MAAO,CACL,MAAO,CACL,WAAY,EACZ,MAAOyB,EAAe,OAAS,MACjC,CACF,EACA,SAAU,CAACM,CAAU,CACvB,CAAC,CACH,CAAC,EAED,OAAO,IAAI/B,EAAM,CACf,IAAK,MACL,MAAO,CACL,MAAA2B,EACA,kBAAmBJ,EACnB,mBAAoBC,EACpB,cAAe,WACf,iBAAkB,KAAK,SACvB,eAAgB,KAAK,QACrB,sBAAuB,KAAK,cAAcpB,CAAO,EACjD,IAAM4B,GAAO,KAAK,kBAAkBA,EAAI5B,CAAO,CACjD,EACA,SAAUwB,EACV,IAAK,KAAK,GACZ,CAAC,CACH,CAMA,kBAAkBI,EAAI5B,EAAS,CAC7B,GAAI,CAAC4B,EAAI,OAET,KAAK,kBAAoBA,EAGrB,OAAO,iBACT,KAAK,gBAAkB,IAAI,eAAe,IAAM,CAC9C,KAAK,UAAU,CACjB,CAAC,EACD,KAAK,gBAAgB,QAAQA,CAAE,GAIjC,MAAMC,EAAgB,IAAM,KAAK,UAAU,EAC3C,OAAO,iBAAiB,SAAUA,CAAa,EAE/CD,EAAG,eAAiB,IAAM,CACxB,OAAO,oBAAoB,SAAUC,CAAa,EAC9C,KAAK,iBACP,KAAK,gBAAgB,WAAW,CAEpC,CACF,CAMA,WAAY,CACV,GAAK,KAAK,kBAEV,GAAI,CAEF,MAAMC,EAAO,KAAK,kBAAkB,sBAAsB,CAK5D,OAASC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CACF,CAKA,oBAAoBC,EAAY,CAC9B,MAAM,oBAAoBA,CAAU,EACpCA,EAAW,KAAK,CAAE,KAAM,WAAY,MAAO,KAAK,QAAS,CAAC,EAC1DA,EAAW,KAAK,CAAE,KAAM,UAAW,MAAO,KAAK,OAAQ,CAAC,EACxDA,EAAW,KAAK,CAAE,KAAM,aAAc,MAAO,KAAK,SAAS,MAAO,CAAC,CACrE,CAKA,cAActB,EAAQuB,EAAS,CAC7B,OAAO,IAAIzB,EAAgB,KAAKE,EAAQuB,CAAO,CACjD,CACF",
  "names": ["Element", "Widget", "VNode", "Axis", "AxisDirection", "getAxisDirectionFromAxisReverseAndDirectionality", "context", "axis", "reverse", "isRTL", "RenderListBody", "axisDirection", "child", "index", "ListBodyElement", "widget", "parent", "newWidget", "oldWidget", "visitor", "ListBody", "key", "mainAxis", "children", "renderObject", "elementId", "widgetPath", "isHorizontal", "isReverse", "style", "childVNodes", "childWidget", "childElement", "childVNode", "el", "resizeHandler", "rect", "error", "properties", "runtime"]
}
