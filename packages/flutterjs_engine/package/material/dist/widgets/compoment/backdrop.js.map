{
  "version": 3,
  "sources": ["../../../src/widgets/compoment/backdrop.js"],
  "sourcesContent": ["import { UbiquitousInheritedWidget, UbiquitousInheritedElement } from './directionality.js';\r\n\r\nimport { VNode } from '@flutterjs/vdom/vnode';\r\n\r\n\r\n\r\n\r\n// ============================================================================\r\n// BACKDROP KEY\r\n// Unique identifier for backdrop group\r\n// ============================================================================\r\n\r\nclass BackdropKey {\r\n    constructor(debugLabel = null) {\r\n        this.debugLabel = debugLabel;\r\n        this._id = Math.random().toString(36).substr(2, 9);\r\n    }\r\n\r\n    equals(other) {\r\n        return other instanceof BackdropKey && this._id === other._id;\r\n    }\r\n\r\n    toString() {\r\n        return `BackdropKey${this.debugLabel ? `(${this.debugLabel})` : ''}`;\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// BACKDROP GROUP\r\n// Ubiquitous inherited widget that groups backdrop-related widgets\r\n// Provides backdrop context to all descendants\r\n// ============================================================================\r\n\r\nclass BackdropGroup extends UbiquitousInheritedWidget {\r\n    constructor({ key = null, child = null, backdropKey = null } = {}) {\r\n        super({ key, child });\r\n\r\n        // Create or use provided backdrop key\r\n        this.backdropKey = backdropKey || new BackdropKey();\r\n\r\n        // Validate child\r\n        if (!child) {\r\n            throw new Error('BackdropGroup requires a child widget');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if should notify dependents\r\n     */\r\n    updateShouldNotify(oldWidget) {\r\n        // Notify if backdrop key changes\r\n        return !this.backdropKey.equals(oldWidget.backdropKey);\r\n    }\r\n\r\n    /**\r\n     * Get BackdropGroup from context\r\n     * Throws if not found\r\n     */\r\n    static of(context) {\r\n        const widget = context.dependOnInheritedWidgetOfExactType(BackdropGroup);\r\n\r\n        if (!widget) {\r\n            throw new Error(\r\n                'BackdropGroup.of() called with a context that does not contain a BackdropGroup widget. ' +\r\n                'Make sure to wrap your widget tree with a BackdropGroup widget.'\r\n            );\r\n        }\r\n\r\n        return widget;\r\n    }\r\n\r\n    /**\r\n     * Get BackdropGroup from context (returns null if not found)\r\n     */\r\n    static maybeOf(context) {\r\n        const widget = context.getInheritedWidgetOfExactType(BackdropGroup);\r\n        return widget || null;\r\n    }\r\n\r\n    /**\r\n     * Build the widget tree\r\n     */\r\n    build(context) {\r\n        let childVNode = null;\r\n        if (this.child) {\r\n            if (this.child.createElement) {\r\n                const childElement = this.child.createElement(context.element, context.element.runtime);\r\n                childElement.mount(context.element);\r\n                childVNode = childElement.performRebuild();\r\n            } else {\r\n                childVNode = this.child;\r\n            }\r\n        }\r\n\r\n        const elementId = context.element.getElementId();\r\n        const widgetPath = context.element.getWidgetPath();\r\n\r\n        return new VNode({\r\n            tag: 'div',\r\n            props: {\r\n                style: {\r\n                    position: 'relative'\r\n                },\r\n                'data-element-id': elementId,\r\n                'data-widget-path': widgetPath,\r\n                'data-widget': 'BackdropGroup',\r\n                'data-backdrop-key': this.backdropKey.toString()\r\n            },\r\n            children: childVNode ? [childVNode] : [],\r\n            key: this.key\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Debug properties\r\n     */\r\n    debugFillProperties(properties) {\r\n        super.debugFillProperties(properties);\r\n        properties.push({\r\n            name: 'backdropKey',\r\n            value: this.backdropKey.toString()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create element\r\n     */\r\n    createElement(parent, runtime) {\r\n        return new UbiquitousInheritedElement(this,parent, runtime);\r\n    }\r\n}\r\n\r\nexport { BackdropGroup, BackdropKey };"],
  "mappings": "AAAA,OAAS,6BAAAA,EAA2B,8BAAAC,MAAkC,sBAEtE,OAAS,SAAAC,MAAa,wBAUtB,MAAMC,CAAY,CACd,YAAYC,EAAa,KAAM,CAC3B,KAAK,WAAaA,EAClB,KAAK,IAAM,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CACrD,CAEA,OAAOC,EAAO,CACV,OAAOA,aAAiBF,GAAe,KAAK,MAAQE,EAAM,GAC9D,CAEA,UAAW,CACP,MAAO,cAAc,KAAK,WAAa,IAAI,KAAK,UAAU,IAAM,EAAE,EACtE,CACJ,CAQA,MAAMC,UAAsBN,CAA0B,CAClD,YAAY,CAAE,IAAAO,EAAM,KAAM,MAAAC,EAAQ,KAAM,YAAAC,EAAc,IAAK,EAAI,CAAC,EAAG,CAO/D,GANA,MAAM,CAAE,IAAAF,EAAK,MAAAC,CAAM,CAAC,EAGpB,KAAK,YAAcC,GAAe,IAAIN,EAGlC,CAACK,EACD,MAAM,IAAI,MAAM,uCAAuC,CAE/D,CAKA,mBAAmBE,EAAW,CAE1B,MAAO,CAAC,KAAK,YAAY,OAAOA,EAAU,WAAW,CACzD,CAMA,OAAO,GAAGC,EAAS,CACf,MAAMC,EAASD,EAAQ,mCAAmCL,CAAa,EAEvE,GAAI,CAACM,EACD,MAAM,IAAI,MACN,wJAEJ,EAGJ,OAAOA,CACX,CAKA,OAAO,QAAQD,EAAS,CAEpB,OADeA,EAAQ,8BAA8BL,CAAa,GACjD,IACrB,CAKA,MAAMK,EAAS,CACX,IAAIE,EAAa,KACjB,GAAI,KAAK,MACL,GAAI,KAAK,MAAM,cAAe,CAC1B,MAAMC,EAAe,KAAK,MAAM,cAAcH,EAAQ,QAASA,EAAQ,QAAQ,OAAO,EACtFG,EAAa,MAAMH,EAAQ,OAAO,EAClCE,EAAaC,EAAa,eAAe,CAC7C,MACID,EAAa,KAAK,MAI1B,MAAME,EAAYJ,EAAQ,QAAQ,aAAa,EACzCK,EAAaL,EAAQ,QAAQ,cAAc,EAEjD,OAAO,IAAIT,EAAM,CACb,IAAK,MACL,MAAO,CACH,MAAO,CACH,SAAU,UACd,EACA,kBAAmBa,EACnB,mBAAoBC,EACpB,cAAe,gBACf,oBAAqB,KAAK,YAAY,SAAS,CACnD,EACA,SAAUH,EAAa,CAACA,CAAU,EAAI,CAAC,EACvC,IAAK,KAAK,GACd,CAAC,CACL,CAKA,oBAAoBI,EAAY,CAC5B,MAAM,oBAAoBA,CAAU,EACpCA,EAAW,KAAK,CACZ,KAAM,cACN,MAAO,KAAK,YAAY,SAAS,CACrC,CAAC,CACL,CAKA,cAAcC,EAAQC,EAAS,CAC3B,OAAO,IAAIlB,EAA2B,KAAKiB,EAAQC,CAAO,CAC9D,CACJ",
  "names": ["UbiquitousInheritedWidget", "UbiquitousInheritedElement", "VNode", "BackdropKey", "debugLabel", "other", "BackdropGroup", "key", "child", "backdropKey", "oldWidget", "context", "widget", "childVNode", "childElement", "elementId", "widgetPath", "properties", "parent", "runtime"]
}
