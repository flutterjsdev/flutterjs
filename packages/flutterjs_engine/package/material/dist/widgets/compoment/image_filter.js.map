{
  "version": 3,
  "sources": ["../../../src/widgets/compoment/image_filter.js"],
  "sourcesContent": ["import { UbiquitousInheritedWidget, UbiquitousInheritedElement } from './directionality.js';\r\nimport { VNode } from '@flutterjs/vdom/vnode';\r\n\r\n// ============================================================================\r\n// IMAGE FILTER\r\n// Represents a visual filter effect (blur, matrix, etc.)\r\n// ============================================================================\r\n\r\nclass ImageFilter {\r\n    constructor(type = 'blur', values = {}) {\r\n        this.type = type;\r\n        this.values = values;\r\n    }\r\n\r\n    /**\r\n     * Create blur filter\r\n     */\r\n    static blur({ sigmaX = 0, sigmaY = 0 } = {}) {\r\n        return new ImageFilter('blur', { sigmaX, sigmaY });\r\n    }\r\n\r\n    /**\r\n     * Create matrix filter\r\n     */\r\n    static matrix(values) {\r\n        return new ImageFilter('matrix', values);\r\n    }\r\n\r\n    /**\r\n     * Convert to CSS filter string\r\n     */\r\n    toCSSFilter() {\r\n        switch (this.type) {\r\n            case 'blur':\r\n                return `blur(${Math.max(this.values.sigmaX, this.values.sigmaY)}px)`;\r\n            case 'matrix':\r\n                return `matrix(${Object.values(this.values).join(', ')})`;\r\n            default:\r\n                return 'none';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check equality with another filter\r\n     */\r\n    equals(other) {\r\n        if (!other || !(other instanceof ImageFilter)) {\r\n            return false;\r\n        }\r\n        return this.type === other.type &&\r\n               JSON.stringify(this.values) === JSON.stringify(other.values);\r\n    }\r\n\r\n    toString() {\r\n        return `ImageFilter(${this.type}, ${JSON.stringify(this.values)})`;\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// IMAGE FILTER PROVIDER\r\n// Ubiquitous inherited widget that provides image filter to all descendants\r\n// ============================================================================\r\n\r\nclass ImageFilterProvider extends UbiquitousInheritedWidget {\r\n    constructor({ key = null, imageFilter = null, child = null } = {}) {\r\n        super({ key, child });\r\n\r\n        if (imageFilter && !(imageFilter instanceof ImageFilter)) {\r\n            throw new Error(\r\n                `ImageFilterProvider requires an ImageFilter instance, got: ${typeof imageFilter}`\r\n            );\r\n        }\r\n\r\n        this.imageFilter = imageFilter;\r\n    }\r\n\r\n    /**\r\n     * Check if should notify dependents\r\n     */\r\n    updateShouldNotify(oldWidget) {\r\n        // Notify if filter changes\r\n        if (!this.imageFilter && !oldWidget.imageFilter) {\r\n            return false;\r\n        }\r\n        if (!this.imageFilter || !oldWidget.imageFilter) {\r\n            return true;\r\n        }\r\n        return !this.imageFilter.equals(oldWidget.imageFilter);\r\n    }\r\n\r\n    /**\r\n     * Get ImageFilterProvider from context\r\n     * Throws if not found\r\n     */\r\n    static of(context) {\r\n        const widget = context.dependOnInheritedWidgetOfExactType(ImageFilterProvider);\r\n\r\n        if (!widget) {\r\n            throw new Error(\r\n                'ImageFilterProvider.of() called with a context that does not contain an ImageFilterProvider widget. ' +\r\n                'Make sure to wrap your widget tree with an ImageFilterProvider widget.'\r\n            );\r\n        }\r\n\r\n        return widget;\r\n    }\r\n\r\n    /**\r\n     * Get ImageFilterProvider from context (returns null if not found)\r\n     */\r\n    static maybeOf(context) {\r\n        const widget = context.getInheritedWidgetOfExactType(ImageFilterProvider);\r\n        return widget || null;\r\n    }\r\n\r\n    /**\r\n     * Build the widget tree\r\n     */\r\n    build(context) {\r\n        let childVNode = null;\r\n        if (this.child) {\r\n            if (this.child.createElement) {\r\n                const childElement = this.child.createElement();\r\n                childElement.mount(context.element);\r\n                childVNode = childElement.performRebuild();\r\n            } else {\r\n                childVNode = this.child;\r\n            }\r\n        }\r\n\r\n        const elementId = context.element.getElementId();\r\n        const widgetPath = context.element.getWidgetPath();\r\n\r\n        // Apply filter styling to container\r\n        const filterCss = this.imageFilter ? this.imageFilter.toCSSFilter() : 'none';\r\n\r\n        return new VNode({\r\n            tag: 'div',\r\n            props: {\r\n                style: {\r\n                    position: 'relative',\r\n                    filter: filterCss\r\n                },\r\n                'data-element-id': elementId,\r\n                'data-widget-path': widgetPath,\r\n                'data-widget': 'ImageFilterProvider',\r\n                'data-filter-type': this.imageFilter ? this.imageFilter.type : 'none',\r\n                'data-filter-css': filterCss\r\n            },\r\n            children: childVNode ? [childVNode] : [],\r\n            key: this.key\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Debug properties\r\n     */\r\n    debugFillProperties(properties) {\r\n        super.debugFillProperties(properties);\r\n        if (this.imageFilter) {\r\n            properties.push({\r\n                name: 'imageFilter',\r\n                value: this.imageFilter.toString()\r\n            });\r\n            properties.push({\r\n                name: 'filterType',\r\n                value: this.imageFilter.type\r\n            });\r\n            properties.push({\r\n                name: 'cssFilter',\r\n                value: this.imageFilter.toCSSFilter()\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create element\r\n     */\r\n    createElement() {\r\n        return new UbiquitousInheritedElement(this);\r\n    }\r\n}\r\n\r\nexport { ImageFilter, ImageFilterProvider };"],
  "mappings": "AAAA,OAAS,6BAAAA,EAA2B,8BAAAC,MAAkC,sBACtE,OAAS,SAAAC,MAAa,wBAOtB,MAAMC,CAAY,CACd,YAAYC,EAAO,OAAQC,EAAS,CAAC,EAAG,CACpC,KAAK,KAAOD,EACZ,KAAK,OAASC,CAClB,CAKA,OAAO,KAAK,CAAE,OAAAC,EAAS,EAAG,OAAAC,EAAS,CAAE,EAAI,CAAC,EAAG,CACzC,OAAO,IAAIJ,EAAY,OAAQ,CAAE,OAAAG,EAAQ,OAAAC,CAAO,CAAC,CACrD,CAKA,OAAO,OAAOF,EAAQ,CAClB,OAAO,IAAIF,EAAY,SAAUE,CAAM,CAC3C,CAKA,aAAc,CACV,OAAQ,KAAK,KAAM,CACf,IAAK,OACD,MAAO,QAAQ,KAAK,IAAI,KAAK,OAAO,OAAQ,KAAK,OAAO,MAAM,CAAC,MACnE,IAAK,SACD,MAAO,UAAU,OAAO,OAAO,KAAK,MAAM,EAAE,KAAK,IAAI,CAAC,IAC1D,QACI,MAAO,MACf,CACJ,CAKA,OAAOG,EAAO,CACV,MAAI,CAACA,GAAS,EAAEA,aAAiBL,GACtB,GAEJ,KAAK,OAASK,EAAM,MACpB,KAAK,UAAU,KAAK,MAAM,IAAM,KAAK,UAAUA,EAAM,MAAM,CACtE,CAEA,UAAW,CACP,MAAO,eAAe,KAAK,IAAI,KAAK,KAAK,UAAU,KAAK,MAAM,CAAC,GACnE,CACJ,CAOA,MAAMC,UAA4BT,CAA0B,CACxD,YAAY,CAAE,IAAAU,EAAM,KAAM,YAAAC,EAAc,KAAM,MAAAC,EAAQ,IAAK,EAAI,CAAC,EAAG,CAG/D,GAFA,MAAM,CAAE,IAAAF,EAAK,MAAAE,CAAM,CAAC,EAEhBD,GAAe,EAAEA,aAAuBR,GACxC,MAAM,IAAI,MACN,8DAA8D,OAAOQ,CAAW,EACpF,EAGJ,KAAK,YAAcA,CACvB,CAKA,mBAAmBE,EAAW,CAE1B,MAAI,CAAC,KAAK,aAAe,CAACA,EAAU,YACzB,GAEP,CAAC,KAAK,aAAe,CAACA,EAAU,YACzB,GAEJ,CAAC,KAAK,YAAY,OAAOA,EAAU,WAAW,CACzD,CAMA,OAAO,GAAGC,EAAS,CACf,MAAMC,EAASD,EAAQ,mCAAmCL,CAAmB,EAE7E,GAAI,CAACM,EACD,MAAM,IAAI,MACN,4KAEJ,EAGJ,OAAOA,CACX,CAKA,OAAO,QAAQD,EAAS,CAEpB,OADeA,EAAQ,8BAA8BL,CAAmB,GACvD,IACrB,CAKA,MAAMK,EAAS,CACX,IAAIE,EAAa,KACjB,GAAI,KAAK,MACL,GAAI,KAAK,MAAM,cAAe,CAC1B,MAAMC,EAAe,KAAK,MAAM,cAAc,EAC9CA,EAAa,MAAMH,EAAQ,OAAO,EAClCE,EAAaC,EAAa,eAAe,CAC7C,MACID,EAAa,KAAK,MAI1B,MAAME,EAAYJ,EAAQ,QAAQ,aAAa,EACzCK,EAAaL,EAAQ,QAAQ,cAAc,EAG3CM,EAAY,KAAK,YAAc,KAAK,YAAY,YAAY,EAAI,OAEtE,OAAO,IAAIlB,EAAM,CACb,IAAK,MACL,MAAO,CACH,MAAO,CACH,SAAU,WACV,OAAQkB,CACZ,EACA,kBAAmBF,EACnB,mBAAoBC,EACpB,cAAe,sBACf,mBAAoB,KAAK,YAAc,KAAK,YAAY,KAAO,OAC/D,kBAAmBC,CACvB,EACA,SAAUJ,EAAa,CAACA,CAAU,EAAI,CAAC,EACvC,IAAK,KAAK,GACd,CAAC,CACL,CAKA,oBAAoBK,EAAY,CAC5B,MAAM,oBAAoBA,CAAU,EAChC,KAAK,cACLA,EAAW,KAAK,CACZ,KAAM,cACN,MAAO,KAAK,YAAY,SAAS,CACrC,CAAC,EACDA,EAAW,KAAK,CACZ,KAAM,aACN,MAAO,KAAK,YAAY,IAC5B,CAAC,EACDA,EAAW,KAAK,CACZ,KAAM,YACN,MAAO,KAAK,YAAY,YAAY,CACxC,CAAC,EAET,CAKA,eAAgB,CACZ,OAAO,IAAIpB,EAA2B,IAAI,CAC9C,CACJ",
  "names": ["UbiquitousInheritedWidget", "UbiquitousInheritedElement", "VNode", "ImageFilter", "type", "values", "sigmaX", "sigmaY", "other", "ImageFilterProvider", "key", "imageFilter", "child", "oldWidget", "context", "widget", "childVNode", "childElement", "elementId", "widgetPath", "filterCss", "properties"]
}
