import{Widget as q}from"../../core/widget_element.js";import{Element as B}from"@flutterjs/runtime";import{VNode as C}from"@flutterjs/vdom/vnode";const c={defer:"default",clickable:"pointer",forbidden:"not-allowed",grab:"grab",grabbing:"grabbing",move:"move",precise:"crosshair",text:"text",verticalText:"vertical-text",cell:"cell",copy:"copy",alias:"alias",noDrop:"no-drop",wait:"wait",progress:"progress",contextMenu:"context-menu",help:"help",resize:"resize",resizeColumn:"col-resize",resizeRow:"row-resize",resizeUp:"n-resize",resizeDown:"s-resize",resizeLeft:"w-resize",resizeRight:"e-resize",resizeUpLeft:"nw-resize",resizeUpRight:"ne-resize",resizeDownLeft:"sw-resize",resizeDownRight:"se-resize",resizeColumn:"col-resize",resizeRow:"row-resize",allScroll:"all-scroll",zoomIn:"zoom-in",zoomOut:"zoom-out"},u={deferToChild:"deferToChild",opaque:"opaque",translucent:"translucent"};class l{constructor({position:e={x:0,y:0},localPosition:t={x:0,y:0},timestamp:i=Date.now(),pressure:o=0,pressureMin:n=0,pressureMax:r=1,distance:s=0,distanceMax:a=0,size:f=0,radiusMajor:_=0,radiusMinor:g=0,radiusMin:x=0,radiusMax:z=0,orientation:w=0,tilt:b=0,platformData:T=0,kind:P="touch",device:R=0,signalKind:H="none"}={}){this.position=e,this.localPosition=t,this.timestamp=i,this.pressure=o,this.pressureMin=n,this.pressureMax=r,this.distance=s,this.distanceMax=a,this.size=f,this.radiusMajor=_,this.radiusMinor=g,this.radiusMin=x,this.radiusMax=z,this.orientation=w,this.tilt=b,this.platformData=T,this.kind=P,this.device=R,this.signalKind=H}}class d extends l{constructor(e={}){super(e)}}class p extends l{constructor(e={}){super(e)}}class m extends l{constructor(e={}){super(e)}}class v{constructor({onEnter:e=null,onHover:t=null,onExit:i=null,cursor:o=c.defer,opaque:n=!0,hitTestBehavior:r=u.deferToChild}={}){this.onEnter=e,this.onHover=t,this.onExit=i,this.cursor=o,this.opaque=n,this.hitTestBehavior=r,this._isMouseInside=!1,this._lastMousePosition=null}handleMouseEnter(e){this._isMouseInside=!0;const t=this._getMousePosition(e),i=new d({position:t,localPosition:t,timestamp:e.timeStamp||Date.now()});this.onEnter&&this.onEnter(i)}handleMouseMove(e){if(this._lastMousePosition=this._getMousePosition(e),this.onHover){const t=new p({position:this._lastMousePosition,localPosition:this._lastMousePosition,timestamp:e.timeStamp||Date.now()});this.onHover(t)}}handleMouseExit(e){this._isMouseInside=!1;const t=this._getMousePosition(e),i=new m({position:t,localPosition:t,timestamp:e.timeStamp||Date.now()});this.onExit&&this.onExit(i)}_getMousePosition(e){return{x:e.clientX||0,y:e.clientY||0,dx:e.movementX||0,dy:e.movementY||0}}debugInfo(){return{type:"RenderMouseRegion",cursor:this.cursor,opaque:this.opaque,hitTestBehavior:this.hitTestBehavior,hasOnEnter:!!this.onEnter,hasOnHover:!!this.onHover,hasOnExit:!!this.onExit,isMouseInside:this._isMouseInside}}}class M extends q{constructor({key:e=null,onEnter:t=null,onExit:i=null,onHover:o=null,cursor:n=c.defer,opaque:r=!0,hitTestBehavior:s=u.deferToChild,child:a=null}={}){super(e),this.onEnter=t,this.onExit=i,this.onHover=o,this.cursor=n,this.opaque=r,this.hitTestBehavior=s,this.child=a,this._renderObject=null,this._containerElement=null}createRenderObject(e){return new v({onEnter:this.onEnter,onHover:this.onHover,onExit:this.onExit,cursor:this.cursor,opaque:this.opaque,hitTestBehavior:this.hitTestBehavior})}updateRenderObject(e,t){t.onEnter=this.onEnter,t.onHover=this.onHover,t.onExit=this.onExit,t.cursor=this.cursor,t.opaque=this.opaque,t.hitTestBehavior=this.hitTestBehavior}build(e){this._renderObject?this.updateRenderObject(e,this._renderObject):this._renderObject=this.createRenderObject(e);const t=e.element.getElementId(),i=e.element.getWidgetPath();let o=null;if(this.child){const s=this.child.createElement(e.element,e.element.runtime);s.mount(e.element),o=s.performRebuild()}const n=this._mapHitTestBehavior(),r={position:"relative",cursor:this.cursor,pointerEvents:n,userSelect:"none"};return new C({tag:"div",props:{style:r,"data-element-id":t,"data-widget-path":i,"data-widget":"MouseRegion","data-cursor":this.cursor,"data-opaque":this.opaque,"data-hit-test-behavior":this.hitTestBehavior,"data-has-on-enter":!!this.onEnter,"data-has-on-hover":!!this.onHover,"data-has-on-exit":!!this.onExit,onMouseEnter:s=>this._onMouseEnter(s),onMouseMove:s=>this._onMouseMove(s),onMouseLeave:s=>this._onMouseLeave(s),ref:s=>this._onContainerMount(s)},children:o?[o]:[],key:this.key})}_onMouseEnter(e){this._renderObject&&this._renderObject.handleMouseEnter(e)}_onMouseMove(e){this._renderObject&&this._renderObject.handleMouseMove(e)}_onMouseLeave(e){this._renderObject&&this._renderObject.handleMouseExit(e)}_onContainerMount(e){e&&(this._containerElement=e)}_mapHitTestBehavior(){switch(this.hitTestBehavior){case u.opaque:return"auto";case u.translucent:return"auto";case u.deferToChild:default:return"auto"}}debugFillProperties(e){super.debugFillProperties(e);const t=[];this.onEnter&&t.push("enter"),this.onExit&&t.push("exit"),this.onHover&&t.push("hover"),e.push({name:"listeners",value:t.join(", ")||"<none>"}),e.push({name:"cursor",value:this.cursor}),e.push({name:"opaque",value:this.opaque}),e.push({name:"hitTestBehavior",value:this.hitTestBehavior})}createElement(e,t){return new E(this,e,t)}}class E extends B{performRebuild(){return this.widget.build(this.context)}}class O extends M{constructor({key:e=null,onEnter:t=null,onExit:i=null,onHover:o=null,cursor:n="default",opaque:r=!0,hitTestBehavior:s=u.deferToChild,child:a=null}={}){super({key:e,onEnter:t,onExit:i,onHover:o,cursor:n,opaque:r,hitTestBehavior:s,child:a}),this._customCursor=n}build(e){return this.cursor=this._customCursor,super.build(e)}}export{u as HitTestBehavior,c as MouseCursor,M as MouseRegion,O as MouseRegionCustomCursor,E as MouseRegionElement,d as PointerEnterEvent,l as PointerEvent,m as PointerExitEvent,p as PointerHoverEvent,v as RenderMouseRegion};
//# sourceMappingURL=mouse_region.js.map
