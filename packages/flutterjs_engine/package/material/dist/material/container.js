import{Widget as C,StatelessWidget as d}from"../core/widget_element.js";import{Element as M}from"@flutterjs/runtime";import{VNode as a}from"@flutterjs/vdom/vnode";import{Clip as b,Alignment as P}from"../utils/utils.js";import{Padding as x}from"../widgets/widgets.js";const m={background:"background",foreground:"foreground"};class u{constructor(t=0,i=0,e=0,n=0){this.top=t,this.right=i,this.bottom=e,this.left=n}static symmetric({vertical:t=0,horizontal:i=0}={}){return new u(t,i,t,i)}static all(t=0){return new u(t,t,t,t)}static only({top:t=0,right:i=0,bottom:e=0,left:n=0}={}){return new u(t,i,e,n)}get isNonNegative(){return this.top>=0&&this.right>=0&&this.bottom>=0&&this.left>=0}get horizontal(){return this.left+this.right}get vertical(){return this.top+this.bottom}add(t){return new u(this.top+t.top,this.right+t.right,this.bottom+t.bottom,this.left+t.left)}toCSSString(){return this.top===this.right&&this.right===this.bottom&&this.bottom===this.left?`${this.top}px`:this.top===this.bottom&&this.left===this.right?`${this.top}px ${this.left}px`:`${this.top}px ${this.right}px ${this.bottom}px ${this.left}px`}toCSSMargin(){return`${this.top}px ${this.right}px ${this.bottom}px ${this.left}px`}toCSSPadding(){return`${this.top}px ${this.right}px ${this.bottom}px ${this.left}px`}}class h{constructor(t=0,i=1/0,e=0,n=1/0){this.minWidth=t,this.maxWidth=i,this.minHeight=e,this.maxHeight=n}static tight(t){return new h(t.width,t.width,t.height,t.height)}static loose(t){return new h(0,t.width,0,t.height)}static expand({width:t=1/0,height:i=1/0}={}){return new h(0,t,0,i)}static tightFor({width:t=null,height:i=null}={}){return new h(t!==null?t:0,t!==null?t:1/0,i!==null?i:0,i!==null?i:1/0)}get isTight(){return this.minWidth===this.maxWidth&&this.minHeight===this.maxHeight}debugAssertIsValid(){if(!(this.minWidth>=0&&this.maxWidth>=this.minWidth&&this.minHeight>=0&&this.maxHeight>=this.minHeight))throw new Error(`Invalid BoxConstraints: ${this.minWidth}..${this.maxWidth}, ${this.minHeight}..${this.maxHeight}`);return!0}tighten({width:t=null,height:i=null}={}){return new h(t!==null?Math.max(this.minWidth,t):this.minWidth,t!==null?Math.min(this.maxWidth,t):this.maxWidth,i!==null?Math.max(this.minHeight,i):this.minHeight,i!==null?Math.min(this.maxHeight,i):this.maxHeight)}constrain(t){return{width:Math.max(this.minWidth,Math.min(this.maxWidth,t.width)),height:Math.max(this.minHeight,Math.min(this.maxHeight,t.height))}}toString(){return`BoxConstraints(${this.minWidth}..${this.maxWidth}, ${this.minHeight}..${this.maxHeight})`}}class p{constructor(){if(new.target===p)throw new Error("Decoration is abstract");this.padding=new u(0,0,0,0)}toCSSStyle(){throw new Error("toCSSStyle() must be implemented")}debugAssertIsValid(){return!0}}class S extends p{constructor({color:t=null,image:i=null,border:e=null,borderRadius:n=null,boxShadow:r=[],gradient:o=null,backgroundBlendMode:s=null,shape:c="rectangle"}={}){super(),this.color=t,this.image=i,this.border=e,this.borderRadius=n,this.boxShadow=r,this.gradient=o,this.backgroundBlendMode=s,this.shape=c}toCSSStyle(){const t={};if(this.color&&(t.backgroundColor=this.color),this.borderRadius)if(typeof this.borderRadius=="number")t.borderRadius=`${this.borderRadius}px`;else if(this.borderRadius.all!==void 0)t.borderRadius=`${this.borderRadius.all}px`;else{const{topLeft:i=0,topRight:e=0,bottomLeft:n=0,bottomRight:r=0}=this.borderRadius;t.borderRadius=`${i}px ${e}px ${r}px ${n}px`}if(this.border&&typeof this.border=="object"){const{width:i=1,color:e="black",style:n="solid"}=this.border;t.border=`${i}px ${n} ${e}`}if(this.boxShadow&&this.boxShadow.length>0&&(t.boxShadow=this.boxShadow.map(i=>{const{offsetX:e=0,offsetY:n=0,blurRadius:r=0,spreadRadius:o=0,color:s="rgba(0,0,0,0.5)"}=i;return`${e}px ${n}px ${r}px ${o}px ${s}`}).join(", ")),this.gradient){const{type:i="linear",colors:e=[],stops:n=[]}=this.gradient;if(i==="linear"){const r=e.map((o,s)=>`${o} ${(n[s]||s/e.length)*100}%`).join(", ");t.background=`linear-gradient(135deg, ${r})`}}return this.backgroundBlendMode&&(t.mixBlendMode=this.backgroundBlendMode),t}}class y extends d{constructor({key:t=null,color:i="white",child:e=null}={}){super(t),this.color=i,this.child=e}build(t){return new g({decoration:new S({color:this.color}),child:this.child})}}class v{constructor({decoration:t=null,position:i=m.background,configuration:e={}}={}){this.decoration=t,this.position=i,this.configuration=e}debugInfo(){return{type:"RenderDecoratedBox",position:this.position,hasDecoration:!!this.decoration}}}class g extends C{constructor({key:t=null,decoration:i=null,position:e=m.background,child:n=null}={}){if(super(t),!i)throw new Error("DecoratedBox requires a decoration");this.decoration=i,this.position=e,this.child=n,this._renderObject=null}createRenderObject(t){return new v({decoration:this.decoration,position:this.position,configuration:{}})}updateRenderObject(t,i){i.decoration=this.decoration,i.position=this.position}build(t){this._renderObject?this.updateRenderObject(t,this._renderObject):this._renderObject=this.createRenderObject(t);const i=t.element.getElementId(),e=t.element.getWidgetPath();let n=null;if(this.child){const s=this.child.createElement(t.element,t.element.runtime);s.mount(t.element),n=s.performRebuild()}const o={position:"relative",...this.decoration.toCSSStyle()};return new a({tag:"div",props:{style:o,"data-element-id":i,"data-widget-path":e,"data-widget":"DecoratedBox","data-position":this.position},children:n?[n]:[],key:this.key})}debugFillProperties(t){super.debugFillProperties(t);const i=this.position===m.background?"bg":"fg";t.push({name:i,value:this.decoration})}createElement(t,i){return new R(this,t,i)}}class R extends M{performRebuild(){return this.widget.build(this.context)}}class j extends d{constructor({key:t=null,alignment:i=null,padding:e=null,color:n=null,decoration:r=null,foregroundDecoration:o=null,width:s=null,height:c=null,constraints:$=null,margin:f=null,transform:H=null,transformAlignment:B=null,child:I=null,clipBehavior:k=b.none}={}){if(super(t),e!==null&&!e.isNonNegative)throw new Error("padding must be non-negative");if(f!==null&&!f.isNonNegative)throw new Error("margin must be non-negative");if(n!==null&&r!==null)throw new Error("Cannot provide both color and decoration. Use BoxDecoration(color: color).");if(r!==null&&!r.debugAssertIsValid())throw new Error("decoration is not valid");this.alignment=i,this.padding=e,this.color=n,this.decoration=r,this.foregroundDecoration=o,this.margin=f,this.transform=H,this.transformAlignment=B,this.child=I,this.clipBehavior=k,s!==null||c!==null?this.constraints=$?.tighten({width:s,height:c})||h.tightFor({width:s,height:c}):this.constraints=$}_getPaddingIncludingDecoration(){return this.padding===null?this.decoration?.padding:this.decoration?.padding===null||this.decoration?.padding===void 0?this.padding:this.padding.add(this.decoration.padding)}build(t){let i=this.child;this.child===null&&(this.constraints===null||!this.constraints.isTight)?i=new W({maxWidth:0,maxHeight:0,child:new w({constraints:h.expand()})}):this.alignment!==null&&(i=new N({alignment:this.alignment,child:i}));const e=this._getPaddingIncludingDecoration();return e!==null&&(i=new x({padding:e,child:i})),this.color!==null&&(i=new y({color:this.color,child:i})),this.clipBehavior!==b.none&&this.decoration!==null&&(i=new E({clipBehavior:this.clipBehavior,child:i})),this.decoration!==null&&(i=new g({decoration:this.decoration,child:i})),this.foregroundDecoration!==null&&(i=new g({decoration:this.foregroundDecoration,position:m.foreground,child:i})),this.constraints!==null&&(i=new w({constraints:this.constraints,child:i})),this.margin!==null&&(i=new x({padding:this.margin,child:i})),this.transform!==null&&(i=new D({transform:this.transform,alignment:this.transformAlignment,child:i})),i}debugFillProperties(t){super.debugFillProperties(t),this.alignment!==null&&t.push({name:"alignment",value:this.alignment}),this.padding!==null&&t.push({name:"padding",value:this.padding}),this.color!==null?t.push({name:"bg",value:this.color}):this.decoration!==null&&t.push({name:"bg",value:this.decoration}),this.foregroundDecoration!==null&&t.push({name:"fg",value:this.foregroundDecoration}),this.constraints!==null&&t.push({name:"constraints",value:this.constraints}),this.margin!==null&&t.push({name:"margin",value:this.margin})}}class N extends d{constructor({key:t=null,alignment:i=P.center,child:e=null}={}){super(t),this.alignment=i,this.child=e}build(t){const i=this.child?.createElement(t.element,t.element.runtime);if(i){i.mount(t.element);const e=i.performRebuild();return new a({tag:"div",props:{style:{display:"flex",justifyContent:"center",alignItems:"center"}},children:[e]})}return new a({tag:"div",children:[]})}}class E extends d{constructor({key:t=null,clipBehavior:i=b.hardEdge,child:e=null}={}){super(t),this.clipBehavior=i,this.child=e}build(t){const i=this.child?.createElement(t.element,t.element.runtime);return i?(i.mount(t.element),i.performRebuild()):new a({tag:"div",children:[]})}}class w extends d{constructor({key:t=null,constraints:i=null,child:e=null}={}){super(t),this.constraints=i,this.child=e}build(t){const i=this.child?.createElement(t.element,t.element.runtime);return i?(i.mount(t.element),i.performRebuild()):new a({tag:"div",children:[]})}}class W extends d{constructor({key:t=null,maxWidth:i=1/0,maxHeight:e=1/0,child:n=null}={}){super(t),this.maxWidth=i,this.maxHeight=e,this.child=n}build(t){const i=this.child?.createElement(t.element,t.element.runtime);return i?(i.mount(t.element),i.performRebuild()):new a({tag:"div",children:[]})}}class D extends d{constructor({key:t=null,transform:i=null,alignment:e=null,child:n=null}={}){super(t),this.transform=i,this.alignment=e,this.child=n}build(t){const i=this.child?.createElement(t.element,t.element.runtime);return i?(i.mount(t.element),i.performRebuild()):new a({tag:"div",children:[]})}}export{h as BoxConstraints,S as BoxDecoration,E as ClipPath,y as ColoredBox,w as ConstrainedBox,j as Container,g as DecoratedBox,R as DecoratedBoxElement,p as Decoration,m as DecorationPosition,u as EdgeInsets,W as LimitedBox,x as Padding,v as RenderDecoratedBox,D as Transform};
//# sourceMappingURL=container.js.map
