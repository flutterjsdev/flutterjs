{
  "version": 3,
  "sources": ["../../src/material/material_app.js"],
  "sourcesContent": ["/**\r\n * ============================================================================\r\n * FIXED MaterialApp - Properly Handles StatefulWidget \u2192 State Connection\r\n * ============================================================================\r\n */\r\n\r\nimport { StatelessWidget, ErrorWidget, StatefulWidget, State } from '../core/widget_element.js';\r\nimport { VNode } from '@flutterjs/vdom/vnode';\r\nimport { StatefulElement, StatelessElement, InheritedWidget } from '@flutterjs/runtime';\r\nimport { Navigator, Route } from '../widgets/navigator.js';\r\n\r\n// ============================================================================\r\n// THEME DATA\r\n// ============================================================================\r\n\r\nimport { ColorScheme } from './color_scheme.js';\r\n\r\nclass ThemeData {\r\n  constructor({\r\n    brightness = 'light',\r\n    primaryColor = '#2196F3',\r\n    primarySwatch = null,\r\n    colorScheme = null,\r\n    accentColor = '#FF4081',\r\n    scaffoldBackgroundColor = '#FAFAFA',\r\n    canvasColor = '#FFF',\r\n    cardColor = '#FFF',\r\n    dividerColor = 'rgba(0, 0, 0, 0.12)',\r\n    highlightColor = 'rgba(0, 0, 0, 0.05)',\r\n    splashColor = 'rgba(0, 0, 0, 0.2)',\r\n    selectedRowColor = '#F5F5F5',\r\n    unselectedWidgetColor = 'rgba(0, 0, 0, 0.54)',\r\n    disabledColor = 'rgba(0, 0, 0, 0.38)',\r\n    textTheme = null,\r\n    fontFamily = 'Roboto, -apple-system, BlinkMacSystemFont, \"Segoe UI\"',\r\n    appBarTheme = null\r\n  } = {}) {\r\n    // console.log('\uD83C\uDFA8 ThemeData constructor called', { primaryColor, primarySwatch });\r\n    this.brightness = brightness;\r\n\r\n    // Legacy support\r\n    this.primaryColor = primaryColor;\r\n    this.primarySwatch = primarySwatch;\r\n    this.accentColor = accentColor;\r\n    this.scaffoldBackgroundColor = scaffoldBackgroundColor;\r\n    this.canvasColor = canvasColor;\r\n    this.cardColor = cardColor;\r\n    this.dividerColor = dividerColor;\r\n    this.highlightColor = highlightColor;\r\n    this.splashColor = splashColor;\r\n    this.selectedRowColor = selectedRowColor;\r\n    this.unselectedWidgetColor = unselectedWidgetColor;\r\n    this.disabledColor = disabledColor;\r\n    this.textTheme = textTheme;\r\n    this.fontFamily = fontFamily;\r\n    this.appBarTheme = appBarTheme;\r\n\r\n    // ColorScheme support\r\n    if (colorScheme) {\r\n      this.colorScheme = colorScheme;\r\n      // Sync legacy properties if not explicitly provided\r\n      if (!primaryColor) this.primaryColor = colorScheme.primary;\r\n      if (!scaffoldBackgroundColor) this.scaffoldBackgroundColor = colorScheme.background;\r\n      if (!cardColor) this.cardColor = colorScheme.surface;\r\n    } else {\r\n      // Create default color scheme based on brightness and primary color\r\n      this.colorScheme = brightness === 'dark'\r\n        ? ColorScheme.dark()\r\n        : ColorScheme.light();\r\n\r\n      // Override primary if provided\r\n      if (primaryColor && primaryColor !== '#2196F3') { // Check if different from default\r\n        this.colorScheme = ColorScheme.fromSeed({\r\n          seedColor: primaryColor,\r\n          brightness: brightness\r\n        });\r\n      }\r\n    }\r\n\r\n    // Initialize default TextTheme if not provided\r\n    const isDark = brightness === 'dark';\r\n    const baseColor = isDark ? '#FFFFFF' : '#000000';\r\n\r\n    this.textTheme = textTheme || {\r\n      displayLarge: { fontFamily: fontFamily, fontSize: 57, fontWeight: '400', color: baseColor },\r\n      displayMedium: { fontFamily: fontFamily, fontSize: 45, fontWeight: '400', color: baseColor },\r\n      displaySmall: { fontFamily: fontFamily, fontSize: 36, fontWeight: '400', color: baseColor },\r\n      headlineLarge: { fontFamily: fontFamily, fontSize: 32, fontWeight: '400', color: baseColor },\r\n      headlineMedium: { fontFamily: fontFamily, fontSize: 28, fontWeight: '400', color: baseColor },\r\n      headlineSmall: { fontFamily: fontFamily, fontSize: 24, fontWeight: '400', color: baseColor },\r\n      titleLarge: { fontFamily: fontFamily, fontSize: 22, fontWeight: '400', color: baseColor },\r\n      titleMedium: { fontFamily: fontFamily, fontSize: 16, fontWeight: '500', color: baseColor },\r\n      titleSmall: { fontFamily: fontFamily, fontSize: 14, fontWeight: '500', color: baseColor },\r\n      bodyLarge: { fontFamily: fontFamily, fontSize: 16, fontWeight: '400', color: baseColor },\r\n      bodyMedium: { fontFamily: fontFamily, fontSize: 14, fontWeight: '400', color: baseColor },\r\n      bodySmall: { fontFamily: fontFamily, fontSize: 12, fontWeight: '400', color: baseColor },\r\n      labelLarge: { fontFamily: fontFamily, fontSize: 14, fontWeight: '500', color: baseColor },\r\n      labelMedium: { fontFamily: fontFamily, fontSize: 12, fontWeight: '500', color: baseColor },\r\n      labelSmall: { fontFamily: fontFamily, fontSize: 11, fontWeight: '500', color: baseColor },\r\n    };\r\n  }\r\n\r\n  static dark() {\r\n    return new ThemeData({\r\n      brightness: 'dark',\r\n      colorScheme: ColorScheme.dark(),\r\n      primaryColor: '#1F1F1F',\r\n      scaffoldBackgroundColor: '#121212',\r\n      canvasColor: '#1E1E1E',\r\n      cardColor: '#2C2C2C',\r\n      dividerColor: 'rgba(255, 255, 255, 0.12)',\r\n      unselectedWidgetColor: 'rgba(255, 255, 255, 0.70)'\r\n    });\r\n  }\r\n\r\n  static light() {\r\n    return new ThemeData({\r\n      brightness: 'light',\r\n      colorScheme: ColorScheme.light(),\r\n      primaryColor: '#2196F3',\r\n      scaffoldBackgroundColor: '#FAFAFA',\r\n      canvasColor: '#FFF',\r\n      cardColor: '#FFF'\r\n    });\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// THEME INHERITED WIDGET\r\n// ============================================================================\r\n\r\nclass Theme extends InheritedWidget {\r\n  constructor({ data, child, key } = {}) {\r\n    super({ child, key });\r\n    this.data = data;\r\n  }\r\n\r\n  updateShouldNotify(oldWidget) {\r\n    return this.data !== oldWidget.data;\r\n  }\r\n\r\n  static of(context) {\r\n    if (!context || !context.dependOnInheritedWidgetOfExactType) {\r\n      console.warn('Theme.of() called with invalid context');\r\n      return new ThemeData();\r\n    }\r\n    const widget = context.dependOnInheritedWidgetOfExactType(Theme);\r\n    return widget ? widget.data : new ThemeData();\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// MATERIAL APP - FIXED VERSION\r\n// ============================================================================\r\n\r\nclass MaterialApp extends StatefulWidget {\r\n  constructor({\r\n    key = null,\r\n    title = '',\r\n    theme = null,\r\n    darkTheme = null,\r\n    themeMode = 'system',\r\n    home = null,\r\n    routes = {},\r\n    initialRoute = '/',\r\n    onGenerateRoute = null,\r\n    onUnknownRoute = null,\r\n    navigatorObservers = [],\r\n    localizationsDelegates = [],\r\n    supportedLocales = [{ language: 'en' }],\r\n    locale = null,\r\n    builder = null,\r\n    color = null\r\n  } = {}) {\r\n    super(key);\r\n\r\n    this.title = title;\r\n    this.theme = theme || ThemeData.light();\r\n    this.darkTheme = darkTheme || ThemeData.dark();\r\n    this.themeMode = themeMode;\r\n    this.color = color;\r\n    this.home = home;\r\n    this.routes = routes;\r\n    this.initialRoute = initialRoute;\r\n    this.onGenerateRoute = onGenerateRoute;\r\n    this.onUnknownRoute = onUnknownRoute;\r\n    this.navigatorObservers = navigatorObservers;\r\n    this.localizationsDelegates = localizationsDelegates;\r\n    this.supportedLocales = supportedLocales;\r\n    this.locale = locale;\r\n    this.builder = builder;\r\n\r\n    // Normalize routes\r\n    if (this.home && !this.routes['/']) {\r\n      this.routes['/'] = (context) => this.home;\r\n    }\r\n\r\n    if (typeof document !== 'undefined') {\r\n      document.title = this.title;\r\n    }\r\n  }\r\n\r\n  createState() {\r\n    return new MaterialAppState();\r\n  }\r\n}\r\n\r\nclass MaterialAppState extends State {\r\n  _getTheme() {\r\n    const wm = this.widget;\r\n    if (wm.themeMode === 'dark') {\r\n      return wm.darkTheme;\r\n    }\r\n    if (wm.themeMode === 'light') {\r\n      return wm.theme;\r\n    }\r\n    if (typeof window !== 'undefined' && window.matchMedia) {\r\n      const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n      return isDark ? wm.darkTheme : wm.theme;\r\n    }\r\n    return wm.theme;\r\n  }\r\n\r\n  _applyTheme(theme) {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    // Safeguards for undefined theme properties\r\n    const primary = theme.primaryColor || '#2196F3'; // Default blue\r\n    const surface = theme.cardColor || '#FFFFFF';\r\n    const background = theme.scaffoldBackgroundColor || '#FAFAFA';\r\n    const onPrimary = '#FFFFFF';\r\n    const onSurface = (theme.brightness === 'dark') ? '#FFFFFF' : '#000000';\r\n    const onBackground = (theme.brightness === 'dark') ? '#FFFFFF' : '#000000';\r\n\r\n    const root = document.documentElement;\r\n    root.style.setProperty('--primary-color', primary);\r\n    root.style.setProperty('--accent-color', theme.accentColor || '#FF4081');\r\n    root.style.setProperty('--scaffold-bg', background);\r\n    root.style.setProperty('--card-color', surface);\r\n    root.style.setProperty('--divider-color', theme.dividerColor);\r\n    root.style.setProperty('--font-family', theme.fontFamily);\r\n    root.style.setProperty('--text-color', onSurface);\r\n\r\n    // MD3 System Colors (Mapped from Legacy Theme with Fallbacks)\r\n    root.style.setProperty('--md-sys-color-primary', primary);\r\n    root.style.setProperty('--md-sys-color-on-primary', onPrimary);\r\n    root.style.setProperty('--md-sys-color-surface', surface);\r\n    root.style.setProperty('--md-sys-color-on-surface', onSurface);\r\n    root.style.setProperty('--md-sys-color-background', background);\r\n    root.style.setProperty('--md-sys-color-on-background', onBackground);\r\n\r\n    document.body.style.backgroundColor = background;\r\n    document.body.style.fontFamily = theme.fontFamily;\r\n    document.body.style.color = onSurface;\r\n  }\r\n\r\n  build(context) {\r\n    const currentTheme = this._getTheme();\r\n    this._applyTheme(currentTheme);\r\n\r\n    return new Theme({\r\n      data: currentTheme,\r\n      child: new Navigator({\r\n        initialRoute: this.widget.initialRoute,\r\n        routes: this.widget.routes,\r\n        onGenerateRoute: this.widget.onGenerateRoute,\r\n        onUnknownRoute: this.widget.onUnknownRoute\r\n      })\r\n    });\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport {\r\n  MaterialApp,\r\n  ThemeData,\r\n  Navigator,\r\n  Route,\r\n  Theme\r\n};"],
  "mappings": "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",
  "names": ["StatefulWidget", "State", "InheritedWidget", "Navigator", "Route", "ColorScheme", "ThemeData", "brightness", "primaryColor", "primarySwatch", "colorScheme", "accentColor", "scaffoldBackgroundColor", "canvasColor", "cardColor", "dividerColor", "highlightColor", "splashColor", "selectedRowColor", "unselectedWidgetColor", "disabledColor", "textTheme", "fontFamily", "appBarTheme", "baseColor", "Theme", "data", "child", "key", "oldWidget", "context", "widget", "MaterialApp", "title", "theme", "darkTheme", "themeMode", "home", "routes", "initialRoute", "onGenerateRoute", "onUnknownRoute", "navigatorObservers", "localizationsDelegates", "supportedLocales", "locale", "builder", "color", "MaterialAppState", "wm", "primary", "surface", "background", "onPrimary", "onSurface", "onBackground", "root", "currentTheme"]
}
