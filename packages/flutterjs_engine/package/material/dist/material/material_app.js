import{StatelessWidget as b,Element as w}from"../core/widget_element.js";import{VNode as l}from"@flutterjs/vdom/vnode";class n{constructor({brightness:t="light",primaryColor:e="#2196F3",primarySwatch:o=null,accentColor:r="#FF4081",scaffoldBackgroundColor:i="#FAFAFA",canvasColor:s="#FFF",cardColor:u="#FFF",dividerColor:h="rgba(0, 0, 0, 0.12)",highlightColor:d="rgba(0, 0, 0, 0.05)",splashColor:c="rgba(0, 0, 0, 0.2)",selectedRowColor:g="#F5F5F5",unselectedWidgetColor:p="rgba(0, 0, 0, 0.54)",disabledColor:m="rgba(0, 0, 0, 0.38)",textTheme:f=null,fontFamily:y='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI"',appBarTheme:F=null}={}){this.brightness=t,this.primaryColor=e,this.primarySwatch=o,this.accentColor=r,this.scaffoldBackgroundColor=i,this.canvasColor=s,this.cardColor=u,this.dividerColor=h,this.highlightColor=d,this.splashColor=c,this.selectedRowColor=g,this.unselectedWidgetColor=p,this.disabledColor=m,this.textTheme=f,this.fontFamily=y,this.appBarTheme=F}static dark(){return new n({brightness:"dark",primaryColor:"#1F1F1F",scaffoldBackgroundColor:"#121212",canvasColor:"#1E1E1E",cardColor:"#2C2C2C",dividerColor:"rgba(255, 255, 255, 0.12)",unselectedWidgetColor:"rgba(255, 255, 255, 0.70)"})}static light(){return new n({brightness:"light",primaryColor:"#2196F3",scaffoldBackgroundColor:"#FAFAFA",canvasColor:"#FFF",cardColor:"#FFF"})}}class R{constructor({name:t="/",builder:e=null,settings:o={}}={}){this.name=t,this.builder=e,this.settings=o}}class C{constructor({routes:t={},initialRoute:e="/",onGenerateRoute:o=null,onUnknownRoute:r=null}={}){this.routes=t,this.initialRoute=e,this.onGenerateRoute=o,this.onUnknownRoute=r,this.routeStack=[],this.currentRoute=e}pushNamed(t,{arguments:e=null}={}){this.currentRoute=t,this.routeStack.push(t)}pop(){return this.routeStack.length>1?(this.routeStack.pop(),this.currentRoute=this.routeStack[this.routeStack.length-1],!0):!1}getCurrentPage(t){const e=this.currentRoute;if(this.routes[e])return this.routes[e](t);if(this.onGenerateRoute){const o={name:e},r=this.onGenerateRoute(o);if(r)return r.builder(t)}if(this.onUnknownRoute){const o={name:e};return this.onUnknownRoute(o).builder(t)}return null}}class v extends b{constructor({key:t=null,title:e="",theme:o=null,darkTheme:r=null,themeMode:i="system",home:s=null,routes:u={},initialRoute:h="/",onGenerateRoute:d=null,onUnknownRoute:c=null,navigatorObservers:g=[],localizationsDelegates:p=[],supportedLocales:m=[{language:"en"}],locale:f=null,builder:y=null,color:F=null}={}){super(t),this.title=e,this.theme=o||n.light(),this.darkTheme=r||n.dark(),this.themeMode=i,this.color=F,this.home=s,this.routes=u,this.initialRoute=h,this.onGenerateRoute=d,this.onUnknownRoute=c,this.navigatorObservers=g,this.localizationsDelegates=p,this.supportedLocales=m,this.locale=f,this.builder=y,this.navigator=new C({routes:this.routes,initialRoute:this.initialRoute,onGenerateRoute:this.onGenerateRoute,onUnknownRoute:this.onUnknownRoute}),this.home&&(this.navigator.routes["/"]=S=>this.home),typeof document<"u"&&(document.title=this.title)}_getTheme(){return this.themeMode==="dark"?this.darkTheme:this.themeMode==="light"?this.theme:typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?this.darkTheme:this.theme:this.theme}_applyTheme(t){if(typeof document>"u")return;const e=document.documentElement;e.style.setProperty("--primary-color",t.primaryColor),e.style.setProperty("--accent-color",t.accentColor),e.style.setProperty("--scaffold-bg",t.scaffoldBackgroundColor),e.style.setProperty("--card-color",t.cardColor),e.style.setProperty("--divider-color",t.dividerColor),e.style.setProperty("--font-family",t.fontFamily),e.style.setProperty("--text-color",t.brightness==="dark"?"#FFF":"#000"),document.body.style.backgroundColor=t.scaffoldBackgroundColor,document.body.style.fontFamily=t.fontFamily,document.body.style.color=t.brightness==="dark"?"#FFF":"#000"}build(t){const e=this._getTheme();this._applyTheme(e);let o=this.navigator.getCurrentPage(t);o||(o=this._buildErrorPage());const r=o.createElement?.()||o;r.mount&&r.mount(t.element);let i=r.performRebuild?.()||null;if(this.builder){const s=this.builder(t,o);s&&(i=s)}return new l({tag:"div",props:{style:{width:"100%",height:"100%",backgroundColor:e.scaffoldBackgroundColor,color:e.brightness==="dark"?"#FFF":"#000",fontFamily:e.fontFamily,margin:0,padding:0,boxSizing:"border-box",minHeight:"100vh"},"data-app":"MaterialApp","data-theme":e.brightness},children:i?[i]:[]})}_buildErrorPage(){return new b({build:t=>new l({tag:"div",props:{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column"}},children:[new l({tag:"h1",props:{style:{color:"#d32f2f"}},children:["404: Page Not Found"]}),new l({tag:"p",props:{style:{color:"#666"}},children:[`Route: ${this.navigator.currentRoute}`]})]})})}createElement(){return new k(this)}}class k extends w{performRebuild(){return this.widget.build(this.context)}}export{v as MaterialApp,k as MaterialAppElement,C as Navigator,R as Route,n as ThemeData};
//# sourceMappingURL=material_app.js.map
