import{StatelessWidget as F}from"../core/widget_element.js";import{VNode as l}from"@flutterjs/vdom/vnode";class s{constructor({brightness:t="light",primaryColor:e="#2196F3",primarySwatch:o=null,accentColor:r="#FF4081",scaffoldBackgroundColor:n="#FAFAFA",canvasColor:i="#FFF",cardColor:a="#FFF",dividerColor:u="rgba(0, 0, 0, 0.12)",highlightColor:d="rgba(0, 0, 0, 0.05)",splashColor:h="rgba(0, 0, 0, 0.2)",selectedRowColor:c="#F5F5F5",unselectedWidgetColor:g="rgba(0, 0, 0, 0.54)",disabledColor:p="rgba(0, 0, 0, 0.38)",textTheme:f=null,fontFamily:m='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI"',appBarTheme:y=null}={}){this.brightness=t,this.primaryColor=e,this.primarySwatch=o,this.accentColor=r,this.scaffoldBackgroundColor=n,this.canvasColor=i,this.cardColor=a,this.dividerColor=u,this.highlightColor=d,this.splashColor=h,this.selectedRowColor=c,this.unselectedWidgetColor=g,this.disabledColor=p,this.textTheme=f,this.fontFamily=m,this.appBarTheme=y}static dark(){return new s({brightness:"dark",primaryColor:"#1F1F1F",scaffoldBackgroundColor:"#121212",canvasColor:"#1E1E1E",cardColor:"#2C2C2C",dividerColor:"rgba(255, 255, 255, 0.12)",unselectedWidgetColor:"rgba(255, 255, 255, 0.70)"})}static light(){return new s({brightness:"light",primaryColor:"#2196F3",scaffoldBackgroundColor:"#FAFAFA",canvasColor:"#FFF",cardColor:"#FFF"})}}class k{constructor({name:t="/",builder:e=null,settings:o={}}={}){this.name=t,this.builder=e,this.settings=o}}class C{constructor({routes:t={},initialRoute:e="/",onGenerateRoute:o=null,onUnknownRoute:r=null}={}){this.routes=t,this.initialRoute=e,this.onGenerateRoute=o,this.onUnknownRoute=r,this.routeStack=[],this.currentRoute=e}pushNamed(t,{arguments:e=null}={}){this.currentRoute=t,this.routeStack.push(t)}pop(){return this.routeStack.length>1?(this.routeStack.pop(),this.currentRoute=this.routeStack[this.routeStack.length-1],!0):!1}getCurrentPage(t){const e=this.currentRoute;if(this.routes[e])return this.routes[e](t);if(this.onGenerateRoute){const o={name:e},r=this.onGenerateRoute(o);if(r)return r.builder(t)}if(this.onUnknownRoute){const o={name:e};return this.onUnknownRoute(o).builder(t)}return null}}class w extends F{constructor({key:t=null,title:e="",theme:o=null,darkTheme:r=null,themeMode:n="system",home:i=null,routes:a={},initialRoute:u="/",onGenerateRoute:d=null,onUnknownRoute:h=null,navigatorObservers:c=[],localizationsDelegates:g=[],supportedLocales:p=[{language:"en"}],locale:f=null,builder:m=null,color:y=null}={}){super(t),this.title=e,this.theme=o||s.light(),this.darkTheme=r||s.dark(),this.themeMode=n,this.color=y,this.home=i,this.routes=a,this.initialRoute=u,this.onGenerateRoute=d,this.onUnknownRoute=h,this.navigatorObservers=c,this.localizationsDelegates=g,this.supportedLocales=p,this.locale=f,this.builder=m,this.navigator=new C({routes:this.routes,initialRoute:this.initialRoute,onGenerateRoute:this.onGenerateRoute,onUnknownRoute:this.onUnknownRoute}),this.home&&(this.navigator.routes["/"]=R=>this.home),typeof document<"u"&&(document.title=this.title)}_getTheme(){return this.themeMode==="dark"?this.darkTheme:this.themeMode==="light"?this.theme:typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?this.darkTheme:this.theme:this.theme}_applyTheme(t){if(typeof document>"u")return;const e=document.documentElement;e.style.setProperty("--primary-color",t.primaryColor),e.style.setProperty("--accent-color",t.accentColor),e.style.setProperty("--scaffold-bg",t.scaffoldBackgroundColor),e.style.setProperty("--card-color",t.cardColor),e.style.setProperty("--divider-color",t.dividerColor),e.style.setProperty("--font-family",t.fontFamily),e.style.setProperty("--text-color",t.brightness==="dark"?"#FFF":"#000"),document.body.style.backgroundColor=t.scaffoldBackgroundColor,document.body.style.fontFamily=t.fontFamily,document.body.style.color=t.brightness==="dark"?"#FFF":"#000"}build(t){console.log("\u{1F50D} MaterialApp.build() START");const e=this._getTheme();this._applyTheme(e);let o=this.navigator.getCurrentPage(t);console.log("\u{1F4C4} Current page widget:",o?.constructor?.name),o||(console.warn("\u26A0\uFE0F No page widget found, using error page"),o=this._buildErrorPage());let r=null;if(o)if(o.tag!==void 0)console.log("\u2705 pageWidget is already a VNode"),r=o;else if(typeof o.build=="function"){console.log("\u{1F504} pageWidget is a Widget, building recursively:",o.constructor.name);try{r=o.build(t),console.log("\u2705 pageWidget.build() returned:",{type:typeof r,hasTag:r?.tag!==void 0,constructor:r?.constructor?.name})}catch(i){console.error("\u274C Error building pageWidget:",i),r=this._buildErrorVNode(`Error: ${i.message}`)}}else typeof o=="string"||typeof o=="number"?(console.log("\u{1F4DD} pageWidget is text:",o),r=new l({tag:"p",props:{},children:[String(o)]})):(console.error("\u274C Unknown pageWidget type:",o?.constructor?.name),r=this._buildErrorVNode("Unknown page widget type"));if(this.builder&&r){console.log("\u{1F381} Applying builder wrapper");const i=this.builder(t,o);i&&(r=i)}const n=new l({tag:"div",props:{style:{width:"100%",height:"100%",backgroundColor:e.scaffoldBackgroundColor,color:e.brightness==="dark"?"#FFF":"#000",fontFamily:e.fontFamily,margin:0,padding:0,boxSizing:"border-box",minHeight:"100vh"},"data-app":"MaterialApp","data-theme":e.brightness},children:r?[r]:[]});return console.log("\u2705 MaterialApp.build() returning VNode with tag:",n.tag),n}_buildErrorPage(){return new F({build:t=>this._buildErrorVNode(`Route not found: ${this.navigator.currentRoute}`)})}_buildErrorVNode(t){return new l({tag:"div",props:{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column"}},children:[new l({tag:"h1",props:{style:{color:"#d32f2f"}},children:["Error"]}),new l({tag:"p",props:{style:{color:"#666"}},children:[t]})]})}}export{w as MaterialApp,C as Navigator,k as Route,s as ThemeData};
//# sourceMappingURL=material_app.js.map
