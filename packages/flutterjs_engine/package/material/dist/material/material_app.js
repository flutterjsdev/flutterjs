import{StatelessWidget as b,ErrorWidget as w}from"../core/widget_element.js";import{VNode as S}from"@flutterjs/vdom/vnode";import{StatefulElement as R,StatelessElement as k}from"@flutterjs/runtime";class u{constructor({brightness:e="light",primaryColor:o="#2196F3",primarySwatch:t=null,accentColor:r="#FF4081",scaffoldBackgroundColor:n="#FAFAFA",canvasColor:a="#FFF",cardColor:c="#FFF",dividerColor:l="rgba(0, 0, 0, 0.12)",highlightColor:g="rgba(0, 0, 0, 0.05)",splashColor:h="rgba(0, 0, 0, 0.2)",selectedRowColor:m="#F5F5F5",unselectedWidgetColor:f="rgba(0, 0, 0, 0.54)",disabledColor:p="rgba(0, 0, 0, 0.38)",textTheme:d=null,fontFamily:i='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI"',appBarTheme:y=null}={}){console.log("\u{1F3A8} ThemeData constructor called",{primaryColor:o,primarySwatch:t}),this.brightness=e,this.primaryColor=o,this.primarySwatch=t,this.accentColor=r,this.scaffoldBackgroundColor=n,this.canvasColor=a,this.cardColor=c,this.dividerColor=l,this.highlightColor=g,this.splashColor=h,this.selectedRowColor=m,this.unselectedWidgetColor=f,this.disabledColor=p,this.textTheme=d,this.fontFamily=i,this.appBarTheme=y;const s=e==="dark"?"#FFFFFF":"#000000";this.textTheme=d||{displayLarge:{fontFamily:i,fontSize:57,fontWeight:"400",color:s},displayMedium:{fontFamily:i,fontSize:45,fontWeight:"400",color:s},displaySmall:{fontFamily:i,fontSize:36,fontWeight:"400",color:s},headlineLarge:{fontFamily:i,fontSize:32,fontWeight:"400",color:s},headlineMedium:{fontFamily:i,fontSize:28,fontWeight:"400",color:s},headlineSmall:{fontFamily:i,fontSize:24,fontWeight:"400",color:s},titleLarge:{fontFamily:i,fontSize:22,fontWeight:"400",color:s},titleMedium:{fontFamily:i,fontSize:16,fontWeight:"500",color:s},titleSmall:{fontFamily:i,fontSize:14,fontWeight:"500",color:s},bodyLarge:{fontFamily:i,fontSize:16,fontWeight:"400",color:s},bodyMedium:{fontFamily:i,fontSize:14,fontWeight:"400",color:s},bodySmall:{fontFamily:i,fontSize:12,fontWeight:"400",color:s},labelLarge:{fontFamily:i,fontSize:14,fontWeight:"500",color:s},labelMedium:{fontFamily:i,fontSize:12,fontWeight:"500",color:s},labelSmall:{fontFamily:i,fontSize:11,fontWeight:"500",color:s}}}static dark(){return new u({brightness:"dark",primaryColor:"#1F1F1F",scaffoldBackgroundColor:"#121212",canvasColor:"#1E1E1E",cardColor:"#2C2C2C",dividerColor:"rgba(255, 255, 255, 0.12)",unselectedWidgetColor:"rgba(255, 255, 255, 0.70)"})}static light(){return new u({brightness:"light",primaryColor:"#2196F3",scaffoldBackgroundColor:"#FAFAFA",canvasColor:"#FFF",cardColor:"#FFF"})}}class E{constructor({name:e="/",builder:o=null,settings:t={}}={}){this.name=e,this.builder=o,this.settings=t}}class C{constructor({routes:e={},initialRoute:o="/",onGenerateRoute:t=null,onUnknownRoute:r=null}={}){this.routes=e,this.initialRoute=o,this.onGenerateRoute=t,this.onUnknownRoute=r,this.routeStack=[],this.currentRoute=o}pushNamed(e,{arguments:o=null}={}){this.currentRoute=e,this.routeStack.push(e)}pop(){return this.routeStack.length>1?(this.routeStack.pop(),this.currentRoute=this.routeStack[this.routeStack.length-1],!0):!1}getCurrentPage(e){const o=this.currentRoute;if(this.routes[o])return this.routes[o](e);if(this.onGenerateRoute){const t={name:o},r=this.onGenerateRoute(t);if(r)return r.builder(e)}if(this.onUnknownRoute){const t={name:o};return this.onUnknownRoute(t).builder(e)}return null}}class P extends b{constructor({key:e=null,title:o="",theme:t=null,darkTheme:r=null,themeMode:n="system",home:a=null,routes:c={},initialRoute:l="/",onGenerateRoute:g=null,onUnknownRoute:h=null,navigatorObservers:m=[],localizationsDelegates:f=[],supportedLocales:p=[{language:"en"}],locale:d=null,builder:i=null,color:y=null}={}){super(e),this.title=o,console.log("\u{1F3D7}\uFE0F MaterialApp constructor - theme passed:",t),this.theme=t||u.light(),this.darkTheme=r||u.dark(),this.themeMode=n,this.color=y,this.home=a,this.routes=c,this.initialRoute=l,this.onGenerateRoute=g,this.onUnknownRoute=h,this.navigatorObservers=m,this.localizationsDelegates=f,this.supportedLocales=p,this.locale=d,this.builder=i,this.navigator=new C({routes:this.routes,initialRoute:this.initialRoute,onGenerateRoute:this.onGenerateRoute,onUnknownRoute:this.onUnknownRoute}),this.home&&(this.navigator.routes["/"]=W=>this.home),typeof document<"u"&&(document.title=this.title)}_getTheme(){return this.themeMode==="dark"?this.darkTheme:this.themeMode==="light"?this.theme:typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?this.darkTheme:this.theme:this.theme}_applyTheme(e){if(typeof document>"u")return;console.log("\u{1F58C}\uFE0F _applyTheme called. Primary:",e.primaryColor,"Card:",e.cardColor);const o=e.primaryColor||"#2196F3",t=e.cardColor||"#FFFFFF",r=e.scaffoldBackgroundColor||"#FAFAFA",n="#FFFFFF",a=e.brightness==="dark"?"#FFFFFF":"#000000",c=e.brightness==="dark"?"#FFFFFF":"#000000",l=document.documentElement;l.style.setProperty("--primary-color",o),l.style.setProperty("--accent-color",e.accentColor||"#FF4081"),l.style.setProperty("--scaffold-bg",r),l.style.setProperty("--card-color",t),l.style.setProperty("--divider-color",e.dividerColor),l.style.setProperty("--font-family",e.fontFamily),l.style.setProperty("--text-color",a),l.style.setProperty("--md-sys-color-primary",o),l.style.setProperty("--md-sys-color-on-primary",n),l.style.setProperty("--md-sys-color-surface",t),l.style.setProperty("--md-sys-color-on-surface",a),l.style.setProperty("--md-sys-color-background",r),l.style.setProperty("--md-sys-color-on-background",c),document.body.style.backgroundColor=r,document.body.style.fontFamily=e.fontFamily,document.body.style.color=a}_isWidget(e){return!e||typeof e!="object"?!1:typeof e.build=="function"||typeof e.createState=="function"}_buildWidgetToVNode(e,o){if(console.log("\u{1F528} _buildWidgetToVNode called for:",e?.constructor?.name),!e)return console.log("  \u2192 widget is null, returning null"),null;if(e&&e.tag!==void 0)return console.log("  \u2192 Already a VNode"),e;if(typeof e=="string"||typeof e=="number")return console.log("  \u2192 String/number, converting"),String(e);if(this._isWidget(e)){console.log("  \u2192 Is a Widget, creating Element...");try{let t;if(typeof e.createState=="function"){console.log("    \u2192 StatefulWidget detected, creating StatefulElement");const r=o.runtime||o.element?.runtime;if(!r)throw new Error("Runtime not available in context");t=new R(e,null,r),console.log("    \u2192 StatefulElement created"),t.mounted||(console.log("    \u2192 Mounting element..."),t.mount(),console.log("    \u2192 Element mounted"),console.log("    \u2192 State._widget:",t.state?._widget?.constructor?.name),console.log("    \u2192 State.widget.title:",t.state?.widget?.title));const n=t.build();return console.log("    \u2192 StatefulElement.build() returned:",n?.tag||typeof n),this._isWidget(n)?(console.log("    \u2192 Result is still a widget, recursing..."),this._buildWidgetToVNode(n,{...o,runtime:r})):n}else if(typeof e.build=="function"){console.log("    \u2192 StatelessWidget detected, creating StatelessElement");const r=o.runtime||o.element?.runtime;if(!r)throw new Error("Runtime not available in context");t=new k(e,null,r),t.mounted||t.mount();const n=t.build();return console.log("    \u2192 StatelessElement.build() returned:",n?.tag||typeof n),this._isWidget(n)?(console.log("    \u2192 Result is still a widget, recursing..."),this._buildWidgetToVNode(n,{...o,runtime:r})):n}}catch(t){throw console.error("  \u274C Error building widget:",t),t}}return console.log("  \u2192 Unknown type, returning null"),null}build(e){console.log("\u{1F4D6} MaterialApp.build() START");const o=this._getTheme();this._applyTheme(o);let t=this.navigator.getCurrentPage(e);console.log("\u{1F4C4} Current page widget:",t?.constructor?.name),t||(console.warn("\u26A0\uFE0F No page widget found"),t=this._buildEmptyPage());let r;try{r=this._buildWidgetToVNode(t,e),console.log("\u2705 pageVNode after building:",r?.tag||typeof r)}catch(a){console.error("\u274C Failed to build page widget:",a),r=this._buildErrorPageVNode(a,e)}r||(console.error("\u274C pageVNode is null"),r=this._buildEmptyPageVNode());const n=new S({tag:"div",props:{style:{width:"100%",height:"100%",backgroundColor:o.scaffoldBackgroundColor,color:o.brightness==="dark"?"#FFF":"#000",fontFamily:o.fontFamily,margin:0,padding:0,boxSizing:"border-box",minHeight:"100vh"},"data-app":"MaterialApp","data-theme":o.brightness},children:[r]});return console.log("\u2705 MaterialApp.build() returning VNode"),n}_buildEmptyPage(){return new b({build:()=>this._buildEmptyPageVNode()})}_buildErrorPageVNode(e,o){const t=new w({message:`Application Error:
${e?.message||e?.toString()||"Unknown error"}`,error:e}),r=o?.runtime||o?.element?.runtime,n=new k(t,null,r);return n.mounted||n.mount(),n.build()}_buildEmptyPageVNode(){return new S({tag:"div",props:{style:{padding:"20px",textAlign:"center"}},children:["No page configured"]})}}export{P as MaterialApp,C as Navigator,E as Route,u as ThemeData};
//# sourceMappingURL=material_app.js.map
