import{StatefulWidget as T,Element as C}from"../core/widget_element.js";import{VNode as i}from"@flutterjs/vdom/vnode";const a={endFloat:"endFloat",endDocked:"endDocked",endTop:"endTop",startFloat:"startFloat",startDocked:"startDocked",startTop:"startTop",centerFloat:"centerFloat",centerDocked:"centerDocked",centerTop:"centerTop"},E={start:"start",end:"end"},w={hide:"hide",remove:"remove",timeout:"timeout",dismiss:"dismiss"};class x{constructor(e,t,r){this._widget=e,this._completer=t,this._close=r}get widget(){return this._widget}get closed(){return this._completer.promise}close(){this._completer.completed||this._completer.resolve(w.dismiss),this._close?.()}}class O{constructor({key:e=null,content:t=null,backgroundColor:r=null,elevation:o=6,margin:s=null,padding:l=null,width:d=null,shape:c=null,behavior:h="fixed",action:p=null,duration:u=4e3,animation:m=null,onVisible:f=null}={}){this.key=e,this.content=t,this.backgroundColor=r||"#323232",this.elevation=o,this.margin=s,this.padding=l,this.width=d,this.shape=c,this.behavior=h,this.action=p,this.duration=u,this.animation=m,this.onVisible=f}build(e){const t={backgroundColor:this.backgroundColor,padding:this.padding?`${this.padding}px`:"12px 16px",borderRadius:"4px",boxShadow:`0 ${this.elevation}px 16px rgba(0,0,0,0.12), 0 ${this.elevation}px 16px rgba(0,0,0,0.24)`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",color:"white",fontSize:"14px",minHeight:"48px",maxWidth:this.width?`${this.width}px`:"568px",position:this.behavior==="floating"?"fixed":"relative",zIndex:1e3};this.margin&&(t.margin=`${this.margin}px`);const o=[this.content?.createElement?.()?this.content.createElement().performRebuild():new i({tag:"span",children:[String(this.content)]})];if(this.action){const s={color:"#2196F3",cursor:"pointer",border:"none",background:"none",padding:"8px",fontSize:"14px",fontWeight:"bold"};o.push(new i({tag:"button",props:{style:s,onClick:this.action.onPressed},children:[this.action.label]}))}return new i({tag:"div",props:{style:t,"data-widget":"SnackBar"},children:o})}}class b extends C{constructor(e){super(e),this._snackBars=[],this._currentSnackBar=null,this._snackBarTimer=null,this._drawerOpen=!1,this._endDrawerOpen=!1,this._fabVisible=!0}showSnackBar(e){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null);const t={resolve:null,reject:null,completed:!1,promise:new Promise((o,s)=>{t.resolve=l=>{t.completed=!0,o(l)},t.reject=s})},r=new x(e,t,()=>this._hideSnackBar());return this._currentSnackBar=r,this._snackBars.push(r),this._snackBarTimer=setTimeout(()=>{t.completed||t.resolve(w.timeout),this._hideSnackBar()},e.duration),this.markNeedsBuild(),r}_hideSnackBar(){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null),this._snackBars.shift(),this._currentSnackBar=this._snackBars.length>0?this._snackBars[0]:null,this.markNeedsBuild()}closeSnackBar(){this._currentSnackBar&&this._currentSnackBar.close()}openDrawer(){this._drawerOpen=!0,this.markNeedsBuild()}closeDrawer(){this._drawerOpen=!1,this.markNeedsBuild()}toggleDrawer(){this._drawerOpen=!this._drawerOpen,this.markNeedsBuild()}openEndDrawer(){this._endDrawerOpen=!0,this.markNeedsBuild()}closeEndDrawer(){this._endDrawerOpen=!1,this.markNeedsBuild()}get isDrawerOpen(){return this._drawerOpen}get isEndDrawerOpen(){return this._endDrawerOpen}showFloatingActionButton(){this._fabVisible=!0,this.markNeedsBuild()}hideFloatingActionButton(){this._fabVisible=!1,this.markNeedsBuild()}performRebuild(){return this.widget.build(this.context)}}class F extends T{constructor({key:e=null,appBar:t=null,body:r=null,floatingActionButton:o=null,floatingActionButtonLocation:s=a.endFloat,drawer:l=null,endDrawer:d=null,bottomNavigationBar:c=null,backgroundColor:h=null,resizeToAvoidBottomInset:p=!0,extendBody:u=!1,extendBodyBehindAppBar:m=!1,primary:f=!0}={}){super(e),this.appBar=t,this.body=r,this.floatingActionButton=o,this.floatingActionButtonLocation=s,this.drawer=l,this.endDrawer=d,this.bottomNavigationBar=c,this.backgroundColor=h||"#ffffff",this.resizeToAvoidBottomInset=p,this.extendBody=u,this.extendBodyBehindAppBar=m,this.primary=f}static of(e){const t=e.findAncestorStateOfType?.(b);if(!t)throw new Error("Scaffold.of() called with a context that does not contain a Scaffold");return t}static maybeOf(e){return e?.findAncestorStateOfType?.(b)}build(e){const t=e.element.getElementId(),r=e.element.getWidgetPath();let o=this.appBar?56:0,s=o,l=this.bottomNavigationBar?56:0;this.extendBodyBehindAppBar&&(s=0);let d=null;if(this.appBar){const n=this.appBar.createElement();n.mount(e.element),d=n.performRebuild()}let c=null;if(this.body){const n=this.body.createElement();n.mount(e.element),c=n.performRebuild()}let h=null;if(this.bottomNavigationBar){const n=this.bottomNavigationBar.createElement();n.mount(e.element),h=n.performRebuild()}let p=null;if(this.floatingActionButton){const n=this.floatingActionButton.createElement();n.mount(e.element),p=n.performRebuild()}let u=null;if(this.drawer){const n=this.drawer.createElement();n.mount(e.element),u=n.performRebuild()}let m=null;if(this.endDrawer){const n=this.endDrawer.createElement();n.mount(e.element),m=n.performRebuild()}const f={display:"flex",flexDirection:"column",width:"100%",height:"100%",position:"relative",backgroundColor:this.backgroundColor},y={position:"fixed",top:0,left:0,right:0,height:`${o}px`,zIndex:100},v={flex:1,position:"relative",marginTop:`${s}px`,marginBottom:`${l}px`,overflowY:this.resizeToAvoidBottomInset?"auto":"visible",overflowX:"hidden"},S={position:"fixed",bottom:0,left:0,right:0,height:`${l}px`,backgroundColor:"#fff",borderTop:"1px solid #e0e0e0",zIndex:50},D=this._getFabContainerStyle(),B={position:"fixed",left:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(-100%)",transition:"transform 0.3s ease-out",display:this.drawer&&e.element?.state?._drawerOpen?"block":"none"};e.element?.state?._drawerOpen&&(B.transform="translateX(0)");const k={position:"fixed",right:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(100%)",transition:"transform 0.3s ease-out",display:this.endDrawer&&e.element?.state?._endDrawerOpen?"block":"none"};e.element?.state?._endDrawerOpen&&(k.transform="translateX(0)");const N={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:150,display:e.element?.state?._drawerOpen||e.element?.state?._endDrawerOpen?"block":"none",cursor:"pointer",onClick:()=>{e.element?.state?._drawerOpen&&e.element.state.closeDrawer(),e.element?.state?._endDrawerOpen&&e.element.state.closeEndDrawer()}};return new i({tag:"div",props:{style:f,"data-element-id":t,"data-widget-path":r,"data-widget":"Scaffold"},children:[...d?[new i({tag:"div",props:{style:y},children:[d]})]:[],...c?[new i({tag:"div",props:{style:v},children:[c]})]:[],...h?[new i({tag:"div",props:{style:S},children:[h]})]:[],...p?[new i({tag:"div",props:{style:D},children:[p]})]:[],new i({tag:"div",props:{style:N}}),...u?[new i({tag:"div",props:{style:B},children:[u]})]:[],...m?[new i({tag:"div",props:{style:k},children:[m]})]:[],...e.element?.state?._currentSnackBar?[new i({tag:"div",props:{style:{position:"fixed",bottom:"16px",left:"16px",right:"auto",zIndex:300,animation:"slideUp 0.3s ease-out"}},children:[e.element.state._currentSnackBar.widget.build(e)]})]:[]],key:this.key})}_getFabContainerStyle(){const e={position:"fixed",zIndex:250},t=16;switch(this.floatingActionButtonLocation){case a.endFloat:return{...e,bottom:`${t}px`,right:`${t}px`};case a.endDocked:return{...e,bottom:"72px",right:`${t}px`};case a.endTop:return{...e,top:"80px",right:`${t}px`};case a.startFloat:return{...e,bottom:`${t}px`,left:`${t}px`};case a.startDocked:return{...e,bottom:"72px",left:`${t}px`};case a.startTop:return{...e,top:"80px",left:`${t}px`};case a.centerFloat:return{...e,bottom:`${t}px`,left:"50%",transform:"translateX(-50%)"};case a.centerDocked:return{...e,bottom:"72px",left:"50%",transform:"translateX(-50%)"};case a.centerTop:return{...e,top:"80px",left:"50%",transform:"translateX(-50%)"};default:return{...e,bottom:`${t}px`,right:`${t}px`}}}debugFillProperties(e){super.debugFillProperties(e),e.push({name:"appBar",value:this.appBar?"AppBar":"null"}),e.push({name:"body",value:this.body?"Widget":"null"}),e.push({name:"floatingActionButton",value:this.floatingActionButton?"FAB":"null"}),e.push({name:"drawer",value:this.drawer?"Drawer":"null"}),e.push({name:"bottomNavigationBar",value:this.bottomNavigationBar?"BottomNav":"null"})}createElement(){return new _(this)}}class _ extends b{constructor(e){super(e)}mount(e=null){super.mount(e)}build(e){return this.widget.build(this.context)}}export{E as DrawerAlignment,a as FloatingActionButtonLocation,F as Scaffold,_ as ScaffoldElement,x as ScaffoldFeatureController,b as ScaffoldState,O as SnackBar,w as SnackBarClosedReason};
//# sourceMappingURL=scffold_basic.js.map
