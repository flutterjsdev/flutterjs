import{StatefulWidget as T,Element as F}from"../core/widget_element.js";import{VNode as r}from"@flutterjs/vdom/vnode";const a={endFloat:"endFloat",endDocked:"endDocked",endTop:"endTop",startFloat:"startFloat",startDocked:"startDocked",startTop:"startTop",centerFloat:"centerFloat",centerDocked:"centerDocked",centerTop:"centerTop"},C={start:"start",end:"end"},w={hide:"hide",remove:"remove",timeout:"timeout",dismiss:"dismiss"};class k{constructor(t,e,o){this._widget=t,this._completer=e,this._close=o}get widget(){return this._widget}get closed(){return this._completer.promise}close(){this._completer.completed||this._completer.resolve(w.dismiss),this._close?.()}}class E{constructor({key:t=null,content:e=null,backgroundColor:o=null,elevation:i=6,margin:s=null,padding:l=null,width:d=null,shape:c=null,behavior:p="fixed",action:h=null,duration:u=4e3,animation:m=null,onVisible:g=null}={}){this.key=t,this.content=e,this.backgroundColor=o||"#323232",this.elevation=i,this.margin=s,this.padding=l,this.width=d,this.shape=c,this.behavior=p,this.action=h,this.duration=u,this.animation=m,this.onVisible=g}build(t){const e={backgroundColor:this.backgroundColor,padding:this.padding?`${this.padding}px`:"12px 16px",borderRadius:"4px",boxShadow:`0 ${this.elevation}px 16px rgba(0,0,0,0.12), 0 ${this.elevation}px 16px rgba(0,0,0,0.24)`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",color:"white",fontSize:"14px",minHeight:"48px",maxWidth:this.width?`${this.width}px`:"568px",position:this.behavior==="floating"?"fixed":"relative",zIndex:1e3};this.margin&&(e.margin=`${this.margin}px`);const i=[this.content?.createElement?.()?this.content.createElement().performRebuild():new r({tag:"span",children:[String(this.content)]})];if(this.action){const s={color:"#2196F3",cursor:"pointer",border:"none",background:"none",padding:"8px",fontSize:"14px",fontWeight:"bold"};i.push(new r({tag:"button",props:{style:s,onClick:this.action.onPressed},children:[this.action.label]}))}return new r({tag:"div",props:{style:e,"data-widget":"SnackBar"},children:i})}}class b extends F{constructor(t){super(t),this._snackBars=[],this._currentSnackBar=null,this._snackBarTimer=null,this._drawerOpen=!1,this._endDrawerOpen=!1,this._fabVisible=!0}showSnackBar(t){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null);const e={resolve:null,reject:null,completed:!1,promise:new Promise((i,s)=>{e.resolve=l=>{e.completed=!0,i(l)},e.reject=s})},o=new k(t,e,()=>this._hideSnackBar());return this._currentSnackBar=o,this._snackBars.push(o),this._snackBarTimer=setTimeout(()=>{e.completed||e.resolve(w.timeout),this._hideSnackBar()},t.duration),this.markNeedsBuild(),o}_hideSnackBar(){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null),this._snackBars.shift(),this._currentSnackBar=this._snackBars.length>0?this._snackBars[0]:null,this.markNeedsBuild()}closeSnackBar(){this._currentSnackBar&&this._currentSnackBar.close()}openDrawer(){this._drawerOpen=!0,this.markNeedsBuild()}closeDrawer(){this._drawerOpen=!1,this.markNeedsBuild()}toggleDrawer(){this._drawerOpen=!this._drawerOpen,this.markNeedsBuild()}openEndDrawer(){this._endDrawerOpen=!0,this.markNeedsBuild()}closeEndDrawer(){this._endDrawerOpen=!1,this.markNeedsBuild()}get isDrawerOpen(){return this._drawerOpen}get isEndDrawerOpen(){return this._endDrawerOpen}showFloatingActionButton(){this._fabVisible=!0,this.markNeedsBuild()}hideFloatingActionButton(){this._fabVisible=!1,this.markNeedsBuild()}performRebuild(){return this.widget.build(this.context)}}class O extends T{constructor({key:t=null,appBar:e=null,body:o=null,floatingActionButton:i=null,floatingActionButtonLocation:s=a.endFloat,drawer:l=null,endDrawer:d=null,bottomNavigationBar:c=null,backgroundColor:p=null,resizeToAvoidBottomInset:h=!0,extendBody:u=!1,extendBodyBehindAppBar:m=!1,primary:g=!0}={}){super(t),this.appBar=e,this.body=o,this.floatingActionButton=i,this.floatingActionButtonLocation=s,this.drawer=l,this.endDrawer=d,this.bottomNavigationBar=c,this.backgroundColor=p||"#ffffff",this.resizeToAvoidBottomInset=h,this.extendBody=u,this.extendBodyBehindAppBar=m,this.primary=g}static of(t){const e=t.findAncestorStateOfType?.(b);if(!e)throw new Error("Scaffold.of() called with a context that does not contain a Scaffold");return e}static maybeOf(t){return t?.findAncestorStateOfType?.(b)}build(t){const e=t.element.getElementId(),o=t.element.getWidgetPath();let i=this.appBar?56:0,s=i,l=this.bottomNavigationBar?56:0;this.extendBodyBehindAppBar&&(s=0);let d=null;if(this.appBar){const n=this.appBar.createElement();n.mount(t.element),d=n.performRebuild()}let c=null;if(this.body){const n=this.body.createElement();n.mount(t.element),c=n.performRebuild()}let p=null;if(this.bottomNavigationBar){const n=this.bottomNavigationBar.createElement();n.mount(t.element),p=n.performRebuild()}let h=null;if(this.floatingActionButton){const n=this.floatingActionButton.createElement();n.mount(t.element),h=n.performRebuild()}let u=null;if(this.drawer){const n=this.drawer.createElement();n.mount(t.element),u=n.performRebuild()}let m=null;if(this.endDrawer){const n=this.endDrawer.createElement();n.mount(t.element),m=n.performRebuild()}const g={display:"flex",flexDirection:"column",width:"100%",height:"100%",position:"relative",backgroundColor:this.backgroundColor},y={position:"fixed",top:0,left:0,right:0,height:`${i}px`,zIndex:100},v={flex:1,position:"relative",marginTop:`${s}px`,marginBottom:`${l}px`,overflowY:this.resizeToAvoidBottomInset?"auto":"visible",overflowX:"hidden"},S={position:"fixed",bottom:0,left:0,right:0,height:`${l}px`,backgroundColor:"#fff",borderTop:"1px solid #e0e0e0",zIndex:50},D=this._getFabContainerStyle(),B={position:"fixed",left:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(-100%)",transition:"transform 0.3s ease-out",display:this.drawer&&t.element?.state?._drawerOpen?"block":"none"};t.element?.state?._drawerOpen&&(B.transform="translateX(0)");const x={position:"fixed",right:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(100%)",transition:"transform 0.3s ease-out",display:this.endDrawer&&t.element?.state?._endDrawerOpen?"block":"none"};t.element?.state?._endDrawerOpen&&(x.transform="translateX(0)");const N={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:150,display:t.element?.state?._drawerOpen||t.element?.state?._endDrawerOpen?"block":"none",cursor:"pointer",onClick:()=>{t.element?.state?._drawerOpen&&t.element.state.closeDrawer(),t.element?.state?._endDrawerOpen&&t.element.state.closeEndDrawer()}};return new r({tag:"div",props:{style:g,"data-element-id":e,"data-widget-path":o,"data-widget":"Scaffold"},children:[...d?[new r({tag:"div",props:{style:y},children:[d]})]:[],...c?[new r({tag:"div",props:{style:v},children:[c]})]:[],...p?[new r({tag:"div",props:{style:S},children:[p]})]:[],...h?[new r({tag:"div",props:{style:D},children:[h]})]:[],new r({tag:"div",props:{style:N}}),...u?[new r({tag:"div",props:{style:B},children:[u]})]:[],...m?[new r({tag:"div",props:{style:x},children:[m]})]:[],...t.element?.state?._currentSnackBar?[new r({tag:"div",props:{style:{position:"fixed",bottom:"16px",left:"16px",right:"auto",zIndex:300,animation:"slideUp 0.3s ease-out"}},children:[t.element.state._currentSnackBar.widget.build(t)]})]:[]],key:this.key})}_getFabContainerStyle(){const t={position:"fixed",zIndex:250},e=16;switch(this.floatingActionButtonLocation){case a.endFloat:return{...t,bottom:`${e}px`,right:`${e}px`};case a.endDocked:return{...t,bottom:"72px",right:`${e}px`};case a.endTop:return{...t,top:"80px",right:`${e}px`};case a.startFloat:return{...t,bottom:`${e}px`,left:`${e}px`};case a.startDocked:return{...t,bottom:"72px",left:`${e}px`};case a.startTop:return{...t,top:"80px",left:`${e}px`};case a.centerFloat:return{...t,bottom:`${e}px`,left:"50%",transform:"translateX(-50%)"};case a.centerDocked:return{...t,bottom:"72px",left:"50%",transform:"translateX(-50%)"};case a.centerTop:return{...t,top:"80px",left:"50%",transform:"translateX(-50%)"};default:return{...t,bottom:`${e}px`,right:`${e}px`}}}debugFillProperties(t){super.debugFillProperties(t),t.push({name:"appBar",value:this.appBar?"AppBar":"null"}),t.push({name:"body",value:this.body?"Widget":"null"}),t.push({name:"floatingActionButton",value:this.floatingActionButton?"FAB":"null"}),t.push({name:"drawer",value:this.drawer?"Drawer":"null"}),t.push({name:"bottomNavigationBar",value:this.bottomNavigationBar?"BottomNav":"null"})}createElement(){return new _(this)}}class _ extends b{constructor(t){super(t)}mount(t=null){super.mount(t)}build(t){return this.widget.build(this.context)}}class A extends StatelessWidget{constructor({title:t,backgroundColor:e}={}){super({title:t,backgroundColor:e}),this.title=t,this.backgroundColor=e}build(t){return new r("div",{className:"flutter-appbar",style:{backgroundColor:this.backgroundColor||"var(--md-sys-color-primary)",color:"#FFFFFF",padding:"16px",fontSize:"20px",fontWeight:"bold"}},[this.title])}}export{A as AppBar,C as DrawerAlignment,a as FloatingActionButtonLocation,O as Scaffold,_ as ScaffoldElement,k as ScaffoldFeatureController,b as ScaffoldState,E as SnackBar,w as SnackBarClosedReason};
//# sourceMappingURL=scffold_basic.js.map
