import{StatelessWidget as N,Widget as T}from"../core/widget_element.js";import{Element as E}from"@flutterjs/runtime";import{VNode as r}from"@flutterjs/vdom/vnode";const o={endFloat:"endFloat",endDocked:"endDocked",endTop:"endTop",startFloat:"startFloat",startDocked:"startDocked",startTop:"startTop",centerFloat:"centerFloat",centerDocked:"centerDocked",centerTop:"centerTop"},F={start:"start",end:"end"},w={hide:"hide",remove:"remove",timeout:"timeout",dismiss:"dismiss"};class _{constructor(e,t,n){this._widget=e,this._completer=t,this._close=n}get widget(){return this._widget}get closed(){return this._completer.promise}close(){this._completer.completed||this._completer.resolve(w.dismiss),this._close?.()}}class O{constructor({key:e=null,content:t=null,backgroundColor:n=null,elevation:a=6,margin:s=null,padding:l=null,width:d=null,shape:h=null,behavior:p="fixed",action:u=null,duration:m=4e3,animation:c=null,onVisible:g=null}={}){this.key=e,this.content=t,this.backgroundColor=n||"#323232",this.elevation=a,this.margin=s,this.padding=l,this.width=d,this.shape=h,this.behavior=p,this.action=u,this.duration=m,this.animation=c,this.onVisible=g}build(e){const t={backgroundColor:this.backgroundColor,padding:this.padding?`${this.padding}px`:"12px 16px",borderRadius:"4px",boxShadow:`0 ${this.elevation}px 16px rgba(0,0,0,0.12), 0 ${this.elevation}px 16px rgba(0,0,0,0.24)`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",color:"white",fontSize:"14px",minHeight:"48px",maxWidth:this.width?`${this.width}px`:"568px",position:this.behavior==="floating"?"fixed":"relative",zIndex:1e3};this.margin&&(t.margin=`${this.margin}px`);const a=[this.content?.createElement?.(e.element,e.element.runtime)?this.content.createElement(e.element,e.element.runtime).performRebuild():new r({tag:"span",children:[String(this.content)]})];if(this.action){const s={color:"#2196F3",cursor:"pointer",border:"none",background:"none",padding:"8px",fontSize:"14px",fontWeight:"bold"};a.push(new r({tag:"button",props:{style:s,onClick:this.action.onPressed},children:[this.action.label]}))}return new r({tag:"div",props:{style:t,"data-widget":"SnackBar"},children:a})}}class b extends E{constructor(e,t=null,n=null){super(e,t,n),this._snackBars=[],this._currentSnackBar=null,this._snackBarTimer=null,this._drawerOpen=!1,this._endDrawerOpen=!1,this._fabVisible=!0}showSnackBar(e){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null);const t={resolve:null,reject:null,completed:!1,promise:new Promise((a,s)=>{t.resolve=l=>{t.completed=!0,a(l)},t.reject=s})},n=new _(e,t,()=>this._hideSnackBar());return this._currentSnackBar=n,this._snackBars.push(n),this._snackBarTimer=setTimeout(()=>{t.completed||t.resolve(w.timeout),this._hideSnackBar()},e.duration),this.markNeedsBuild(),n}_hideSnackBar(){this._snackBarTimer&&(clearTimeout(this._snackBarTimer),this._snackBarTimer=null),this._snackBars.shift(),this._currentSnackBar=this._snackBars.length>0?this._snackBars[0]:null,this.markNeedsBuild()}closeSnackBar(){this._currentSnackBar&&this._currentSnackBar.close()}openDrawer(){this._drawerOpen=!0,this.markNeedsBuild()}closeDrawer(){this._drawerOpen=!1,this.markNeedsBuild()}toggleDrawer(){this._drawerOpen=!this._drawerOpen,this.markNeedsBuild()}openEndDrawer(){this._endDrawerOpen=!0,this.markNeedsBuild()}closeEndDrawer(){this._endDrawerOpen=!1,this.markNeedsBuild()}get isDrawerOpen(){return this._drawerOpen}get isEndDrawerOpen(){return this._endDrawerOpen}showFloatingActionButton(){this._fabVisible=!0,this.markNeedsBuild()}hideFloatingActionButton(){this._fabVisible=!1,this.markNeedsBuild()}performRebuild(){return this.widget.build(this.context)}}class $ extends T{constructor({key:e=null,appBar:t=null,body:n=null,floatingActionButton:a=null,floatingActionButtonLocation:s=o.endFloat,drawer:l=null,endDrawer:d=null,bottomNavigationBar:h=null,backgroundColor:p=null,resizeToAvoidBottomInset:u=!0,extendBody:m=!1,extendBodyBehindAppBar:c=!1,primary:g=!0}={}){super(e),this.appBar=t,this.body=n,this.floatingActionButton=a,this.floatingActionButtonLocation=s,this.drawer=l,this.endDrawer=d,this.bottomNavigationBar=h,this.backgroundColor=p||"#ffffff",this.resizeToAvoidBottomInset=u,this.extendBody=m,this.extendBodyBehindAppBar=c,this.primary=g}static of(e){const t=e.findAncestorStateOfType?.(b);if(!t)throw new Error("Scaffold.of() called with a context that does not contain a Scaffold");return t}static maybeOf(e){return e?.findAncestorStateOfType?.(b)}build(e){const t=e.element.getElementId(),n=e.element.getWidgetPath();console.log(`[Scaffold] \u{1F3D7}\uFE0F Building Scaffold ${t} at ${n}`);let a=this.appBar?56:0,s=a,l=this.bottomNavigationBar?56:0;this.extendBodyBehindAppBar&&(s=0);let d=null;if(this.appBar){let i=this.appBar.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),d=i.vnode}let h=null;if(this.body){let i=this.body.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),h=i.vnode}let p=null;if(this.bottomNavigationBar){let i=this.bottomNavigationBar.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),p=i.vnode}let u=null;if(this.floatingActionButton){let i=this.floatingActionButton.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),u=i.vnode}let m=null;if(this.drawer){let i=this.drawer.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),m=i.vnode}let c=null;if(this.endDrawer){let i=this.endDrawer.createElement(e.element,e.element.runtime);e.element.addChild(i),i.mount(),c=i.vnode}const g={display:"flex",flexDirection:"column",width:"100%",minHeight:"100vh",height:"100%",position:"relative",backgroundColor:this.backgroundColor,boxSizing:"border-box",margin:0,padding:0},y={position:"fixed",top:0,left:0,right:0,height:`${a}px`,zIndex:100},v={flex:1,position:"relative",marginTop:`${s}px`,marginBottom:`${l}px`,overflowY:this.resizeToAvoidBottomInset?"auto":"visible",overflowX:"hidden",width:"100%",display:"flex",flexDirection:"column"},S={position:"fixed",bottom:0,left:0,right:0,height:`${l}px`,backgroundColor:"#fff",borderTop:"1px solid #e0e0e0",zIndex:50},D=this._getFabContainerStyle(),B={position:"fixed",left:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(-100%)",transition:"transform 0.3s ease-out",display:this.drawer&&e.element?.state?._drawerOpen?"block":"none"};e.element?.state?._drawerOpen&&(B.transform="translateX(0)");const k={position:"fixed",right:0,top:0,bottom:0,width:"256px",backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0,0,0,0.12)",zIndex:200,transform:"translateX(100%)",transition:"transform 0.3s ease-out",display:this.endDrawer&&e.element?.state?._endDrawerOpen?"block":"none"};e.element?.state?._endDrawerOpen&&(k.transform="translateX(0)");const C={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:150,display:e.element?.state?._drawerOpen||e.element?.state?._endDrawerOpen?"block":"none",cursor:"pointer",onClick:()=>{e.element?.state?._drawerOpen&&e.element.state.closeDrawer(),e.element?.state?._endDrawerOpen&&e.element.state.closeEndDrawer()}};return new r({tag:"div",props:{style:g,"data-element-id":t,"data-widget-path":n,"data-widget":"Scaffold"},children:[...d?[new r({tag:"div",props:{style:y},children:[d]})]:[],...h?[new r({tag:"div",props:{style:v},children:[h]})]:[],...p?[new r({tag:"div",props:{style:S},children:[p]})]:[],...u?[new r({tag:"div",props:{style:D},children:[u]})]:[],new r({tag:"div",props:{style:C}}),...m?[new r({tag:"div",props:{style:B},children:[m]})]:[],...c?[new r({tag:"div",props:{style:k},children:[c]})]:[],...e.element?.state?._currentSnackBar?[new r({tag:"div",props:{style:{position:"fixed",bottom:"16px",left:"16px",right:"auto",zIndex:300,animation:"slideUp 0.3s ease-out"}},children:[e.element.state._currentSnackBar.widget.build(e)]})]:[]],key:this.key})}_getFabContainerStyle(){const e={position:"absolute",zIndex:250},t=16;switch(this.floatingActionButtonLocation){case o.endFloat:return{...e,bottom:`${t}px`,right:`${t}px`};case o.endDocked:return{...e,bottom:"72px",right:`${t}px`};case o.endTop:return{...e,top:"80px",right:`${t}px`};case o.startFloat:return{...e,bottom:`${t}px`,left:`${t}px`};case o.startDocked:return{...e,bottom:"72px",left:`${t}px`};case o.startTop:return{...e,top:"80px",left:`${t}px`};case o.centerFloat:return{...e,bottom:`${t}px`,left:"50%",transform:"translateX(-50%)"};case o.centerDocked:return{...e,bottom:"72px",left:"50%",transform:"translateX(-50%)"};case o.centerTop:return{...e,top:"80px",left:"50%",transform:"translateX(-50%)"};default:return{...e,bottom:`${t}px`,right:`${t}px`}}}debugFillProperties(e){super.debugFillProperties(e),e.push({name:"appBar",value:this.appBar?"AppBar":"null"}),e.push({name:"body",value:this.body?"Widget":"null"}),e.push({name:"floatingActionButton",value:this.floatingActionButton?"FAB":"null"}),e.push({name:"drawer",value:this.drawer?"Drawer":"null"}),e.push({name:"bottomNavigationBar",value:this.bottomNavigationBar?"BottomNav":"null"})}createElement(e,t){return new x(this,e,t)}}class x extends b{constructor(e,t,n){super(e,t,n)}mount(e=null){this._context={element:this,runtime:this.runtime,parent:e||this.parent,findAncestorStateOfType:t=>{let n=e||this.parent;for(;n;){if(n instanceof t)return n;n=n.parent}return null}},super.mount(e)}getElementId(){return this._elementId||(this._elementId=`scaffold-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)}getWidgetPath(){const e=[];let t=this;for(;t;)t.widget&&e.unshift(t.widget.constructor.name),t=t.parent;return e.join("/")}performRebuild(){return this.mounted||this.mount(),this.context||(this._context={element:this,runtime:this.runtime,parent:this.parent}),this.widget.build(this.context)}build(e){return e&&(this._context=e),this.performRebuild()}markNeedsBuild(){this.runtime&&this.runtime.update&&this.runtime.update()}}class A extends N{constructor({title:e,backgroundColor:t,leading:n,actions:a}={}){super(),this.title=e,this.backgroundColor=t,this.leading=n,this.actions=a}build(e){let t=null;if(this.title)if(this.title.createElement){let n=this.title.createElement(e.element,e.element.runtime);e.element.addChild(n),n.mount(),t=n.vnode}else t=new r({tag:"span",children:[String(this.title)]});return new r({tag:"div",props:{className:"flutter-appbar","data-widget":"AppBar"},style:{backgroundColor:this.backgroundColor||"var(--md-sys-color-primary)",color:"#FFFFFF",padding:"16px",fontSize:"20px",fontWeight:"bold",display:"flex",alignItems:"center",minHeight:"56px"},children:t?[t]:[]})}}export{A as AppBar,F as DrawerAlignment,o as FloatingActionButtonLocation,$ as Scaffold,x as ScaffoldElement,_ as ScaffoldFeatureController,b as ScaffoldState,O as SnackBar,w as SnackBarClosedReason};
//# sourceMappingURL=scffold_basic.js.map
