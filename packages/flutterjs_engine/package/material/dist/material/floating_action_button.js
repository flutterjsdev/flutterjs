import{StatelessWidget as h,Element as k}from"../core/widget_element.js";import{VNode as r}from"@flutterjs/vdom/vnode";import{GestureDetector as m}from"./gesture_detector.js";class E extends h{constructor({key:e=null,onPressed:n=null,onLongPress:o=null,tooltip:s=null,foregroundColor:a="#FFF",backgroundColor:l=null,focusColor:i=null,hoverColor:t=null,splashColor:u=null,elevation:d=6,highlightElevation:c=12,disabledElevation:p=0,child:g=null,mini:y=!1,shape:v=null,clipBehavior:x="clip",autofocus:C=!1,materialTapTargetSize:P=null,isExtended:w=!1,enableFeedback:_=!0,heroTag:F="FloatingActionButton"}={}){if(super(e),!n)throw new Error("FloatingActionButton requires onPressed callback");this.onPressed=n,this.onLongPress=o,this.tooltip=s,this.foregroundColor=a,this.backgroundColor=l||this._getDefaultBackgroundColor(),this.focusColor=i,this.hoverColor=t,this.splashColor=u,this.elevation=d,this.highlightElevation=c,this.disabledElevation=p,this.child=g,this.mini=y,this.shape=v,this.clipBehavior=x,this.autofocus=C,this.materialTapTargetSize=P,this.isExtended=w,this.enableFeedback=_,this.heroTag=F,this._isHovered=!1,this._isPressed=!1}_getDefaultBackgroundColor(){return typeof window<"u"?(getComputedStyle(document.documentElement).getPropertyValue("--primary-color")||"#2196F3").trim():"#2196F3"}_getButtonSize(){return this.mini?40:56}_getButtonStyle(){const e=this._getButtonSize(),n=this._isPressed?this.highlightElevation:this.elevation;return{position:"relative",width:`${e}px`,height:`${e}px`,borderRadius:"50%",backgroundColor:this.backgroundColor,color:this.foregroundColor,border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:`0 ${n}px ${n*1.5}px rgba(0, 0, 0, 0.${n})`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",fontFamily:"inherit",fontSize:"24px",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}}_getRippleStyle(){return{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",backgroundColor:this.splashColor||"rgba(255, 255, 255, 0.2)",opacity:0,pointerEvents:"none",animation:this._isPressed?"fab-ripple 0.6s ease-out":"none"}}_handlePress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate(10),this.onPressed&&this.onPressed(e)}_handleLongPress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate([10,20,10]),this.onLongPress&&this.onLongPress(e)}_handleTapDown(e){this._isPressed=!0}_handleTapUp(e){this._isPressed=!1}_injectKeyframes(){if(typeof document<"u"&&!document.getElementById("fab-keyframes")){const e=document.createElement("style");e.id="fab-keyframes",e.textContent=`
        @keyframes fab-ripple {
          0% {
            opacity: 1;
            transform: scale(1);
          }
          100% {
            opacity: 0;
            transform: scale(2);
          }
        }
      `,document.head.appendChild(e)}}build(e){const n=this._getButtonStyle();let o=null;if(this.child){const t=this.child.createElement?.()||this.child;t.mount&&t.mount(e.element),o=t.performRebuild?.()||null}this._injectKeyframes();const s=new r({tag:"button",props:{style:n,type:"button",title:this.tooltip||"","aria-label":this.tooltip||"Floating Action Button"},children:[new r({tag:"span",props:{style:this._getRippleStyle(),className:"fab-ripple"},children:[]}),new r({tag:"span",props:{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}},children:o?[o]:[]})]}),l=new m({onTap:t=>this._handlePress(t),onTapDown:t=>this._handleTapDown(t),onTapUp:t=>this._handleTapUp(t),onLongPress:t=>this._handleLongPress(t),child:new h({build:t=>s})}).createElement?.();l&&l.mount&&l.mount(e.element);let i=l?.performRebuild?.()||null;return this.tooltip?new r({tag:"div",props:{style:{position:"relative",display:"inline-block"},"data-widget":"FloatingActionButton"},children:[i,new r({tag:"div",props:{style:{visibility:"hidden",backgroundColor:"#333",color:"#fff",textAlign:"center",borderRadius:"4px",padding:"5px 8px",position:"absolute",zIndex:1e3,bottom:"125%",left:"50%",marginLeft:"-40px",opacity:0,transition:"opacity 0.3s",whiteSpace:"nowrap",fontSize:"12px",fontWeight:500,pointerEvents:"none",width:"80px"},className:"fab-tooltip"},children:[this.tooltip]})]}):i}createElement(){return new f(this)}debugFillProperties(e){super.debugFillProperties(e),e.push({name:"onPressed",value:this.onPressed?"fn":null}),e.push({name:"tooltip",value:this.tooltip}),e.push({name:"backgroundColor",value:this.backgroundColor}),this.mini&&e.push({name:"mini",value:!0})}}class f extends k{performRebuild(){return this.widget.build(this.context)}}class S extends h{constructor({key:e=null,onPressed:n=null,onLongPress:o=null,tooltip:s=null,foregroundColor:a="#FFF",backgroundColor:l=null,icon:i=null,label:t="",elevation:u=6,highlightElevation:d=12,clipBehavior:c="clip",heroTag:p="FloatingActionButton",enableFeedback:g=!0}={}){if(super(e),!n)throw new Error("FloatingActionButtonExtended requires onPressed callback");this.onPressed=n,this.onLongPress=o,this.tooltip=s,this.foregroundColor=a,this.backgroundColor=l||this._getDefaultBackgroundColor(),this.icon=i,this.label=t,this.elevation=u,this.highlightElevation=d,this.clipBehavior=c,this.heroTag=p,this.enableFeedback=g,this._isPressed=!1}_getDefaultBackgroundColor(){return typeof window<"u"?(getComputedStyle(document.documentElement).getPropertyValue("--primary-color")||"#2196F3").trim():"#2196F3"}_handlePress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate(10),this.onPressed&&this.onPressed(e)}_handleLongPress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate([10,20,10]),this.onLongPress&&this.onLongPress(e)}build(e){const n=this._isPressed?this.highlightElevation:this.elevation,o={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 20px",borderRadius:"48px",backgroundColor:this.backgroundColor,color:this.foregroundColor,border:"none",cursor:"pointer",boxShadow:`0 ${n}px ${n*1.5}px rgba(0, 0, 0, 0.${n})`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:"14px",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px",outline:"none",fontFamily:"inherit",userSelect:"none",WebkitUserSelect:"none",minHeight:"48px"};let s=null;if(this.icon){const t=this.icon.createElement?.()||this.icon;t.mount&&t.mount(e.element),s=t.performRebuild?.()||null}const a=new r({tag:"button",props:{style:o,type:"button",title:this.tooltip||"","aria-label":this.tooltip||this.label},children:[s&&new r({tag:"span",props:{style:{display:"flex",alignItems:"center"}},children:[s]}),new r({tag:"span",props:{},children:[this.label]})]}),i=new m({onTap:t=>this._handlePress(t),onLongPress:t=>this._handleLongPress(t),child:new h({build:t=>a})}).createElement?.();return i&&i.mount&&i.mount(e.element),i?.performRebuild?.()||null}createElement(){return new f(this)}}export{E as FloatingActionButton,f as FloatingActionButtonElement,S as FloatingActionButtonExtended};
//# sourceMappingURL=floating_action_button.js.map
