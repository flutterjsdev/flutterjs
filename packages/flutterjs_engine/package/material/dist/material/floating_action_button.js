import{StatelessWidget as h}from"../core/widget_element.js";import{Element as E}from"@flutterjs/runtime";import{VNode as r}from"@flutterjs/vdom/vnode";import{GestureDetector as b}from"./gesture_detector.js";class S extends h{constructor({key:e=null,onPressed:n=null,onLongPress:o=null,tooltip:l=null,foregroundColor:a="#FFF",backgroundColor:s=null,focusColor:i=null,hoverColor:t=null,splashColor:u=null,elevation:d=6,highlightElevation:p=12,disabledElevation:c=0,child:m=null,mini:y=!1,shape:v=null,clipBehavior:C="clip",autofocus:P=!1,materialTapTargetSize:w=null,isExtended:_=!1,enableFeedback:F=!0,heroTag:k="FloatingActionButton"}={}){if(super(e),!n)throw new Error("FloatingActionButton requires onPressed callback");this.onPressed=n,this.onLongPress=o,this.tooltip=l,this.foregroundColor=a,this.backgroundColor=s||this._getDefaultBackgroundColor(),this.focusColor=i,this.hoverColor=t,this.splashColor=u,this.elevation=d,this.highlightElevation=p,this.disabledElevation=c,this.child=m,this.mini=y,this.shape=v,this.clipBehavior=C,this.autofocus=P,this.materialTapTargetSize=w,this.isExtended=_,this.enableFeedback=F,this.heroTag=k,this._isHovered=!1,this._isPressed=!1}_getDefaultBackgroundColor(){return typeof window<"u"?(getComputedStyle(document.documentElement).getPropertyValue("--primary-color")||"#2196F3").trim():"#2196F3"}_getButtonSize(){return this.mini?40:56}_getButtonStyle(){const e=this._getButtonSize(),n=this._isPressed?this.highlightElevation:this.elevation;return{position:"relative",width:`${e}px`,height:`${e}px`,borderRadius:"50%",backgroundColor:this.backgroundColor,color:this.foregroundColor,border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:`0 ${n}px ${n*1.5}px rgba(0, 0, 0, 0.${n})`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",fontFamily:"inherit",fontSize:"24px",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}}_getRippleStyle(){return{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",backgroundColor:this.splashColor||"rgba(255, 255, 255, 0.2)",opacity:0,pointerEvents:"none",animation:this._isPressed?"fab-ripple 0.6s ease-out":"none"}}_handlePress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate(10),this.onPressed&&this.onPressed(e)}_handleLongPress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate([10,20,10]),this.onLongPress&&this.onLongPress(e)}_handleTapDown(e){this._isPressed=!0}_handleTapUp(e){this._isPressed=!1}_injectKeyframes(){if(typeof document<"u"&&!document.getElementById("fab-keyframes")){const e=document.createElement("style");e.id="fab-keyframes",e.textContent=`
        @keyframes fab-ripple {
          0% {
            opacity: 1;
            transform: scale(1);
          }
          100% {
            opacity: 0;
            transform: scale(2);
          }
        }
      `,document.head.appendChild(e)}}build(e){const n=this._getButtonStyle();let o=null;if(this.child){const t=this.child.createElement?.(e.element,e.element.runtime)||this.child;t.mount&&t.mount(e.element),o=t.performRebuild?.(e.element,e.element.runtime)||null}this._injectKeyframes();const l=new r({tag:"button",props:{style:n,type:"button",title:this.tooltip||"","aria-label":this.tooltip||"Floating Action Button"},children:[new r({tag:"span",props:{style:this._getRippleStyle(),className:"fab-ripple"},children:[]}),new r({tag:"span",props:{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}},children:o?[o]:[]})]}),s=new b({onTap:t=>this._handlePress(t),onTapDown:t=>this._handleTapDown(t),onTapUp:t=>this._handleTapUp(t),onLongPress:t=>this._handleLongPress(t),child:new h({build:t=>l})}).createElement?.(e.element,e.element.runtime);s&&s.mount&&s.mount(e.element);let i=s?.performRebuild?.(e.element,e.element.runtime)||null;return this.tooltip?new r({tag:"div",props:{style:{position:"relative",display:"inline-block"},"data-widget":"FloatingActionButton"},children:[i,new r({tag:"div",props:{style:{visibility:"hidden",backgroundColor:"#333",color:"#fff",textAlign:"center",borderRadius:"4px",padding:"5px 8px",position:"absolute",zIndex:1e3,bottom:"125%",left:"50%",marginLeft:"-40px",opacity:0,transition:"opacity 0.3s",whiteSpace:"nowrap",fontSize:"12px",fontWeight:500,pointerEvents:"none",width:"80px"},className:"fab-tooltip"},children:[this.tooltip]})]}):i}createElement(e,n){return new g(this,e,n)}debugFillProperties(e){super.debugFillProperties(e),e.push({name:"onPressed",value:this.onPressed?"fn":null}),e.push({name:"tooltip",value:this.tooltip}),e.push({name:"backgroundColor",value:this.backgroundColor}),this.mini&&e.push({name:"mini",value:!0})}}class g extends E{performRebuild(e,n){return this.widget.build(this.context)}}class x extends h{constructor({key:e=null,onPressed:n=null,onLongPress:o=null,tooltip:l=null,foregroundColor:a="#FFF",backgroundColor:s=null,icon:i=null,label:t="",elevation:u=6,highlightElevation:d=12,clipBehavior:p="clip",heroTag:c="FloatingActionButton",enableFeedback:m=!0}={}){if(super(e),!n)throw new Error("FloatingActionButtonExtended requires onPressed callback");this.onPressed=n,this.onLongPress=o,this.tooltip=l,this.foregroundColor=a,this.backgroundColor=s||this._getDefaultBackgroundColor(),this.icon=i,this.label=t,this.elevation=u,this.highlightElevation=d,this.clipBehavior=p,this.heroTag=c,this.enableFeedback=m,this._isPressed=!1}_getDefaultBackgroundColor(){return typeof window<"u"?(getComputedStyle(document.documentElement).getPropertyValue("--primary-color")||"#2196F3").trim():"#2196F3"}_handlePress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate(10),this.onPressed&&this.onPressed(e)}_handleLongPress(e){this.enableFeedback&&navigator.vibrate&&navigator.vibrate([10,20,10]),this.onLongPress&&this.onLongPress(e)}build(e){const n=this._isPressed?this.highlightElevation:this.elevation,o={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 20px",borderRadius:"48px",backgroundColor:this.backgroundColor,color:this.foregroundColor,border:"none",cursor:"pointer",boxShadow:`0 ${n}px ${n*1.5}px rgba(0, 0, 0, 0.${n})`,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:"14px",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px",outline:"none",fontFamily:"inherit",userSelect:"none",WebkitUserSelect:"none",minHeight:"48px"};let l=null;if(this.icon){const t=this.icon.createElement?.(e.element,e.element.runtime)||this.icon;t.mount&&t.mount(e.element),l=t.performRebuild?.(e.element,e.element.runtime)||null}const a=new r({tag:"button",props:{style:o,type:"button",title:this.tooltip||"","aria-label":this.tooltip||this.label},children:[l&&new r({tag:"span",props:{style:{display:"flex",alignItems:"center"}},children:[l]}),new r({tag:"span",props:{},children:[this.label]})]}),i=new b({onTap:t=>this._handlePress(t),onLongPress:t=>this._handleLongPress(t),child:new h({build:t=>a})}).createElement?.(e.element,e.element.runtime);return i&&i.mount&&i.mount(e.element),i?.performRebuild?.(e.element,e.element.runtime)||null}createElement(e,n){return new g(this,e,n)}}export{S as FloatingActionButton,g as FloatingActionButtonElement,x as FloatingActionButtonExtended};
//# sourceMappingURL=floating_action_button.js.map
