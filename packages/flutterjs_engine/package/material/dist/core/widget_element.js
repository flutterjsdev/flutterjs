import{Diagnosticable as h,Element as o}from"@flutterjs/runtime/element";import{VNode as w}from"@flutterjs/vdom/vnode";class s extends h{constructor(e=null){if(super(),new.target===s)throw new Error("Widget is abstract and cannot be instantiated");this.key=e}createElement(){throw new Error(`${this.constructor.name}.createElement() must be implemented`)}toStringShort(){return`${this.constructor.name}${this.key?`(key: ${this.key})`:"(unkeyed)"}`}debugFillProperties(e){super.debugFillProperties(e)}}class m extends s{constructor(e=null){super(e)}build(e){throw new Error(`${this.constructor.name}.build() must be implemented`)}createElement(){return new p(this)}reassemble(){}}class p extends o{constructor(e){super(e)}mount(e=null){super.mount(e)}reassemble(){this.widget.reassemble?.(),super.reassemble()}performRebuild(){try{return this.widget.build(this.context)}catch(e){return console.error(`build error: ${e}`),new g({message:e.toString()})}}}class E extends s{constructor(e=null){super(e)}createState(){throw new Error(`${this.constructor.name}.createState() must be implemented`)}createElement(){return new b(this)}reassemble(){}}class b extends o{constructor(e){super(e),this.state=e.createState(),this.state._element=this,this.state.widget=e}mount(e=null){super.mount(e),this.state._mount(this)}unmount(){try{this.state.dispose()}catch(e){console.error(`dispose error in ${this._debugLabel}:`,e)}this.state._unmount(),super.unmount()}activate(){this.state._reactivate(),super.activate?.()}deactivate(){try{this.state.deactivate()}catch(e){console.error(`deactivate error in ${this._debugLabel}:`,e)}this.state._deactivate(),super.deactivate()}updateWidget(e){const t=this.widget;this.widget=e,this.state._updateWidget(e);try{this.state.didUpdateWidget(t)}catch(a){console.error(`didUpdateWidget error in ${this._debugLabel}:`,a)}this.markNeedsBuild()}performRebuild(){try{return this.state.build(this.context)}catch(e){throw console.error(`build error in ${this._debugLabel}:`,e),e}}reassemble(){try{this.state.reassemble()}catch(e){console.error(`reassemble error: ${e}`)}super.reassemble()}didChangeDependencies(){try{this.state.didChangeDependencies()}catch(e){console.error(`didChangeDependencies error: ${e}`)}}debugFillProperties(e){super.debugFillProperties(e),e.push({name:"stateType",value:this.state.constructor.name}),e.push({name:"stateInitialized",value:this.state._didInitState})}}class g extends m{constructor({message:e="Error",error:t=null}={}){super(),this.message=e,this.error=t}build(e){return new w({tag:"div",props:{style:{backgroundColor:"#ff1744",color:"white",padding:"16px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"}},children:[this.message]})}}class u{constructor(){if(new.target===u)throw new Error("Notification is abstract")}dispatch(e){e.dispatchNotification(this)}}class f extends i{constructor({key:e=null,child:t=null,onNotification:a=null}={}){super({key:e,child:t}),this.onNotification=a}createElement(){return new NotificationListenerElement(this)}}class n{constructor(){if(new.target===n)throw new Error("Key is abstract")}}class l extends n{constructor(e){super(),this.value=e}equals(e){return e instanceof l&&this.value===e.value}toString(){return`ValueKey(${this.value})`}}class c extends n{constructor(e){super(),this.value=e}equals(e){return e instanceof c&&this.value===e.value}toString(){return`ObjectKey(${this.value})`}}class d extends n{constructor(e=null){super(),this.debugLabel=e,this._currentElement=null}get currentContext(){return this._currentElement?.context||null}get currentWidget(){return this._currentElement?.widget||null}get currentState(){return this._currentElement?.state||null}equals(e){return e instanceof d&&this===e}toString(){return`GlobalKey${this.debugLabel?`(${this.debugLabel})`:""}`}}class i extends s{constructor({key:e=null,child:t=null}={}){if(super(e),new.target===i)throw new Error("ProxyWidget is abstract");this.child=t}createElement(){return new ProxyElement(this)}}class x extends i{constructor({key:e=null,child:t=null}={}){super({key:e,child:t})}updateShouldNotify(e){throw new Error(`${this.constructor.name}.updateShouldNotify() must be implemented`)}createElement(){return new InheritedElement(this)}static of(e,t){return e.dependOnInheritedWidgetOfExactType(t)}}export{h as Diagnosticable,o as Element,g as ErrorWidget,d as GlobalKey,x as InheritedWidget,n as Key,u as Notification,f as NotificationListener,c as ObjectKey,i as ProxyWidget,b as StatefulElement,E as StatefulWidget,p as StatelessElement,m as StatelessWidget,l as ValueKey,s as Widget};
//# sourceMappingURL=widget_element.js.map
