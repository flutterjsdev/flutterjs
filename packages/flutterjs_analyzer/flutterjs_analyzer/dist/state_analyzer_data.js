class r{constructor(t,e,s=null){this.name=t,this.location=e,this.linkedStatefulWidget=s,this.stateFields=[],this.lifecycleMethods=[],this.eventHandlers=[],this.otherMethods=[],this.extends="State",this.constructor=null}addStateField(t){t instanceof a&&this.stateFields.push(t)}addLifecycleMethod(t){t instanceof n&&this.lifecycleMethods.push(t)}summary(){return{name:this.name,statefulWidget:this.linkedStatefulWidget,fieldCount:this.stateFields.length,lifecycleMethodCount:this.lifecycleMethods.length,totalMethods:this.otherMethods.length}}}class a{constructor(t,e,s,i){this.name=t,this.type=e,this.location=i,this.initialValue=s,this.initialValueString=this.valueToString(s),this.isMutable=!0,this.mutations=[],this.usedInMethods=[],this.mutatedInMethods=[],this.usedInBuild=!1}recordUsage(t){this.usedInMethods.includes(t)||this.usedInMethods.push(t)}recordMutation(t,e="=",s=null){this.mutations.push({method:t,operation:e,location:s,wrappedInSetState:!1}),this.mutatedInMethods.includes(t)||this.mutatedInMethods.push(t)}isUsed(){return this.usedInMethods.length>0||this.usedInBuild}valueToString(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?`"${t}"`:typeof t=="boolean"?t?"true":"false":String(t)}summary(){return{name:this.name,type:this.type,initialValue:this.initialValueString,isUsed:this.isUsed(),usedInMethods:this.usedInMethods,mutatedInMethods:this.mutatedInMethods,mutationCount:this.mutations.length}}}class n{constructor(t,e,s=[],i=!1,o=!1){this.name=t,this.location=e,this.params=s,this.callsSuper=i,this.hasSideEffects=o,this.shouldCallSuper=!1,this.validationIssues=[]}setMustCallSuper(t){this.shouldCallSuper=t}addIssue(t,e,s="warning"){this.validationIssues.push({type:t,message:e,severity:s})}isValid(){return this.name==="dispose"&&!this.callsSuper||this.name==="initState"&&!this.callsSuper?!1:this.validationIssues.filter(t=>t.severity==="error").length===0}summary(){return{name:this.name,callsSuper:this.callsSuper,shouldCallSuper:this.shouldCallSuper,hasSideEffects:this.hasSideEffects,isValid:this.isValid(),issues:this.validationIssues}}}class l{constructor(t,e,s=[],i){this.location=t,this.method=e,this.stateClassName=i,this.updates=s||[],this.isValid=!0,this.issues=[]}addIssue(t,e,s="error"){this.issues.push({type:t,message:e,severity:s}),s==="error"&&(this.isValid=!1)}updatesField(t){return this.updates.includes(t)}summary(){return{method:this.method,updates:this.updates,isValid:this.isValid,issueCount:this.issues.length,issues:this.issues}}}class u{constructor(t,e,s,i="Unknown"){this.event=t,this.handler=e,this.location=s,this.component=i,this.isValid=!0,this.issues=[],this.triggersSetState=!1}addIssue(t,e,s="error"){this.issues.push({type:t,message:e,severity:s}),s==="error"&&(this.isValid=!1)}marksSetState(t=!0){this.triggersSetState=t}summary(){return{event:this.event,handler:this.handler,component:this.component,triggersSetState:this.triggersSetState,isValid:this.isValid,issues:this.issues}}}class d{constructor(){this.stateToMethods=new Map,this.methodToState=new Map,this.eventToState=new Map,this.methodToMethods=new Map}addStateUse(t,e){this.stateToMethods.has(t)||this.stateToMethods.set(t,[]);const s=this.stateToMethods.get(t);s.includes(e)||s.push(e)}addMethodStateUse(t,e){this.methodToState.has(t)||this.methodToState.set(t,[]);const s=this.methodToState.get(t);s.includes(e)||s.push(e)}addEventStateUse(t,e){this.eventToState.has(t)||this.eventToState.set(t,[]);const s=this.eventToState.get(t);s.includes(e)||s.push(e)}getStateForMethod(t){return this.methodToState.get(t)||[]}getMethodsForState(t){return this.stateToMethods.get(t)||[]}getStateForEvent(t){return this.eventToState.get(t)||[]}summary(){return{stateToMethods:Object.fromEntries(this.stateToMethods),methodToState:Object.fromEntries(this.methodToState),eventToState:Object.fromEntries(this.eventToState)}}}class c{constructor(t,e,s="warning",i=null){this.type=t,this.message=e,this.severity=s,this.location=i,this.suggestion=null,this.affectedItem=null}withSuggestion(t){return this.suggestion=t,this}affecting(t){return this.affectedItem=t,this}toObject(){return{type:this.type,message:this.message,severity:this.severity,location:this.location,suggestion:this.suggestion,affectedItem:this.affectedItem}}}class S{constructor(){this.stateClassCount=0,this.stateFieldCount=0,this.setStateCallCount=0,this.lifecycleMethodCount=0,this.eventHandlerCount=0,this.errorCount=0,this.warningCount=0,this.complexityScore=0,this.healthScore=0}calculateComplexity(){let t=0;return t+=Math.min(this.stateFieldCount*10,40),t+=Math.min(this.setStateCallCount*5,30),t+=Math.min(this.eventHandlerCount*2,20),this.complexityScore=Math.min(100,t),this.complexityScore}calculateHealth(){let t=100;return t-=this.errorCount*10,t-=this.warningCount*2,this.complexityScore>70&&(t-=10),this.healthScore=Math.max(0,t),this.healthScore}toObject(){return{stateClasses:this.stateClassCount,stateFields:this.stateFieldCount,setStateCalls:this.setStateCallCount,lifecycleMethods:this.lifecycleMethodCount,eventHandlers:this.eventHandlerCount,errors:this.errorCount,warnings:this.warningCount,complexityScore:this.complexityScore,healthScore:this.healthScore}}}export{S as AnalysisSummary,d as DependencyGraph,u as EventHandler,n as LifecycleMethod,r as StateClassMetadata,a as StateField,l as StateUpdateCall,c as ValidationResult};
//# sourceMappingURL=state_analyzer_data.js.map
